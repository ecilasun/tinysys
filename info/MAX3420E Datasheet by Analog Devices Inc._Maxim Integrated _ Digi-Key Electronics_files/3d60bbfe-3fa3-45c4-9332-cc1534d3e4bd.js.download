var CS_CONF={"projectId":3715,"status":1,"hostnames":["digikey.com","www.digikey.com","digikey.de","digikey.jp","digikey.in","digikey.ca","qualtrics.com","digikey.cn","www.digikey.cn","digikey.kr","digikey.co.uk"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":null,"trackerDomain":"c.clicktale.net","recordingDomain":"r.clicktale.net","useMalkaPipeline":1,"ed":"l.clicktale.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAucFIZ8aP87TOVppfn1eX\n\nApOr0VVGw2hGZ+OR22eaiwmFSPyOXg3UywPq4Du1LgzwjOaNBkcEeT7yUzTu1ZDo\n\njEVB6KNN22zkNMD8AH/kPSFyIXxZMTeycPR805FEu1dTH0Zqbz8mPkmqG6sRkDlW\n\np3LdiGQfmwm3r60/P/XcOFHbB/BKk66q/yh3iB5ysMitwD1eb9PdgblWdrbc/3is\n\nM1D/RUYz/jxSpdDwbyWGd2j7nB+utrFZhNcb/jwbw0cRH8eyfpYcLzpUb95xNI2V\n\nevA52xC6hmsQdv2Roq8FLsnjDdop8WCc7w/jkWqx8i1Q4AquvwOANKw4/z4uMVJi\n\n+wIDAQAB","recordingEncryptionPublicKeyId":1684,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingMaskedUrlRegex":".*\\/MyDigiKey\\/ReviewOrder.*","tagDeploymentMode":"DUAL_COLLECTION","experimental":null,"iframesTracking":0,"textVisibilityEnabled":1,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"apiErrors":{"validCustomHeaders":[],"validUrls":[],"collectStandardHeaders":0,"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0},"malkaQuotaServiceDomain":"q-aus1.clicktale.net","malkaRecordingDomain":"k-aus1.clicktale.net","dualCollectionTagDomain":"clicktale.net","ptcDomain":"cdnssl.clicktale.net","ptcPartition":"www","ptcGuid":"3d60bbfe-3fa3-45c4-9332-cc1534d3e4bd"};
var CS_INTEGRATIONS_CONF = {"optimizely":{},"qualtrics":{},"google-optimize":{}};
/* integration-optimizely 2.6.3 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-optimizely-cap","version":"2.6.3","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function a(e,n,t){if((t=t||window)&&n&&e){var i=!1,a=t[e];a?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,i||(i=!0,n())}})}}t.r(n);var r=t(0),o=r.name,u=r.version,p=function(e){var n,t,a,r;if(i((function(){var i=e.name;a=e.version;var o=i.replace("@contentsquare/integration-","");n=o+"-"+a;var u="-contentsquare";r=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:n,parameterName:t,snippetVersion:a}}(r);p&&(p.parameterName,o=p.snippetBuildName,u=p.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Optimizely - v"+u);var e=!1;function n(n){var t=[];!function(e,n,t){t=t||window;var i=e.split(".");if(1==i.length)a(e,n,t);else{var r=t,o=0;const e=function(){r=o>0?r[i[o-1]]:window,++o>=i.length?a(i[o-1],n,r):a(i[o-1],e,r)};e()}}("optimizely",(function(){setTimeout((function(){i((function(){function n(){i((function(){var e,n,i=optimizely.get&&optimizely.get("state");if(i&&i.getCampaignStates&&"function"==typeof i.getCampaignStates&&"object"==typeof i.getCampaignStates())for(var a=i.getCampaignStates({isActive:!0}),r=Object.keys(a),o=0;o<r.length;o++)if(-1===t.indexOf(r[o])){t.push(r[o]);var u=a[r[o]];if(u.experiment){var p="",c="";p=u.experiment.name?u.campaignName:u.experiment.id,c=u.experiment.campaignName&&u.experiment.name?u.experiment.name+" - "+u.variation.name:u.variation.name?u.variation.name:u.variation.id,u.isInCampaignHoldback&&(c+=" [Holdback]"),p&&c&&(n=c,e="AB_OP_"+(e=p),_uxa.push(["trackDynamicVariable",{key:e,value:n}]))}}}),o)}n(),e||(e=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))}),o)}),500)}))}_uxa.push(["afterPageView",function(e){i((function(){n()}),o)}])}),o)}]);/* integration-qualtrics 2.18.4 */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-qualtrics-cap","version":"2.18.4","scripts":{"build:snippet":"webpack"}}')},function(e,t,n){"use strict";function i(e,t){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",t,e.message])}}function a(e){return"object"==typeof e&&null!==e}function r(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.r(t);var o,c=n(0),s=c.name,u=c.version,l=function(e){var t,n,a,r;if(i((function(){var i=e.name;a=e.version;var o=i.replace("@contentsquare/integration-","");t=o+"-"+a;var c="-contentsquare";r=new RegExp(c+"$").test(o),n=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(c="-cap",r=new RegExp(c+"$").test(o),n=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:n,snippetVersion:a}}(c);l&&(o=l.parameterName,s=l.snippetBuildName,u=l.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Qualtrics - v"+u);var e=!1;window.self!=window.top&&(e=CS_CONF.iframesTracking);var t=function(e,t){if(a(window.CS_INTEGRATIONS_CONF)&&a(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][t]}(o,"settings"),n=!1,c=1;t&&(t.indexOf("sendArtificialPageviews")>-1&&(n=!0),t.indexOf("setReplayLinkToFirstPV")>-1&&(c=0));var l=!1;function d(e,t,i,a){e="FB_QT_"+e,_uxa.push(["trackDynamicVariable",{key:e,value:t}]),l&&"etr"===i&&_uxa.push(["trackEventTriggerRecording","@ETS@"+e]),a&&n&&_uxa.push(["trackPageview",window.location.pathname+"?"+a])}function f(){for(var e=0,t=document.domain,n=t.split("."),i="_cs_tld"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}function p(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}function _(){var e={contentsquare_integration:p("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):self!=top&&window.top.postMessage(e,"*")}function g(e){return e.toString().replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}if(window.Qualtrics&&Qualtrics.SurveyEngine&&Qualtrics.SurveyEngine.setEmbeddedData&&Qualtrics.SurveyEngine.QuestionInfo&&Qualtrics.SurveyEngine.addOnPageSubmit&&window.Page&&Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID){if(!e){var S="";if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?S=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(S=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{var m=document.location.search;m.indexOf("CSID=")>-1?S=r("CSID"):CS_CONF.ptcDomain&&m.indexOf("CT_UID=")>-1?S=r("CT_UID"):window._cs_integration_qualtrics_csid&&(S=decodeURIComponent(_cs_integration_qualtrics_csid))}if(S&&"null"!=S){var v=S.split("~"),y=v[0],C=v[1],w=v[2],I=v[3],h=f();y&&C&&w&&(I?document.cookie="_cs_optout="+I+";domain="+h+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+h+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+y+";domain="+h+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+C+";domain="+h+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+w+";domain="+h+";path=/;SameSite=None;Secure")}}var T=Page.runtime.ED.SurveyID,k=Page.getSessionId().replace("FS_","R_");function b(t){if(!e){var n=p("_cs_s");if(n&&n.indexOf(".T.")>-1)var i=setInterval((function(){(n=p("_cs_s"))&&-1===n.indexOf(".T.")&&(clearInterval(i),_())}),500);else _()}setTimeout((function(){if(l=_uxa.push(["isRecording"])){var e=function(e,t,n){e||(e="missingFromDynamicSnippet");var i=t;if(isNaN(i)&&(t=0),n){var a=n.sessionKey.split("."),r=n.projectId,o=a[0],c=a[1],s=n.pageNumber,u=s-t;return t>=s&&(u=s),0===i&&(u=1),"https://app.contentsquare.com/quick-playback/index.html?pid="+r+"&uu="+o+"&sn="+c+"&pvid="+u+"&recordingType=cs&vd="+e}}("qt",c,t);e&&(CS_CONF.ptcDomain&&Qualtrics.SurveyEngine.setEmbeddedData("ClicktaleSpecificRecording",e),Qualtrics.SurveyEngine.setEmbeddedData("ContentsquareReplayLink",e))}}),500)}d("Feedback Displayed","Survey ID : "+T),_uxa.push(["afterPageView",function(e){i((function(){b(e)}),s)}]),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",(function(e){i((function(){if(e&&"object"==typeof e.detail&&"string"==typeof e.detail.key&&"string"==typeof e.detail.value){var t=e.detail.key,n=e.detail.value;"FB_QT_"===t.slice(0,6)&&(t=t.slice(6)),d(t,n)}}),s)}));var O=!1,D=!1,x=!1,N=[];function E(){if(window.Qualtrics&&Qualtrics.SurveyEngine&&Qualtrics.SurveyEngine.QuestionInfo)for(var e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e),n=0;n<t.length;n++){var i=Qualtrics.SurveyEngine.QuestionInfo[t[n]].Selector;if(i&&"TB"!=i){D=!0;break}}}E(),Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit&&Qualtrics.SurveyEngine.addOnPageSubmit((function e(){i((function(){if(E(),O||(O=!0,d("Feedback Accepted","Survey ID : "+T,0,"cs_qualtrics=feedback_accepted_"+T)),setTimeout((function(){D&&!x&&!1===Page.runtime.FailedValidation&&(x=!0,d("Feedback Submitted","Survey ID : "+T,"etr","cs_qualtrics=feedback_submitted_"+T),d("Feedback Response ID",k))}),2e3),Page._questionRenderers){for(var t=Page._questionRenderers,n=Object.keys(t),i=0;i<n.length;i++){var a=t[n[i]].runtime;if(a&&a.Selector&&a.QuestionText&&a.Displayed){var r=a.QuestionText;if("NPS"===a.Selector&&a.Selected){var o=parseInt(a.Selected);N.includes(n[i]+"~~~"+o)||(N.push(n[i]+"~~~"+o),d("NPS Rating - "+n[i]+" - "+T+" - "+r,o))}if("STAR"===a.Selector)for(var c=a.Choices,s=Object.keys(c),u=0;u<s.length;u++){var l=c[s[u]].Display;if(c[s[u]].Value){var f=parseInt(c[s[u]].Value);N.includes(n[i]+" ("+(u+1)+")~~~"+f)||(N.push(n[i]+" ("+(u+1)+")~~~"+f),d("Star Rating - "+n[i]+" ("+(u+1)+") - "+T+" - "+l,f))}}if("SAVR"===a.Selector||"SAHR"===a.Selector)if((m=a.Selected)&&a.Choices)(v=a.Choices[m].ID)&&(N.includes(n[i]+"~~~AID"+v)||(N.push(n[i]+"~~~AID"+v),d(n[i]+" - "+T,"AID"+v)));if("MAVR"===a.Selector&&a.Choices){var p=a.Choices,_=Object.keys(p);for(u=0;u<_.length;u++){if(p[_[u]].Selected)(v=p[_[u]].ID)&&(N.includes(n[i]+"~~~AID"+v)||(N.push(n[i]+"~~~AID"+v),d(n[i]+" - "+T,"AID"+v)))}}if("Likert"===a.Selector&&a.Choices){var g=a.Choices,S=Object.keys(g);for(u=0;u<S.length;u++){var m,v;if(m=g[S[u]].Selected)if(!N.includes(n[i]+"~~~"+m))(v=g[S[u]].ID)&&(N.push(n[i]+"~~~"+m),d(n[i]+" - "+T+" - AID"+v,m))}}}}setTimeout((function(){document.getElementById("NextButton")||d("Feedback Completed","Survey ID : "+T,0,"cs_qualtrics=feedback_completed_"+T)}),2e3)}Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit&&Qualtrics.SurveyEngine.addOnPageSubmit(e)}),s)}))}else if(!e){function P(){var e=p("_cs_id"),t=p("_cs_c"),n=p("_cs_optout");return e+"~"+Q+"~"+t+"~"+n}var Q;function q(e){function t(){var e=P();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if((Q=p("_cs_s"))&&Q.indexOf(".T.")>-1)var n=setInterval((function(){(Q=p("_cs_s"))&&-1===Q.indexOf(".T.")&&(clearInterval(n),t())}),500);else t()}function b(e){q()}window.addEventListener("message",(function(e){var t=e.data;t&&(t.contentsquare_integration&&"qualtrics"===t.vendor&&i((function(){var e=t.contentsquare_integration;if(window.CS_CONF&&CS_CONF.allowSubdomains){var n=f();document.cookie="_cs_s="+g(e)+";domain="+g(n)+";path=/"}else document.cookie="_cs_s="+g(e)+";path=/";q()}),s),t.message&&"Contentsquare_QT_Integration_Ready"===t.message&&i((function(){var t={message:"Contentsquare_QT_Integration_Launch",user_values:P()};e.source.postMessage(t,"*")}),s))})),_uxa.push(["afterPageView",function(e){i((function(){b()}),s)}])}}),s)}]);/* integration-google-optimize 2.6.0 */
!function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(a,r,function(n){return e[n]}.bind(null,r));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-google-optimize-cap","version":"2.6.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function a(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function r(e,n,t){if((t=t||window)&&n&&e){var a=!1,r=t[e];r?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e,a||(a=!0,n())}})}}t.r(n);var i=t(0),o=i.name,u=i.version,c=function(e){var n,t,r,i;if(a((function(){var a=e.name;r=e.version;var o=a.replace("@contentsquare/integration-","");n=o+"-"+r;var u="-contentsquare";i=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:n,parameterName:t,snippetVersion:r}}(i);c&&(c.parameterName,o=c.snippetBuildName,u=c.snippetVersion),a((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Google Optimize - v"+u);var e;var n=!1,t="",i="";function c(n,t){var a,r;e.length&&e.indexOf(n+"~~~~"+t)>-1&&(n="",t=""),n&&t&&(e.push(n+"~~~~"+t),r=t,a="AB_GO_"+(a=n),_uxa.push(["trackDynamicVariable",{key:a,value:r}]))}function p(u){if(e=[],window.dataLayer&&!n){n=!0,(window.gtag?gtag:function(){dataLayer.push(arguments)})("event","optimize.callback",{callback:function(e,n){a((function(){e||(e="true"),n&&e&&c(t=n,i=e)}),o)}})}if(document.location.search.indexOf("utm_expid=.")>-1){var p=function(e,n){n||(n="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&=]"+e+n+"([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}("utm_expid");p&&(t=p.split(".")[1],i=p.split(".")[2],c(t,i))}!function(e,n,t){t=t||window;var a=e.split(".");if(1==a.length)r(e,n,t);else{var i=t,o=0;const e=function(){i=o>0?i[a[o-1]]:window,++o>=a.length?r(a[o-1],n,i):r(a[o-1],e,i)};e()}}("gaData",(function(){setTimeout((function(){a((function(){var e=!1;for(var n in gaData)e||gaData.hasOwnProperty(n)&&gaData[n].experiments&&(e=!0);if(e){var a=Object.keys(gaData);for(n=0;n<a.length;n++)if(gaData[a[n]].experiments)for(var r=gaData[a[n]].experiments,o=Object.keys(r),u=0;u<o.length;u++){var p=o[u];t=p,i=gaData[a[n]].experiments[p],c(t,i)}}}),o)}),500)}))}_uxa.push(["afterPageView",function(e){a((function(){p()}),o)}])}),o)}]);/*! For license information please see tracking-tag-12.5.6.min.js.LICENSE.txt */
!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{get:function(){return Nt},getRequestParameters:function(){return Tt}});var i={};t.r(i),t.d(i,{getRequestParameters:function(){return Ce}});var r="cs-native-frame",s={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",fetch:"csFetch"}};function e(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(s.constructors).forEach((function(n){window[s.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),h("csNode",s.nodeProperties,t.Node.prototype,"get"),h("csElement",s.elementProperties,t.Element.prototype,"get"),h("csElement",s.elementPropertiesValues,t.Element.prototype,"value",!1),h("csHTMLImageElement",s.imageProperties,t.HTMLImageElement.prototype,"set"),h("csEvent",s.eventProperties,t.Event.prototype,"get"),h("csNavigator",s.navigatorProperties,t.navigator,"value")}function h(t,n,i,r,s){void 0===s&&(s=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,h=u?n.propertyName:n;(s||h in i)&&(window["".concat(t+h)]=e(i,h,r),u&&(window["".concat(t+h)]=window["".concat(t+h)].bind(n.binding)))}))}function o(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Element.prototype.attachShadow){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return o("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(Us){o("Critical","failed to copy references from window: ".concat(Us.message))}function c(t,n){var i=f(csString.prototype.toLowerCase.call(t.localName));return n?csString.prototype.replace.call(i,n,"$1".concat("-static")):i}function f(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function a(t){return t.nodeType===Node.ELEMENT_NODE}function v(t){return t.nodeType===Node.TEXT_NODE}function l(t){return a(t)&&"a"===t.localName}function d(t){return function(t){return a(t)&&"link"===t.localName}(t)&&"stylesheet"===t.rel}function w(t){return a(t)&&"img"===t.localName}function y(t){return a(t)&&"style"===t.localName}function p(t){return a(t)&&"input"===t.localName}function m(t){return a(t)&&"textarea"===t.localName}function g(t){return a(t)&&"script"===t.localName}function A(t){switch(t.nodeType){case Node.DOCUMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:return!0;default:return!1}}function E(t){return t.nodeType===Node.DOCUMENT_NODE}function S(t){return A(t)&&"host"in t&&"mode"in t}var b=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var N="detached";function T(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return R(n)&&csArray.prototype.push.call(i,N),{ancestors:i,selectionRoot:n}}function R(t){return it.isValidElement(t)}var k=Number.MAX_SAFE_INTEGER||9007199254740991;function O(){}function I(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function x(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var L=34164e6,C={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=k),Math.floor(Math.random()*t)}},_="function"==typeof Symbol?Symbol("json"):null;var M,D=_?function(t){if(t[_])return t[_];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+D(t[0]),i=1;i<t.length;i++)n+=","+D(t[i]);return n+"]"}return t[_]=csJSON.stringify(t)}:csJSON.stringify;function P(t){return F(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function U(t){return t===parseInt(t,10)}function j(t){return F(t)&&("string"==typeof t||t instanceof csString)}function q(t){return"object"==typeof t}function F(t){return void 0!==t}function H(t){return F(t)&&null!==t}function V(t){return"function"==typeof t}function z(t){return t instanceof Element}!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(M||(M={}));var J=function(){function t(){}return t.setStrategy=function(n){t.t=n},t.computeIsActive=function(n){t.i=C.boolean(n),t.i?t.h=C.boolean(10):t.h=!1},t.isLoggingActive=function(){return t.i},t.getStrategy=function(){return t.t},t.debug=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.warn)},t.error=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.error)},t.critical=function(n,i){void 0===i&&(i=""),t.i&&this.t.send(n,i,M.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];try{var e=n.apply(void 0,r);return F(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return i.error(n,t)})):e}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.h},t.i=!1,t.h=!1,t}(),G=function(t){return function(n,i,r){var s=(null==i?void 0:i.toString())||"",e=t||"".concat(n.constructor&&n.constructor.name,".").concat(s);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return J.tryToExecute(e,u.bind(this)).apply(void 0,t)}}}},W=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector;function B(t,n){if(!(!!t&&j(t)))return J.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return W.call(n,t),!0}catch(n){return J.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}function K(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return W.call(t,n)}))}var Y=[/\d{4}/,/^ember\d+$/],X="data-cs-override-id",$="data-cs-dynamic-id";function Z(t,n,i,r){var s=r.dynamicIdRegex||null,e=c(t,r.dynamicElementNameRegex);if(function(t,n){var i=Q(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&tt(X,i,n)}(t,i)){var u=Q(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"[").concat(X,'="').concat(u,'"]')}}var h=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,s=i.uniqueAttributes;r<s.length;r++){var e=s[r],u=t.getAttribute(e);if(null!==u)if(tt(e,u,n))return{attributeName:e,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var o=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,s=i.uniqueCssSelectors;r<s.length;r++){var e=s[r];if(W.call(t,e)&&nt(e,n))return e}return}(t,i,r);if(o)return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#UCS[").concat(o,"]")};var a=function(t){var n=t.getAttribute("id");return n?f(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==Q(t)}(t)&&!function(t,n,i){return t.hasAttribute($)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(Y,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&tt("id",t,n)}(n,i)}(t,a,i,s))return{hasUniqueIdentifier:!0,elementSelector:"".concat(e,"#").concat(a)};var v=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var s=r[i];if(W.call(t,s))return s}return}(t,r);if(v){var l=function(t,n,i){if(t===N||9===t.nodeType)return 0;for(var r=0,s=n.previousElementSibling;s;)W.call(s,i)&&(r+=1),s=s.previousElementSibling;return r}(n,t,v);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,"[").concat(v,"](").concat(l,")")}}var d=function(t,n,i){if(t===N||9===t.nodeType)return 0;for(var r=i.dynamicElementNameRegex,s=c(n,r),e=0,u=n.previousElementSibling;u;)c(u,r)!==s||K(u,i.reliableSelectors)||(e+=1),u=u.previousElementSibling;return e}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(e,":eq(").concat(d,")")}}function Q(t){return t.getAttribute(X)}function tt(t,n,i){try{return 1===i.querySelectorAll("[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function nt(t,n){try{return 1===n.querySelectorAll(t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var it;function rt(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return st(r,i);var s=Z(r,t[0],n,i),e=s.elementSelector,u=s.hasUniqueIdentifier;if(!i.fullPath&&u){var h=t[t.length-1];return"".concat(st(h,i)).concat(e)}var o=rt(t,n,i);return"".concat(o?"".concat(o,">"):"").concat(e)}function st(t,n){if(t===N)return"|detached|";if(t.host){var i=T(t.host),r=i.ancestors,s=i.selectionRoot;return"".concat(rt(r,s,n),"|shadow-root|")}return 11===t.nodeType?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return"";if(!n(e))return t.INVALID_ELEMENT;var u=T(e);return rt(u.ancestors,u.selectionRoot,s)},t.getElementPathAndFirstAnchorParent=function(r,s){void 0===s&&(s={fullPath:!1,dynamicIdRegex:null});var e=i(r);if(e===document)return{path:"",firstAnchorParent:null};if(!n(e))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&l(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return R(n)&&csArray.prototype.push.call(i,N),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(e),h=u.firstAnchorParent;return{path:rt(u.ancestors,u.selectionRoot,s),firstAnchorParent:h}}}(it||(it={})),window.CSPathComputation=window.CSPathComputation||it;var et=function(t,n){return et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},et(t,n)};function ut(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}et(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var ht=function(){return ht=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},ht.apply(this,arguments)};function ot(t,n,i,r){var s,e=arguments.length,u=e<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var h=t.length-1;h>=0;h--)(s=t[h])&&(u=(e<3?s(u):e>3?s(n,i,u):s(n,i))||u);return e>3&&u&&Object.defineProperty(n,i,u),u}function ct(t,n,i,r){return new(i||(i=Promise))((function(s,e){function u(t){try{o(r.next(t))}catch(t){e(t)}}function h(t){try{o(r.throw(t))}catch(t){e(t)}}function o(t){var n;t.done?s(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,h)}o((r=r.apply(t,n||[])).next())}))}function ft(t,n){var i,r,s,e,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function h(e){return function(h){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==e[0]&&2!==e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(t,u)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,h])}}}Object.create;function at(t,n,i){if(i||2===arguments.length)for(var r,s=0,e=n.length;s<e;s++)!r&&s in n||(r||(r=Array.prototype.slice.call(n,0,s)),r[s]=n[s]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var vt,lt=function(){function t(t){var n;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||L,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=t.recordingDomain,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=ht({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrorsEnabled=t.customErrorsEnabled,this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.g(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.g(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.g(t.replayRecordingMaskedUrlRegex),this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.useMalkaPipeline=t.useMalkaPipeline,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled}return t.prototype.getTrackerUri=function(){return"".concat(this.A(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.A(),"://").concat(this.useMalkaPipeline&&this.malkaRecordingDomain?this.malkaRecordingDomain:this.recordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.A(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.A(),"://").concat(this.loggerDomain)},t.prototype.A=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var s=r[0],e=r[1];n.S(s,e)}}))},t.prototype.S=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"recordingDomain"===t&&(this.recordingDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n)},t.prototype.g=function(t){return t?this.N(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.N=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t}(),dt=function(){function t(t,n){this.T=t,this.R=n}return t.prototype.init=function(){this.O=this.T.self!==this.T.top,this.R.iframesTracking&&this.O?this.I=!1:this.I=!0},t.prototype.isInIframeContext=function(){return this.O},t.prototype.isTopWindowTracker=function(){return this.I},t}();!function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(vt||(vt={}));var wt=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return ht(ht({},t),n)})):{}},t}(),yt=function(t){function n(n,i){return t.call(this,n,i)||this}return ut(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.L(t);var n=vt.toQuery(t);this.C(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.C=function(t){var n=new window.Image(1,1);n.onload=O,n.onerror=O,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.L=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(wt),pt=function(){function t(t,n){this._=t,this.M=n}return t.prototype.init=function(){this.D=new yt(this._.getLoggerUri()),this.D.setRequestParametersProviders(this,this.M)},t.prototype.send=function(t){this.P=t,this.D.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),mt=/[a-zA-Z0-9._%+-]+(?:@|%40)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,gt=/[a-zA-Z0-9+_-](?:@|%40)/,At="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Et=new RegExp("(ey".concat(At,"\\.ey").concat(At,"\\.").concat(At,")"),"g"),St=function(){function t(){}return t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&gt.test(t)?csString.prototype.replace.call(t,mt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,Et,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),bt="12.5.6";function Nt(){return bt}function Tt(){return{v:bt}}var Rt=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function kt(){return Math.floor(Rt()/1e3)}var Ot,It,xt=function(){function t(t,n){this.U=t,this.j=n}return t.prototype.getRequestParameters=function(){return ht(ht({d:"".concat(Rt()),p:this.j.anonymizeEmail(window.location.href),u:navigator.userAgent},this.U.getRequestParameters()),Tt())},t}(),Lt="snippet-",Ct="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(Ot||(Ot={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(It||(It={}));var _t=function(){function t(t,n,i){var r;this.q=n,this.j=new St,this.F=It[M.warn],this.F=It[t.minLogLevel||M.warn],this.D=i||new pt(t,new xt(t,this.j)),this.H=((r={})[M.debug]=[],r[M.warn]=[],r[M.error]=[],r[M.critical]=[],r),this.V={implementation:{},dynamic:{}},this.D.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=M.warn),this.J(i,n)){csArray.prototype.push.call(this.H[i],n||"");var r={message:this.G(t,n),stacktrace:this.W(t),app:"uxa",level:i};this.D.send(r)}},t.prototype.G=function(t,n){var i=t instanceof Error?this.j.anonymizeEmail(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.W=function(t){return t instanceof Error?"".concat(t.stack||"No stacktrace"," ").concat(this.B()):this.B()},t.prototype.B=function(){var t=this.q.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.q.getSessionService(),r=i&&i.getSession(),s={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(s)},t.prototype.J=function(t,n){if(It[t]<this.F)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Ct,0)))return this.K(n,Ot.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Lt,0)))return this.K(n,Ot.DYNAMIC);var i=this.H[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.K=function(t,n){return t in this.V[n]?!(this.V[n][t]>=5)&&(this.V[n][t]+=1,!0):(this.V[n][t]=1,!0)},t}(),Mt=document.createElement("a");function Dt(t){return Mt.href=t,Mt.href}function Pt(t){if(!I(t,"http://")&&!I(t,"https://"))return"";var n=document.createElement("a");return n.href=t,decodeURIComponent(n.hostname)}function Ut(t,n){return csArray.prototype.some.call(n,(function(n){return x(t,".".concat(n))||t===n||""===n}))}var jt,qt,Ft,Ht,Vt="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(jt||(jt={})),function(t){t.Parent="parent",t.Child="child"}(qt||(qt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback"}(Ft||(Ft={})),function(t){t.buildBaseMessage=function(t,n,i,r){var s={type:t,from:n,pid:i,signature:Vt};return void 0!==r&&r>=0&&(s.id=r),s},t.isMessageValid=function(t,n,i,r){var s=Pt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===Vt&&t.data.from===n&&t.data.pid===i&&Ut(s,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(Ht||(Ht={}));var zt,Jt,Gt,Wt,Bt=function(){function t(t){this.U=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=M.warn);var r={message:t,errorCode:n,level:i},s=Ht.buildBaseMessage(Ft.ChildLogMessage,qt.Child,this.U.projectId);s.content=r,Ht.sendPostMessage(window.parent,"*",s)},t}(),Kt=function(){function t(){}return t.prototype.setContext=function(t,n){this.Y=t,this.X=n},t.prototype.getVisitorService=function(){return this.Y},t.prototype.getSessionService=function(){return this.X},t}();!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,s,e,u,h){var o=encodeURIComponent("".concat(i)),c=s===t.CURRENT_DOMAIN?void 0:s,f=r(e),a=f?";expires=".concat(f.toUTCString()):"",v=H(c)?";domain=".concat(c):"",l="".concat(n,"=").concat(o).concat(a).concat(";path=/").concat(v);return F(u)&&u!==Gt.NotSet&&(l="".concat(l,";SameSite=").concat(u)),F(h)&&h===Wt.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return P(t)?new csDate(Rt()+t):t}function s(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),Gt.None,Wt.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=s,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var e="_cs_root-domain",u=n(e);if(null!==u&&"1"!==u)return u;for(var h=csString.prototype.split.call(window.location.hostname,"."),o=csArray.prototype.pop.call(h);h.length&&(null===u||"1"===u);)i(e,o=csArray.prototype.join.call([csArray.prototype.pop.call(h),o],"."),o,void 0,t,r),u=n(e);return s(e,o),o}}(zt||(zt={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(Jt||(Jt={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(Gt||(Gt={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(Wt||(Wt={}));var Yt=function(){function t(t,n,i){this.U=t,this.$=n,this.Z=i,this.tt=!1,this.nt=Gt.NotSet,this.it=Wt.No}return t.prototype.getSameSiteFlag=function(){return this.nt},t.prototype.getSecureFlag=function(){return this.it},t.prototype.getDomain=function(){return this.st},t.prototype.getRootDomain=function(){return this.et},t.prototype.init=function(){if(!this.U.cookielessTrackingEnabled){var t=this.ut(),n=this.ht();this.tt=this.ot(t,n),this.tt?(this.nt=t,this.it=n):this.U.secureCookiesEnabled&&"https:"===this.$.getUrlProtocol()&&(this.it=Wt.Yes),this.et=this.ft(),this.st=this.at(this.et)}},t.prototype.ot=function(n,i){return!Jt.browserIsSafariV12()&&(zt.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!zt.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(zt.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.ut=function(){return"http:"===this.$.getUrlProtocol()?Gt.Lax:this.Z.isSameSiteNoneSecureNeeded()||this.U.crossDomainTracking?Gt.None:Gt.Lax},t.prototype.ht=function(){return"http:"===this.$.getUrlProtocol()?Wt.No:this.U.secureCookiesEnabled||this.U.crossDomainTracking||this.Z.isSameSiteNoneSecureNeeded()?Wt.Yes:Wt.No},t.prototype.isSameSiteSupported=function(){return this.tt},t.prototype.set=function(t,n,i){var r=zt.toExpireDate(i);zt.set(t,n,this.st,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.st;zt.remove(t,i)},t.prototype.ft=function(){var t=this.Z.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?Gt.None:void 0,i=t?Wt.Yes:void 0;return zt.getRootDomain(n,i)},t.prototype.at=function(t){return this.U.allowSubdomains?t:zt.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),Xt="_cs_t",$t=function(){function t(t,n){this.vt=t,this.U=n,this.lt=!1,this.wt=!1}return t.prototype.init=function(){if(!this.U.cookielessTrackingEnabled&&this.vt.isTopWindowTracker()&&"cookie"in document){if(!this.vt.isInIframeContext()&&zt.isCookiePresent())return this.lt=!0,void(this.wt=!1);if(zt.set(Xt,"1",zt.CURRENT_DOMAIN),null!==zt.get(Xt))return this.lt=!0,this.wt=!1,void zt.remove(Xt,zt.CURRENT_DOMAIN);zt.set(Xt,"1",zt.CURRENT_DOMAIN,void 0,Gt.None,Wt.Yes),null!==zt.get(Xt)&&(this.lt=!0,this.wt=!0,zt.remove(Xt,zt.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.lt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.wt},t}();function Zt(){var t="CSLocalStorageTest";try{return localStorage.setItem(t,t),localStorage.getItem(t)!==t?!1:(localStorage.removeItem(t),!0)}catch(t){return!1}}var Qt=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.yt()},t.yt=function(){try{var t={},n=Object.assign(t,{a:1},{b:2,c:{d:4}}),i={a:1,b:2,c:{d:4}};return csJSON.stringify(n)===csJSON.stringify(i)&&csJSON.stringify(t)===csJSON.stringify(i)}catch(t){return!1}},t}();var tn,nn,rn,sn,en=function(){function t(t,n){this.U=t,this.Z=n}return t.prototype.canTrack=function(){return this.gt()&&this.At()&&this.Et()},t.prototype.canTrackInChild=function(){return this.gt()&&this.At()},t.prototype.Et=function(){return this.U.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}()&&Zt():this.Z.areCookiesEnabled()&&Zt()},t.prototype.At=function(){return this.U.isProjectActive()&&Ut(window.location.hostname,this.U.hostnames)},t.prototype.gt=function(){return!this.St()&&this.bt()&&Qt.check()},t.prototype.St=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.bt=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),un=function(){function t(t,n,i,r,s){this.Y=t,this.X=n,this.Nt=i,this.Tt=r,this.U=s}return t.prototype.get=function(){return{exclusion:this.Nt.getAppliedTrackingDraw(),visitor:this.Y.getVisitor(),session:this.X.getSession(),cvars:this.Tt.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.Nt.exclude(this.U),this.Y.removeVisitor(),this.X.removeSession(),this.Tt.removeCustomVariablesSession()},t.prototype.include=function(t){this.Nt.removeExclusion(),this.Y.setVisitor(t.visitor),t.session?this.X.setSession(t.session):this.X.removeSession(),t.cvars?this.Tt.setCustomVariableSession(t.cvars):this.Tt.removeCustomVariablesSession()},t}(),hn="_cs_id",on=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/,cn=function(){function t(t,n,i,r){this.U=t,this.Rt=n,this.kt=i,this.Ot=r}return t.prototype.get=function(){var n;return(n=this.U.cookielessTrackingEnabled?this.Ot.getItem(hn):this.Rt.get(hn))?t.fromString(n):null},t.prototype.set=function(n){var i=t.toString(n);if(this.U.cookielessTrackingEnabled)this.Ot.setItem(hn,i);else{var r=new csDate(n.expires);this.Rt.set(hn,i,r),this.kt.setCookie(hn,i,r)}},t.prototype.remove=function(){this.U.cookielessTrackingEnabled?this.Ot.removeItem(hn):(this.Rt.delete(hn),this.kt.removeCookie(hn))},t.prototype.handleSubdomainChange=function(){if(!this.U.cookielessTrackingEnabled){var t=this.get();t&&(this.U.allowSubdomains?this.Rt.delete(hn,Yt.CURRENT_DOMAIN):this.Rt.delete(hn,this.Rt.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],s=n[2],e=n[3],u=n[4],h=n[5],o=n[6];return{id:i,creationTimestamp:Number(r),visitsCount:Number(s),hitTimestamp:Number(e),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(h),expires:Number(o)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires],".")},t.isValidVisitorString=function(t){return on.test(t)},t}();!function(t){t.REPLAY_RECORDING_DISABLED="1",t.REPLAY_RECORDING_ENABLED="3",t.TRIGGER_REPLAY_RECORDING_ENABLED="5"}(tn||(tn={})),function(t){t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(nn||(nn={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(rn||(rn={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(sn||(sn={}));var fn,an="_cs_s",vn=18e5,ln=/^(\d+\.[013567T](\.[01])?)(\.\d+)?$/,dn=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(fn||(fn={}));var wn,yn=function(){function t(t,n,i,r){this.U=t,this.Rt=n,this.kt=i,this.Ot=r,this.It=null,this.xt=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.Lt();return t.Ct(i)}var r=this._t(),s=r.sessionString,e=r.status,u=t.Ct(s);if(e!==fn.EXPIRED)return u;if(this.U.cookielessTrackingEnabled)return null;var h=this.Lt();if(!h)return null;var o=csString.prototype.split.call(h,dn);if(!t.Mt(o))return h;var c=o[o.length-1],f=parseInt(c,10);return isNaN(f)||this.Dt(f),u},t.prototype.set=function(t,n){void 0===n&&(n=vn);var i=Rt()+n,r=this.toString(t);r+="".concat(dn).concat(i),this.Pt(r,i),this.U.cookielessTrackingEnabled?this.Ot.setItem(an,r):(this.Rt.set(an,r,n),this.kt.setCookie(an,r,n))},t.prototype.remove=function(){this.U.cookielessTrackingEnabled?this.Ot.removeItem(an):(this.Rt.delete(an),this.kt.removeCookie(an)),this.Ut()},t.prototype.handleSubdomainChange=function(){if(!this.U.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.U.allowSubdomains?this.Rt.delete(an,Yt.CURRENT_DOMAIN):this.Rt.delete(an,this.Rt.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],dn)},t.prototype.Pt=function(t,n){this.It={sessionString:t,expires:n}},t.prototype._t=function(){return this.It?this.It&&Rt()<=this.It.expires?{sessionString:this.It.sessionString,status:fn.FOUND}:{sessionString:this.It.sessionString,status:fn.EXPIRED}:{sessionString:this.Lt(),status:fn.NOT_FOUND}},t.prototype.Ut=function(){this.It=null},t.prototype.Dt=function(t){this.It&&(this.It.expires=t,this.xt=!0)},t.prototype.isCacheRefreshed=function(){return this.xt},t.prototype.resetCacheRefreshed=function(){this.xt=!1},t.prototype.Lt=function(){if(this.U.cookielessTrackingEnabled){var t=this.Ot.getItem(an);return!t||this.jt(t)?null:t}return this.Rt.get(an)},t.prototype.jt=function(t){var n=csString.prototype.split.call(t,dn),i=parseInt(n[n.length-1],10);return!isNaN(i)&&Rt()>i},t.Mt=function(t){return 13===t[t.length-1].length},t.Ct=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,ln))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.Ct(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n=csString.prototype.split.call(t,dn),i=n[0],r=n[1],s=n[2];return{recordingState:r,etrState:null!=s?s:rn.ETR_OFF,pageNumber:parseInt(i,10)}},t.isValidSessionString=function(t){return ln.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?cn.fromString(t._cs_id):null,session:t._cs_s?yn.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(wn||(wn={}));var pn,mn="_cs_ex",gn=2592e6,An=/^[0-9]+$/,En=function(){function t(t,n,i,r){this.U=t,this.Rt=n,this.kt=i,this.Ot=r}return t.prototype.get=function(){return this.U.cookielessTrackingEnabled?Number(this.Ot.getItem(mn)):Number(this.Rt.get(mn))},t.prototype.set=function(t){this.U.cookielessTrackingEnabled?this.Ot.setItem(mn,t):(this.Rt.set(mn,t,gn),this.kt.setCookie(mn,t,gn))},t.prototype.remove=function(){this.U.cookielessTrackingEnabled?this.Ot.removeItem(mn):(this.Rt.delete(mn),this.kt.removeCookie(mn))},t.isValidExclusionString=function(t){return An.test(t)},t}(),Sn="_cs_cvars",bn=function(){function t(t,n,i,r){this.U=t,this.Rt=n,this.kt=i,this.Ot=r}return t.prototype.get=function(){return this.U.cookielessTrackingEnabled?this.Ot.getItem(Sn):this.Rt.get(Sn)},t.prototype.set=function(t){this.U.cookielessTrackingEnabled?this.Ot.setItem(Sn,t):(this.Rt.set(Sn,t),this.kt.setCookie(Sn,t))},t.prototype.remove=function(){this.U.cookielessTrackingEnabled?this.Ot.removeItem(Sn):(this.Rt.delete(Sn),this.kt.removeCookie(Sn))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function n(t){var n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(n,t)>=0}))}t.isRawDomainState=n,t.isValid=function(t){return!!n(t)&&((!t._cs_id||cn.isValidVisitorString(t._cs_id))&&(!t._cs_s||yn.isValidSessionString(t._cs_s))&&(!t._cs_ex||En.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||bn.isValidCustomVarString(t._cs_cvars)))}}(pn||(pn={}));var Nn,Tn=function(){function t(t,n){this.qt=t,this.Ft=n}return t.prototype.retrieve=function(n,i){var r=this;this.Ht=i,this.retrievedStates=[],this.Vt=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return r.zt(t)})),t.getXdframeOrigin),this.qt.onMessage((function(t){r.Jt(t)})),this.qt.onTimeout((function(){r.Gt()})),this.qt.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Vt,t.getXdframeUrl),(function(t){return r.qt.open(t)}))},t.prototype.Jt=function(t){if(this.Wt(t)){var n=t.data;if(!pn.isValid(n))throw this.qt.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,n)}this.Bt()&&(this.qt.stop(),this.Ht(csArray.prototype.map.call(this.retrievedStates,wn.fromRaw)))},t.prototype.Gt=function(){J.warn("xdframe: all messages not received")},t.prototype.Wt=function(t){return csArray.prototype.indexOf.call(this.Vt,t.origin)>-1},t.prototype.Bt=function(){return this.retrievedStates.length===this.Vt.length},t.prototype.zt=function(t){return!x(this.Ft.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),Rn=function(){function t(){var t=this;this.Kt=3e3,this.Yt=function(n){t.handleMessage(n)}}return t.prototype.onMessage=function(t){this.Xt=t},t.prototype.onTimeout=function(t){this.$t=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.Yt),this.Zt=window.setTimeout((function(){t.$t()}),this.Kt)},t.prototype.open=function(t){var n=document.createElement("iframe");return n.src=t,n.setAttribute("hidden",""),n.setAttribute("title","Intentionally blank"),document.body.appendChild(n),n},t.prototype.stop=function(){window.removeEventListener("message",this.Yt),window.clearTimeout(this.Zt),this.Xt=O,this.$t=O},t.prototype.handleMessage=function(t){this.Xt(t)},ot([G("XdframeMessage")],t.prototype,"handleMessage",null),t}(),kn=function(){function t(){this.Qt=new XMLHttpRequest}return t.prototype.send=function(t){var n=this,i=t.path,r=t.domainUri,s=t.query,e=t.headers,u=t.method,h=t.body,o=t.onLoadCallback,c=t.onErrorCallback,f=t.timeout,a=t.onTimeoutCallback,v=r;if(i&&(v=csString.prototype.concat.call(v,"/",i)),s&&(v=csString.prototype.concat.call(v,"?",s)),this.Qt.open(u,v,!0),e)for(var l=0,d=e;l<d.length;l++){var w=d[l];this.Qt.setRequestHeader(w.name,w.value)}o&&(this.Qt.onload=function(){var t={responseText:n.Qt.responseText,status:n.Qt.status};o(t)}),c&&(this.Qt.onerror=function(){c()}),f&&a&&(this.Qt.timeout=f,this.Qt.ontimeout=function(){a()}),this.Qt.send(h)},t.prototype.abort=function(){this.Qt.abort()},t}(),On=function(){function t(){}return t.prototype.send=function(t){return ct(this,void 0,void 0,(function(){var n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S=this;return ft(this,(function(b){switch(b.label){case 0:if(n=t.path,i=t.domainUri,r=t.query,s=t.headers,e=t.method,u=t.body,h=t.onLoadCallback,o=t.onErrorCallback,c=t.timeout,f=t.onTimeoutCallback,this.tn=new AbortController,a={method:e},v={hasTimedOut:!1},c&&(l=window.setTimeout((function(){S.nn(v)}),c),a.signal=this.tn.signal),s){for(d={},w=0,y=s;w<y.length;w++)p=y[w],d[p.name]=p.value;a.headers=d}u&&(a.body=u),m=i,n&&(m=csString.prototype.concat.call(m,"/",n)),r&&(m=csString.prototype.concat.call(m,"?",r)),b.label=1;case 1:return b.trys.push([1,5,,6]),[4,csFetch(m,a)];case 2:return g=b.sent(),l&&window.clearTimeout(l),h?[4,g.text()]:[3,4];case 3:A=b.sent(),E={responseText:A,status:g.status},h(E),b.label=4;case 4:return[3,6];case 5:return b.sent(),l&&window.clearTimeout(l),v.hasTimedOut&&f?f():!this.tn.signal.aborted&&o&&o(),[3,6];case 6:return[2]}}))}))},t.prototype.abort=function(){this.tn&&this.tn.abort()},t.prototype.nn=function(t){this.tn.abort(),t.hasTimedOut=!0},t}(),In=function(){function t(){this.rn()?this.en=new On:this.en=new kn}return t.prototype.send=function(t){this.en.send(t)},t.prototype.abort=function(){this.en.abort()},t.prototype.rn=function(){return"function"==typeof window.csFetch&&!!window.AbortController},t}();function xn(t){for(var n=new Uint8Array(t),i="",r=0;r<n.byteLength;r+=1)i+=csString.fromCodePoint(n[r]);return i}function Ln(t){return function(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,s=t.length;r<s;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}(self.atob(t))}!function(t){t.UNCOMPRESSED="0",t.LZSTRING="1",t.GZIP="2"}(Nn||(Nn={}));var Cn,_n,Mn,Dn=function(t){this.onError=t},Pn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=Nn.UNCOMPRESSED,n}return ut(n,t),n.prototype.isSupported=function(){return!0},n.prototype.compress=function(t,n,i){if("base64"===t)return"string"!=typeof n&&(n=xn(n)),i(n);i(n)},n.prototype.compressSync=function(t){return t},n}(Dn),Un=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.un=[],r.hn=[],r.cn=0,r.fn=new In,r}return ut(n,t),n.prototype.setCompressionOptions=function(t,n){this.an=t,this.vn=n},n.prototype.setRequestPayloadProvider=function(t){this.ln=t},n.prototype.setRequestHeader=function(t){csArray.prototype.push.call(this.hn,t)},n.prototype.afterProvidersCalled=function(t){csArray.prototype.push.call(this.un,t)},n.prototype.onLoad=function(t){this.dn=t},n.prototype.onError=function(t){this.wn=t},n.prototype.onTimeout=function(t,n){this.cn=t,this.$t=n},n.prototype.send=function(t){var n=this;void 0===t&&(t=!0),csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var i=this.retrieveParameters(),r=this.yn();csArray.prototype.forEach.call(this.un,(function(t){return t()})),t&&this.an&&this.vn&&"string"==typeof r?this.an.compress(this.vn,r,(function(t){n.doSend(i,t)})):this.doSend(i,r)},n.prototype.abort=function(){this.fn.abort()},n.prototype.getCompressionOutputType=function(){return this.vn},n.prototype.yn=function(){return this.ln?this.ln.getRequestPayload():""},n.prototype.doSend=function(t,n){var i,r,s,e=this,u=null!==(s=null!==(i=t.ct)&&void 0!==i?i:null===(r=this.an)||void 0===r?void 0:r.algorithm)&&void 0!==s?s:Nn.UNCOMPRESSED;t=ht(ht({},t),{ct:u});var h=vt.toQuery(t);this.fn.send({method:"POST",domainUri:this.domainUri,path:this.path,headers:this.hn,query:h,body:n,onLoadCallback:this.dn,onErrorCallback:function(){e.wn&&e.wn(t,n)},timeout:this.cn,onTimeoutCallback:this.$t}),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(n){return n(t)}))},ot([G("POST request")],n.prototype,"doSend",null),n}(wt);!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.CONSENT_GRANTED=14]="CONSENT_GRANTED",t[t.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE"}(Cn||(Cn={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(_n||(_n={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(Mn||(Mn={}));var jn,qn;function Fn(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,t.listener,n)}function Hn(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(jn||(jn={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(qn||(qn={}));var Vn=function(){function t(){}return t.isEmpty=function(){return 0===t.mn.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,at([t.mn],n,!1))},t.getAll=function(){return t.mn},t.clear=function(){t.mn=[]},t.mn=[],t}(),zn=50;var Jn=!1;var Gn=[],Wn=[];function Bn(t){csArray.prototype.push.call(Gn,t),performance.mark("".concat(t,"-start"))}function Kn(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;csArray.prototype.push.call(Wn,{mName:t,mDuration:i.toFixed(2)}),csArray.prototype.pop.call(Gn),0===Gn.length&&(i>zn&&Vn.add(Wn),Wn=[])}}function Yn(t){performance.mark("".concat(t,"-start"))}function Xn(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>zn&&Vn.add([{mName:t,mDuration:i.toFixed(2)}])}}var $n=function(t){return function(n,i,r){var s=r.value;r.value=function(){if(!Jn)return r.value=s,s.apply(this,arguments);Bn(t);var n=s.apply(this,arguments);return Kn(t),n}}};function Zn(t){var n=csEventtarget.apply(t);return n&&a(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function Qn(t){return Math.round(10*t)/10}function ti(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var s=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=Rt();if(e-s>r)return s=e,t.apply(this,n)}}var e,u=[],h=null,o=0,c=function(){o=Rt(),h=null,e=t.apply(i,u)},f=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var f=Rt(),a=r-(f-o);return i=null!=this?this:window,u=at([],n,!0),a<=0||a>r?(o=f,e=t.apply(i,u),h?(window.clearTimeout(h),h=null):u=[]):h||(h=window.setTimeout(c,a)),e};return f.cancel=function(){h&&(window.clearTimeout(h),o=0,h=null,u=[])},f.flushPending=function(){h&&(window.clearTimeout(h),c())},f}function ni(){return function(t,n,i){var r=i.value;i.value=function(t){!1===(null==t?void 0:t.isTrusted)&&ni.enabled||r.call(this,t)}}}ni.enabled=!0;var ii=function(){function t(n,i,r,s){var e=this;this.gn=n,this.An=i,this.En=r,this.Sn=s,this.bn=new Set,this.Nn=[],this.Tn=[{type:"pointerup",listener:function(t){return e.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return e.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return e.pointerDownListener(t)},boundElement:document}],this.Rn=[{type:"touchstart",listener:function(t){return e.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return e.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return e.touchEndListener(t)},boundElement:document}],this.kn=[{type:"click",listener:function(t){return e.clickListener(t)},boundElement:document},{type:"keyup",listener:this.gn.on(t.On,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.gn.on(t.In,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return e.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return e.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return e.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return e.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return e.pasteListener(t)},boundElement:document},{type:"change",listener:this.gn.on(t.xn,(function(t){return e.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.gn.on("select",(function(t){return e.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.gn.on(t.In,(function(t){return e.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)},boundElement:document}],this.Ln=[{type:"change",listener:this.gn.on(t.xn,(function(t){return e.inputCheckableListener(t)}))},{type:"change",listener:this.gn.on("select",(function(t){return e.inputSelectListener(t)}))},{type:"change",listener:this.gn.on(t.In,(function(t){return e.inputTextListener(t)}))},{type:"scroll",listener:function(t){return e.scrollListener(csEventtarget.apply(t))}},{type:"mouseover",listener:function(t){return e.mouseOverListener(t)}}]}var n;return t.prototype.init=function(){this.Cn(),this._n(),this.Mn(),this.Dn(),this.Sn.onInputNodeToEncrypt(this.Pn.bind(this))},t.prototype.Dn=function(){var t=this;this.An.onDocumentIdentified((function(n){t.Un(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Nn,t)},t.prototype.Pn=function(t){csArray.prototype.forEach.call(this.Nn,(function(n){return n(t)}))},t.prototype.start=function(){this.jn()},t.prototype.stop=function(){this.qn()},t.prototype._n=function(){var t;this.Fn()&&(t=csArray.prototype.push).call.apply(t,at([this.kn],this.Tn,!1))},t.prototype.Cn=function(){var t;this.Hn()&&(t=csArray.prototype.push).call.apply(t,at([this.kn],this.Rn,!1))},t.prototype.Un=function(t){E(t)?csArray.prototype.forEach.call(this.kn,(function(t){return Fn(t)})):this.bn.has(t)||(this.bn.add(t),csArray.prototype.forEach.call(this.Ln,(function(n){var i=n;i.boundElement=t,Fn(i)})))},t.prototype.Vn=function(t){E(t)?csArray.prototype.forEach.call(this.kn,(function(t){return Hn(t)})):(this.bn.delete(t),csArray.prototype.forEach.call(this.Ln,(function(n){var i=n;i.boundElement=t,Hn(i)})))},t.prototype.Fn=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.Hn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.qn=function(){var t=this;this.Vn(document),this.bn.forEach((function(n){return t.Vn(n)}))},t.prototype.jn=function(){this.zn(t.On),this.Jn(),this.Gn(),this.Wn(),this.zn(t.In)},t.prototype.zn=function(t){for(var n,i=document.querySelectorAll(t),r=0;r<i.length;r+=1){var s=i.item(r);(null===(n=s.value)||void 0===n?void 0:n.length)>0&&this.Bn(s)}},t.prototype.Jn=function(){var t=window.pageYOffset,n=window.pageXOffset;if(0!==t||0!==n){var i=this.An.getId(document);if(!i)return void J.warn("scrollListener: document without identifier");var r={type:Cn.SCROLL,args:[i,n,t],date:Rt()};this.Pn(r)}},t.prototype.Gn=function(){for(var t=document.getElementsByTagName("select"),n=0;n<t.length;n+=1)this.Kn(t[n])},t.prototype.Wn=function(){for(var n=document.querySelectorAll(t.xn),i=0;i<n.length;i+=1)this.Yn(n[i])},t.prototype.Xn=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!a(t)||!this.En.isSensitive(t)&&!this.En.isSensitiveChild(t)){var n=this.An.getId(t);if(n){var i=this.Xn(t),r={type:Cn.SCROLL,args:[n,i.left,i.top],date:Rt()};this.Pn(r)}else J.warn("scrollListener: node without identifier")}},t.prototype.mouseOverListener=function(t){if(!a(t.target)||!this.En.isSensitiveChild(t.target)){var n=this.An.getId(t.target);if(n){var i={type:Cn.MOUSE_OVER,args:[n],date:Rt()};this.Pn(i)}else J.warn("mouseOverListener: node without identifier")}},t.prototype.clickListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r={type:Cn.CLICK,args:[i],date:Rt()};this.Pn(r)}else J.warn("clickListener: node without identifier")}},t.prototype.inputCheckableListener=function(t){var n=Zn(t);this.Yn(n)},t.prototype.Yn=function(t){if(!this.En.isSensitive(t)&&!this.En.isSensitiveChild(t)){var n=this.An.getId(t);if(n){var i={type:Cn.INPUT_CHECKABLE,args:[n,t.checked],date:Rt()};this.Pn(i)}else J.warn("inputCheckableListener: node without identifier")}},t.prototype.inputSelectListener=function(t){var n=Zn(t);this.Kn(n)},t.prototype.Kn=function(t){if(!this.En.isSensitive(t)&&!this.En.isSensitiveChild(t)){var n=this.An.getId(t);if(n){var i={type:Cn.INPUT_SELECT,args:[n,t.selectedIndex],date:Rt()};this.Pn(i)}else J.warn("inputSelectListener: node without identifier")}},t.prototype.inputTextListener=function(t){var n=Zn(t);this.Bn(n)},t.prototype.Bn=function(t){var n;if(!this.En.isSensitive(t)&&!this.En.isSensitiveChild(t)){var i=this.An.getId(t);if(i){var r=null!==(n=t.value)&&void 0!==n?n:"";if(this.Sn.shouldEncrypt(t))this.Sn.registerInputNodeToEncrypt({targetId:i,targetValue:r,date:Rt()});else{var s="number"===t.type?"0":"",e={type:Cn.INPUT_TEXT,args:[i,csString.prototype.replace.call(r,/\S/g,s)],date:Rt()};this.Pn(e)}}else J.warn("inputTextListener: node without identifier")}},t.prototype.keyUpListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r=this.$n[t.key];if(void 0!==r){var s={type:Cn.KEY_UP,args:[i,r],date:Rt()};this.Pn(s)}}else J.warn("keyUpListener: node without identifier")}},t.prototype.keyDownListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r=this.$n[t.key];if(void 0!==r){var s={type:Cn.KEY_DOWN,args:[i,r],date:Rt()};this.Pn(s)}}else J.warn("keyDownListener: node without identifier")}},t.prototype.copyListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r={type:Cn.CLIPBOARD_COMMAND,args:[i,qn.COPY],date:Rt()};this.Pn(r)}else J.warn("copyListener: node without identifier")}},t.prototype.cutListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r={type:Cn.CLIPBOARD_COMMAND,args:[i,qn.CUT],date:Rt()};this.Pn(r)}else J.warn("cutListener: node without identifier")}},t.prototype.pasteListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r={type:Cn.CLIPBOARD_COMMAND,args:[i,qn.PASTE],date:Rt()};this.Pn(r)}else J.warn("pasteListener: node without identifier")}},t.prototype.pointerUpListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r={type:Cn.POINTER_UP,args:[t.pointerId,t.pointerType,Qn(t.clientX),Qn(t.clientY),i,t.button],date:Rt()};this.Pn(r)}else J.warn("pointerup: node without identifier")}},t.prototype.pointerMoveListener=function(t){var n={type:Cn.POINTER_MOVE,args:[t.pointerId,t.pointerType,Qn(t.clientX),Qn(t.clientY)],date:Rt()};this.Pn(n)},t.prototype.pointerDownListener=function(t){var n=Zn(t);if(!a(n)||!this.En.isSensitiveChild(n)){var i=this.An.getId(n);if(i){var r={type:Cn.POINTER_DOWN,args:[t.pointerId,t.pointerType,Qn(t.clientX),Qn(t.clientY),i,t.button,{pageX:Qn(t.pageX),pageY:Qn(t.pageY)}],date:Rt()};this.Pn(r)}else J.warn("pointerdown: node without identifier")}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Cn.TOUCH_START,args:[r.identifier,Qn(r.clientX),Qn(r.clientY)],date:Rt()};this.Pn(s)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Cn.TOUCH_MOVE,args:[r.identifier,Qn(r.clientX),Qn(r.clientY)],date:Rt()};this.Pn(s)}},t.prototype.touchEndListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],s={type:Cn.TOUCH_END,args:[r.identifier,Qn(r.clientX),Qn(r.clientY)],date:Rt()};this.Pn(s)}},t.prototype.Mn=function(){this.$n={},this.$n[" "]=jn.SPACE,this.$n.Spacebar=jn.SPACE,this.$n.Backspace=jn.BACKSPACE,this.$n.Enter=jn.ENTER,this.$n.Delete=jn.DELETE,this.$n.ArrowUp=jn.ARROWUP,this.$n.ArrowDown=jn.ARROWDOWN,this.$n.ArrowLeft=jn.ARROWLEFT,this.$n.ArrowRight=jn.ARROWRIGHT,this.$n.Up=jn.ARROWUP,this.$n.Down=jn.ARROWDOWN,this.$n.Left=jn.ARROWLEFT,this.$n.Right=jn.ARROWRIGHT,this.$n.CapsLock=jn.CAPSLOCK,this.$n.Shift=jn.SHIFT,this.$n.Tab=jn.TAB,this.$n.Escape=jn.ESCAPE,this.$n.Esc=jn.ESCAPE,this.$n.End=jn.END,this.$n.Alt=jn.ALT,this.$n.Control=jn.CTRL,this.$n.Meta=jn.META},t.On=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.xn=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.In='input[type="number"]',ot([$n("RecordingPageEvents.start")],t.prototype,"start",null),ot([G("scroll")],t.prototype,"scrollListener",null),ot([G("mouseOver"),ni(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(Zn(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),ot([G("click"),ni()],t.prototype,"clickListener",null),ot([G("checkable")],t.prototype,"inputCheckableListener",null),ot([G("select")],t.prototype,"inputSelectListener",null),ot([G("text")],t.prototype,"inputTextListener",null),ot([G("Event handler type: keyup")],t.prototype,"keyUpListener",null),ot([G("Event handler type: keydown")],t.prototype,"keyDownListener",null),ot([G("Event handler type: copy")],t.prototype,"copyListener",null),ot([G("Event handler type: cut")],t.prototype,"cutListener",null),ot([G("Event handler type: paste")],t.prototype,"pasteListener",null),ot([G("Event handler type: pointerup"),ni()],t.prototype,"pointerUpListener",null),ot([G("Event handler type: pointermove"),ni(),(n={wait:33,ignoreThrottledCalls:!0},function(t,i,r){r.value=ti(r.value,n)})],t.prototype,"pointerMoveListener",null),ot([G("Event handler type: pointerdown"),ni()],t.prototype,"pointerDownListener",null),ot([G("Event handler type: touchstart"),ni()],t.prototype,"touchStartListener",null),ot([G("Event handler type: touchmove"),ni()],t.prototype,"touchMoveListener",null),ot([G("Event handler type: touchend"),ni()],t.prototype,"touchEndListener",null),t}();function ri(t){for(var n=t.length,i=new csArray(n),r=0;r<n;r+=1)i[r]=t[r];return i}function si(t,n){for(var i=t.length,r=0;r<i;r++)n(t[r],r)}function ei(t,n){for(var i=t.length,r=[],s=0;s<i;s+=1){var e=t[s];n(e)&&csArray.prototype.push.call(r,e)}return r}var ui,hi,oi,ci,fi=function(){function t(t,n,i,r,s,e,u){void 0===u&&(u=document);var h=this;this.Zn=t,this.Qn=n,this.ti=i,this.ni=r,this.An=s,this.En=e,this.ii=u,this.si=!1,this.ei=function(t){h.ni.emitInitialDomDone(t)},this.Qn.onCharacterDataMutation((function(t){h.ui(t)})),this.Qn.onAttributesMutation((function(t){w(t.target)&&h.En.isSensitive(t.target)&&"src"===t.attributeName&&(h.En.unidentifySensitiveNodes(t.target),h.En.identifySensitiveNodes(t.target)),h.hi(t)})),this.Qn.onChildListMutation((function(t,n){si(t.removedNodes,(function(t){h.En.unidentifySensitiveNodes(t)})),si(t.addedNodes,(function(t){h.En.identifySensitiveNodes(t),h.An.identifyNodes(t,n)})),h.oi(t,n)})),this.Qn.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(h.En.identifySensitiveNodes(t.target),h.An.identifyNodes(csElementshadowRoot.apply(t.target)),h.ci(t))}))}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.isStarted=function(){return this.si},t.prototype.start=function(){this.isStarted()||(this.si=!0,this.Qn.start(),this.ai())},t.prototype.stop=function(){this.isStarted()&&(this.si=!1,this.En.unidentifySensitiveNodes(this.ii),this.Qn.stop())},t.prototype.flushEvents=function(){this.Qn.flushPendingMutations()},t.prototype.ai=function(){this.ni.emitInitialDomStart(),this.En.identifySensitiveNodes(this.ii),this.An.identifyNodes(this.ii),this.Zn.serializeInitialDom(this.ii,this.ei)},t.prototype.ci=function(t){if(!this.En.isSensitive(t.target)&&!this.En.isSensitiveChild(t.target)){var n=this.Zn.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:Cn.ATTACH_SHADOW};this.fi(i)}}},t.prototype.hi=function(t){if(!a(t.target)||!this.En.isSensitiveChild(t.target)&&!this.En.isSensitiveAttribute(t.target,t.attributeName)){var n=this.Zn.serializeMutationAttribute(t);if(n){var i={args:n,date:t.date,type:Cn.MUTATION_ATTRIBUTE};this.fi(i),this.ti.scanAttribute(t.target,t.attributeName)}}},t.prototype.ui=function(t){var n=t.target.parentElement;if(!n||!this.En.isSensitive(n)&&!this.En.isSensitiveChild(n)){var i=this.Zn.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:Cn.MUTATION_CHARACTER_DATA};this.fi(r),this.ti.scanText(t.target)}}},t.prototype.oi=function(t,n){var i=this;if(!a(t.target)&&!A(t.target)||!this.En.isSensitive(t.target)&&!this.En.isSensitiveChild(t.target)){var r=this.Zn.serializeMutationChildList(t,n);if(r){var s=r.removedNodes,e=r.addedNodes;csArray.prototype.forEach.call(s,(function(n){var r={args:n,date:t.date,type:Cn.MUTATION_REMOVE};i.fi(r)})),csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:Cn.MUTATION_INSERT};i.fi(r)}))}}},t}(),ai=function(){function t(t){this.vi=t,this.li=0}return t.prototype.addString=function(t){this.li+=2*t.length},t.prototype.addArrayBuffer=function(t){this.li+=t.byteLength},t.prototype.isThresholdReached=function(){return this.li>this.vi},t.prototype.reset=function(){this.li=0},t}(),vi=function(){function t(t,n,i){void 0===t&&(t=[]),void 0===n&&(n={}),void 0===i&&(i=512e3),this.wi=t,this.yi=n,this.pi=new ai(i)}return t.prototype.addEvent=function(t){this.pi.addString(D(t)),csArray.prototype.push.call(this.wi,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.wi.length;n+=1){if(this.wi[n].date>t.date)return this.pi.addString(D(t)),void csArray.prototype.splice.call(this.wi,n,0,t)}this.addEvent(t)},t.prototype.eventsCount=function(){return this.wi.length},t.prototype.clearEvents=function(){this.pi.reset(),this.wi=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.pi.isThresholdReached()},t.prototype.setRequestParametersFromProvider=function(t){var n=t.getRequestParameters();for(var i in n)n.hasOwnProperty(i)&&(this.yi[i]=n[i])},t.prototype.removeRequestParameter=function(t){this.yi.hasOwnProperty(t)&&delete this.yi[t]},t.prototype.getEvents=function(){return this.wi},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.wi,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.wi=r,i},t.prototype.getRequestPayload=function(){return D(this.wi)},t.prototype.getRequestParameters=function(){var t=ht({},this.yi);return this.wi.length>0&&(t.let=this.wi[this.wi.length-1].date.toString()),t},t}(),li=function(){function t(){this.mi=1}return t.prototype.getCurrentIndex=function(){return this.mi},t.prototype.increment=function(){this.mi+=1},t.prototype.reset=function(){this.mi=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.mi)}},t}(),di=function(){function t(){}return t.prototype.emit=function(n,i){var r="".concat(t.gi,".").concat(n),s=t.createEvent(r,{detail:i});null!==s&&document.dispatchEvent(s)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.Ai();if(null===i)return null;var r=n.bubbles,s=void 0!==r&&r,e=n.cancelable,u=void 0!==e&&e,h=n.detail;return i.initCustomEvent(t,s,u,h),i},t.Ai=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.gi="cs.tracking",t}(),wi=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}(),yi=function(t){function n(n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b){var N=t.call(this)||this;return N.U=n,N.Ei=i,N.Si=r,N.yi=s,N.bi=e,N.Ni=u,N.Ti=h,N.Ri=o,N.ki=c,N.Oi=f,N.Ii=a,N.X=v,N.ti=l,N.xi=d,N.Li=w,N.Ci=y,N._i=p,N.Mi=m,N.Di=g,N.Sn=A,N.Pi=E,N.Ui=S,N.ji=b,N.qi=0,N.Fi=0,N.Hi=0,N.Vi=new di,N.zi={allowFromQuotaService:!0,allowFromSerialization:!0},N.Ji=ti((function(){N.pushEvents()}),2e3),N.Gi=function(t){return N.processBrowserEvent(t)},N.Wi=function(t){return N.Bi(t)},N}return ut(n,t),n.prototype.init=function(){this.Ki(),this.Yi()},n.prototype.Ki=function(){var t=this;this.Ei.setRequestPayloadProvider(this.Si),this.Ei.setRequestParametersProviders(this.Si),this.Ei.afterProvidersCalled((function(){t.Pi.addBatchInProgress("".concat(t.bi.getCurrentIndex()),t.Si.getRequestParameters(),t.Si.getEvents()),t.Si.clearEvents(),t.bi.increment(),t.Si.setRequestParametersFromProvider(t.yi)})),this.Ei.after((function(n){"ri"in n&&t.Pi.removeBatchInProgress(n.ri)})),this.Ei.onError((function(n,i){t.Pi.saveFailedRecordingEvents(n,i)})),this.Ei.onLoad((function(n){n.status>=200&&n.status<=299?t.Pi.recover():J.warn("recording request failed:".concat(n.status))}))},n.prototype.Yi=function(){var t=this;this.Ni.onEvent(this.Gi),this.Ti.onEvent(this.Gi),this.ki.onEvent(this.Gi),this.Ri.onEvent(this.Wi),this.ti.onEvent(this.Gi),this.xi.onEvent(this.Gi),this.Mi.onEvent(this.Gi),this.Oi.onEvent(this.Wi),this.Sn.onTextNodeToEncrypt(this.Gi),this.Sn.onApiErrorToEncrypt((function(n){t.Xi(n)})),this.ji.onEvent(this.Gi),this.Sn.onUserIdentifierToEncrypt(this.Gi),this.Ui.onEvent(this.Gi)},n.prototype.isRecording=function(){return this.X.hasValidSession()&&this.isStarted},n.prototype.isMutationTrackerStarted=function(){return this.Ti.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.zi.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.zi.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.zi.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.zi.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.zi.allowFromQuotaService&&this.zi.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.$i(t)},n.prototype.onIframeDetailedApiError=function(t){this.Zi(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Bi(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.X.hasValidSession()&&this.Qi(t)},n.prototype.Bi=function(t){this.Ii.isSessionValid()&&this.Qi(t)},n.prototype.Qi=function(t){this.Si.addEvent(t),this.Si.isThresholdReached()?this.pushEvents():this.Si.isFull()&&this.Ji(),this.U.emitDebugEvents&&this.Vi.emit("recordingEvent",ht(ht({},t),{typeName:Cn[t.type]}))},n.prototype.onStart=function(){var t=this;this.initStates(),this.Si.setRequestParametersFromProvider({getRequestParameters:function(){return{rst:Rt().toString()}}}),this.Ui.start(),this.Mi.start(),this.xi.start(),this.Ti.start(),this.Ni.start(),this.ki.start(),this.Oi.start(),this.ji.start(),this.U.jsErrorsEnabled&&this.Li.subscribe(n.tr,(function(n){return t.$i(n)})),this.U.apiErrors.enabled&&this._i.subscribe(n.tr,(function(n){return t.Zi(n)}),{detailedEvent:!0}),this.U.emitDebugEvents&&this.Vi.emit("replayRecordingStarted")},n.prototype.onStop=function(){this.Ni.stop(),this.Ti.stop(),this.ki.stop(),this.Ri.stop(),this.Li.unsubscribe(n.tr),this._i.unsubscribe(n.tr),this.Mi.stop(),this.Oi.stop(),this.Ui.stop(),this.ji.stop()},n.prototype.clearStates=function(){this.Ti.flushEvents(),this.Ji.cancel(),this.pushEvents(),this.nr()},n.prototype.initStates=function(){this.bi.reset(),this.Si.setRequestParametersFromProvider(this.yi),this.qi=0,this.Fi=0,this.Hi=0},n.prototype.pushEvents=function(){this.Mi.flushEvents(),this.Si.eventsCount()>0&&this.canSendEvents()&&(this.isStarted?this.Ei.send():this.Si.clearEvents())},n.prototype.addInitialDom=function(t){this.Si.addEventByTimestamp(t)},n.prototype.Zi=function(t){t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody?this.Sn.registerApiErrorToEncrypt(t):this.Xi(t)},n.prototype.Xi=function(t){if(this.Fi<n.ir){var i={type:Cn.API_ERROR,date:Rt(),args:[this.Di.anonymize(t)]};this.Gi(i),this.Fi=this.Fi+1}},n.prototype.$i=function(t){if(this.qi<n.rr){var i={type:Cn.JAVASCRIPT_ERROR,date:Rt(),args:[this.Ci.anonymize(t)]};this.Gi(i),this.qi=this.qi+1}},n.prototype.er=function(t){if(this.Hi<n.ur){var i={type:Cn.CUSTOM_ERROR,date:Rt(),args:[t]};this.Gi(i),this.Hi=this.Hi+1}},n.prototype.hr=function(t){this.isStarted&&(t===sn.ETR_SESSION?this.Si.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[n.cr]=n.ar,t}}):t===sn.ETR_PAGE&&this.Si.setRequestParametersFromProvider({getRequestParameters:function(){var t;return(t={})[n.vr]=n.ar,t}}))},n.prototype.nr=function(){this.Si.removeRequestParameter(n.vr),this.Si.removeRequestParameter(n.cr)},n.prototype.clearEvents=function(){this.Si.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.$i(t)},n.prototype.onCustomErrorEvent=function(t){this.er(t)},n.prototype.onPageEvent=function(t){this.lr(t)},n.prototype.onUserIdentifierEvent=function(t){var n={userIdentifier:t,date:Rt(),keyId:this.U.encryptionPublicKeyId};this.Sn.registerUserIdentifierToEncrypt(n)},n.prototype.onEventTriggerRecording=function(t,n){this.hr(n),this.lr(t),this.pushEvents()},n.prototype.lr=function(t){var i={type:Cn.PAGE_EVENT,date:Rt(),args:[{eventName:csString.prototype.slice.call(t,0,n.wr)}]};this.Si.addEvent(i)},n.prototype.triggerConsentGranted=function(){var t={date:Rt(),type:Cn.CONSENT_GRANTED};this.Si.addEvent(t)},n.prototype.triggerConsentWithdrawn=function(){var t={date:Rt(),type:Cn.CONSENT_WITHDRAWN};this.Si.addEvent(t)},n.tr="RecordingService",n.wr=255,n.rr=20,n.ir=20,n.ur=20,n.vr="etrp",n.cr="etrs",n.ar="1",ot([$n("addInitialDom")],n.prototype,"addInitialDom",null),n}(wi),pi=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.yr=n,u.Si=i,u.pr=r,u.U=s,u.mr=e,u.gr={},u.Ar=!1,u.Er=function(t){if(0!==t.length)for(var n=function(t){var n=t.metadata,i=t.events,r=n.datatype;if(!u.Sr(n.rt))return"continue";u.yr.setRequestPayloadProvider({getRequestPayload:function(){return i}}),delete n.datatype,u.yr.setRequestParametersProviders({getRequestParameters:function(){return n}});var s="json"===r;u.yr.send(s)},i=0,r=t;i<r.length;i++){n(r[i])}},u.br=function(){try{if(!u.Ar)return;u.Nr();var t=u.Si.getRequestParameters();if(!u.Sr(t.rt))return;if(u.sendLastMessageBeacon(),0===u.Si.eventsCount())return;u.U.useMalkaPipeline&&(t.hlm="true"),u.pr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri,".last"),metadata:ht(ht({},t),{datatype:"json"}),events:u.Si.getRequestPayload()})}catch(t){}},u.Ki(),u.Tr=u.yr.getCompressionOutputType(),u}return ut(n,t),n.prototype.Ki=function(){var t=this;this.yr.onLoad((function(n){n.status>=200&&n.status<=299?t.recover():J.warn("recording request failed:".concat(n.status))})),this.yr.onError((function(n,i){t.saveFailedRecordingEvents(n,i)}))},n.prototype.onStart=function(){this.gr={},this.Rr()},n.prototype.onStop=function(){this.kr()},n.prototype.recover=function(){this.pr.recover(this.Er)},n.prototype.addBatchInProgress=function(t,n,i){this.gr[t]={metadata:n,events:i}},n.prototype.removeBatchInProgress=function(t){delete this.gr[t]},n.prototype.blockSendingLastMessage=function(){this.Ar=!1},n.prototype.allowSendingLastMessage=function(){this.Ar=!0},n.prototype.sendLastMessageBeacon=function(){this.U.useMalkaPipeline&&this.Ar&&this.mr.send()},n.prototype.Rr=function(){window.addEventListener("pagehide",this.br)},n.prototype.kr=function(){window.removeEventListener("pagehide",this.br)},n.prototype.Sr=function(t){return!this.U.useMalkaPipeline||!!t&&-1===csString.prototype.indexOf.call(t,nn.TEMPORARILY_RECORDED)},n.prototype.saveFailedRecordingEvents=function(t,n){this.pr.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri),metadata:ht(ht({},t),{datatype:this.Tr}),events:n})},n.prototype.Nr=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.gr),(function(n){var i=t.gr[n],r=i.metadata,s=i.events;t.pr.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:ht(ht({},r),{datatype:"json"}),events:csJSON.stringify(s)})}))},ot([G("RecordingRecovery")],n.prototype,"recover",null),n}(wi),mi=/[^\s]/g;function gi(t){return csString.prototype.replace.call(t,mi,"a")}!function(t){t.getShadowRoot=function(t){return t&&(a(n=t)&&csElementshadowRoot.apply(n)&&S(csElementshadowRoot.apply(n)))?t.shadowRoot:null;var n},t.getAllShadowHosts=function t(n){for(var i,r,s=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,null,!1),e=[];r=s.nextNode();)csElementshadowRoot.apply(r)&&(i=csArray.prototype.push).call.apply(i,at([e,r],t(r.shadowRoot),!1));return e}}(ui||(ui={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function s(){return window.innerWidth}function e(){var t=window.csScreen.width;return U(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return U(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=s,t.screenWidth=e,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(s()),wh:"".concat(r()),sw:"".concat(e()),sh:"".concat(u())}}}(hi||(hi={})),function(t){var n="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){var i=t.getBoundingClientRect();if(0==i.width&&0==i.height)return!0}var r,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||(r=s.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(r)))}function s(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return e(document,i,r)}function e(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var s=ui.getShadowRoot(r);return s&&s!=document.body.getRootNode()&&s!==t?e(s,n,i):r}t.isConnected=function(t){return n(t)},t.isEmpty=function(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=ri(n.querySelectorAll(t)),s=0,e=ui.getAllShadowHosts(n);s<e.length;s++){var u=ri(e[s].shadowRoot.querySelectorAll(t));(i=csArray.prototype.push).call.apply(i,at([r],u,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var s=i(n);return null!=s&&t(s)},t.getTopAncestorHiddenByCSS=function(t){var n=null,s=t;do{if(!r(s))break;n=s}while(s=i(s));return n},t.createDeepTreeWalker=function(t,n){var i;void 0===n&&(n=NodeFilter.SHOW_ALL);var r=n|NodeFilter.SHOW_ELEMENT,s=[document.createTreeWalker(t,r,null,!1)];return t instanceof Element&&(null===(i=csElementshadowRoot.apply(t))||void 0===i?void 0:i.firstElementChild)&&csArray.prototype.push.call(s,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1)),{nextNode:function(){for(;s.length>0;){var t=s[s.length-1].nextNode();if(t){var i=ui.getShadowRoot(t);if(i&&csArray.prototype.push.call(s,document.createTreeWalker(i,r,null,!1)),0!=(Si[t.nodeType]&n))return t}else csArray.prototype.pop.call(s)}return null}}},t.getTopElement=s,t.getTopElementFromPoint=e,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+hi.windowOffsetX()<0||n.bottom+hi.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=s(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){if(r(t))return!1;var n=s(t);return t.contains(n)},t.isInViewPort=function(t){var n=s(t);return null!==n&&(t===n||t.contains(n))},t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!l(t)||!t.hasAttribute("href"))||(!(!(a(n=t)&&"select"===n.localName||m(t)||p(t)||function(t){return a(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return a(t)&&"details"===t.localName}(t)&&!function(t){return a(t)&&"summary"===t.localName}(t)))));var n}}(ci||(ci={}));var Ai,Ei,Si=((oi={})[Node.ATTRIBUTE_NODE]=NodeFilter.SHOW_ATTRIBUTE,oi[Node.CDATA_SECTION_NODE]=NodeFilter.SHOW_CDATA_SECTION,oi[Node.COMMENT_NODE]=NodeFilter.SHOW_COMMENT,oi[Node.DOCUMENT_FRAGMENT_NODE]=NodeFilter.SHOW_DOCUMENT_FRAGMENT,oi[Node.DOCUMENT_NODE]=NodeFilter.SHOW_ALL,oi[Node.DOCUMENT_TYPE_NODE]=NodeFilter.SHOW_DOCUMENT_TYPE,oi[Node.ELEMENT_NODE]=NodeFilter.SHOW_ELEMENT,oi[Node.ENTITY_NODE]=NodeFilter.SHOW_ENTITY,oi[Node.ENTITY_REFERENCE_NODE]=NodeFilter.SHOW_ENTITY_REFERENCE,oi[Node.NOTATION_NODE]=NodeFilter.SHOW_NOTATION,oi[Node.PROCESSING_INSTRUCTION_NODE]=NodeFilter.SHOW_PROCESSING_INSTRUCTION,oi[Node.TEXT_NODE]=NodeFilter.SHOW_TEXT,oi),bi=function(){function t(t,n,i,r){this.Or=t,this.An=n,this.Ir=i,this.Sn=r,this.Lr=!1}var n;return t.prototype.setAnonymization=function(t){this.Cr=t},t.prototype.isDOMSerializationInProgress=function(){return this.Lr},t.prototype.serializeInitialDom=function(t,n){if(this.Or.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){J.error(t)}));else{var i=this._r(t);n(i)}},t.prototype._r=function(t){return{args:[this.Or.serialize(t,{withAnonymization:this.Cr})],date:Rt(),type:Cn.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:this.Lr=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.Or.startSerializeAsync(t,{withAnonymization:this.Cr})];case 2:return[2,n.sent()];case 3:return this.Lr=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n=this.An.getId(t.target);if(!n)return J.warn("serializeMutationCharacterData: node without identifier"),null;var i=t.target;if(i.data===t.oldValue)return null;if(v(i)&&this.Sn.shouldEncrypt(i))return this.Sn.registerTextNodeMutationToEncrypt({targetId:n,textNode:i,serializedTextData:gi(i.data),date:t.date}),null;var r=[n,this.Ir.getAnonymizedText(this.Cr,i,i.data)];return this.Mr(this.Or)&&this.isDOMSerializationInProgress()&&this.Or.handleMutationCharacterData(t,r),r},t.prototype.serializeAttachShadowEvent=function(t){var n=this.An.getId(t.target);return n?[n,this.Or.serialize(t.shadowRoot)]:(J.warn("serializeAttachShadowEvent: node without identifier"),null)},t.prototype.serializeMutationAttribute=function(t){var n=this.An.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,s=t.attributeNamespace,e=ci.getAttributeNS(t.target,s,r);e&&(e=this.Ir.getAnonymizedAttributeValue(i,this.Cr,r,e));var u=[n,s,r,e];return this.Mr(this.Or)&&this.isDOMSerializationInProgress()&&this.Or.handleMutationAttribute(t.oldValue?this.Ir.getAnonymizedAttributeValue(i,this.Cr,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=this.An.getId(t.target);return i?this.Mr(this.Or)&&this.isDOMSerializationInProgress()?this.Or.serializeMutationChildList(t,this.Cr,n):{removedNodes:this.Dr(t),addedNodes:this.Pr(t,i,n)}:null},t.prototype.Mr=function(t){return t.isAsynchronous()},t.prototype.Dr=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.An.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.Pr=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.An.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=0;u<t.addedNodes.length;u+=1){var h=t.addedNodes[u],o=this.Or.serialize(h,{excludedNodes:i,withAnonymization:this.Cr}),c=i.get(h);c&&i.set(h,c-1),csArray.prototype.push.call(r,[n,s,o])}return r},ot([(n="serializeDocumentAsync",function(t,i,r){var s=r.value;r.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!Jn)return r.value=s,s.apply(this,t);Yn(n);var e=s.apply(this,t);return e.then((function(){Xn(n)})),e}})],t.prototype,"serializeDocumentAsync",null),t}(),Ni=function(){function t(t,n,i,r){var s=this;this.Ur=t,this.An=n,this.En=i,this.ti=r,this.jr()&&(this.qr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var n=t.context,i=t.args;return s.sendInsertion(n,i)}})),this.Fr()&&(this.Hr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var n=t.context,i=t.args;return s.sendDeletion(n,i)}})),this.Vr()&&(this.zr=this.Ur.createDescriptorInterceptor(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return s.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){this.qr&&this.qr.activate(),this.Hr&&this.Hr.activate(),this.zr&&this.zr.activate()},t.prototype.stop=function(){this.qr&&this.qr.deactivate(),this.Hr&&this.Hr.deactivate(),this.zr&&this.zr.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.Jr(t);if((null==i?void 0:i.ownerNode)&&(!z(i.ownerNode)||!this.En.isSensitiveChild(i.ownerNode))){var r=this.An.getId(i.ownerNode);if(r){var s=this.Gr(i.cssRules,t.parentRule),e={date:Rt(),type:Cn.STYLESHEET_CSS_TEXT_UPDATE,args:[r,s,n]};this.fi(e),this.ti.scanCssString(n)}}},t.prototype.Jr=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.Gr=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.jr=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.Fr=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t.prototype.Vr=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!z(t.ownerNode)||!this.En.isSensitiveChild(t.ownerNode))){var s=this.An.getId(t.ownerNode);if(s){var e={date:Rt(),type:Cn.STYLESHEET_RULE_INSERT,args:F(r)?[s,i,r]:[s,i]};this.fi(e),this.ti.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!z(t.ownerNode)||!this.En.isSensitiveChild(t.ownerNode))){var r=this.An.getId(t.ownerNode);if(r){var s={date:Rt(),type:Cn.STYLESHEET_RULE_DELETE,args:[r,i]};this.fi(s)}}},ot([G("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),ot([G("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),ot([G("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),Ti=function(){function t(){this.Wr=[],this.Br=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var s=csArray.prototype.pop.call(i),e=s.root;null!==e;)if(r&&n&&n.get(e)>0){for(var u=s.nextSibling();null===u&&null!==s.parentNode();)u=s.nextSibling();e=u}else e.__contentsquare_identifier=this.Br,this.Br+=1,a(e)&&csElementshadowRoot.apply(e)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(e),NodeFilter.SHOW_ALL,null,!1)):A(e)&&this.Kr(e),e=s.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var s=n.__contentsquare_identifier;if(s&&i.add(s),a(n)&&csElementshadowRoot.apply(n)){var e=csElementshadowRoot.apply(n);this.getIds(e).forEach((function(t){return i.add(t)}))}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Wr,t)},t.prototype.Kr=function(t){for(var n=0,i=this.Wr;n<i.length;n++){(0,i[n])(t)}},t}(),Ri="data-cs-mask",ki=function(){function t(t){this.En=t}return t.prototype.beforeSerializeChildren=function(t,n){return this.Yr(t)||this.Xr(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i=this;return this.Yr(t)&&!g(t)&&(csArray.prototype.push.call(n,this.$r(t)),t.hasAttribute(Ri)||csArray.prototype.push.call(n,document.createAttribute(Ri))),csArray.prototype.filter.call(n,(function(n){return!i.En.isSensitiveAttribute(t,n.name)}))},t.prototype.Yr=function(t){return a(t)&&this.En.isSensitive(t)},t.prototype.Xr=function(t){return S(t)&&this.En.isSensitive(t.host)},t.prototype.$r=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),i},t}(),Oi=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},Ii=null!==(Ai=Oi(Element))&&void 0!==Ai?Ai:Oi(Node);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(Ei||(Ei={}));var xi=function(t){this.csId=t.__contentsquare_identifier,this.format=Ei.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var Li,Ci=function(t){function n(n){var i,r=t.call(this,n)||this;return r.attributes=[],r.localName=(i=n,Ii.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r.nodeType=Node.ELEMENT_NODE,r}return ut(n,t),n}(xi),_i=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start",X],Mi=function(){function t(t,n){this.j=t,this.U=n,this.Zr=[],this.Qr=""}return t.prototype.init=function(){this.Zr=at(at([],_i,!0),this.U.whitelistedAttributes,!0)},t.prototype.beforeSerializeChildren=function(t,n,i){return(y(t)||this.ns(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var s=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=s},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?gi(r):this.j.anonymizeEmail(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(y(csNodeparentNode.apply(n)))return i;if(this.ns(csNodeparentNode.apply(n)))return this.j.anonymizeEmail(i)}return t?gi(i):this.j.anonymizeEmail(i)},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.rs(i)||a(s=t)&&"ownerSVGElement"in s?r:n?"":this.j.anonymizeEmail(r);var s},t.prototype.setWhitelistedElementsSelector=function(t){this.Qr=t},t.prototype.getWhitelistedElementsSelector=function(){return this.Qr},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof Ci&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.rs=function(t){return-1!==csArray.prototype.indexOf.call(this.Zr,t)},t.prototype.ns=function(t){return a(t)&&(t.hasAttribute("data-cs-capture")||this.ss(t))},t.prototype.ss=function(t){return!!this.Qr&&W.call(t,this.Qr)},t}(),Di=function(){function t(t){this.es={},this.us=new ai(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.us.isThresholdReached()||(this.us.addString(n),"string"==typeof r?this.us.addString(r):this.us.addArrayBuffer(r),this.us.isThresholdReached()||(this.es[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.hs(),(function(t){var r=n.es[t];void 0!==r&&(csArray.prototype.push.call(i,r),n.cs(t))})),0!==i.length&&(t(i),this.us.reset())},t.prototype.hs=function(){return Object.keys(this.es)},t.prototype.cs=function(t){delete this.es[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(Li||(Li={}));var Pi=function(){function t(t,n,i){this.fs=t,this.vs=i,this.ls=Li.NOT_STARTED,this.ds=[],this.ws=0,this.us=new ai(n),this.ys()}return t.prototype.ys=function(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return[4,this.ps()];case 1:return t.sent(),this.ls===Li.READY?this.gs():this.vs(this.ds),[2]}}))}))},t.prototype.gs=function(){var t=this;csArray.prototype.forEach.call(this.ds,(function(n){t.save(n)})),this.ds=[]},t.prototype.save=function(t){return ct(this,void 0,void 0,(function(){var n,i,r;return ft(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.ls===Li.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.ds,t),[2]):this.ls!==Li.READY||this.us.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.us.addString(n),"string"==typeof r?this.us.addString(r):this.us.addArrayBuffer(r),this.us.isThresholdReached()?[2]:[4,this.It.put(n,new Response(r,{headers:i}))]);case 1:return s.sent(),[3,3];case 2:return s.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:return this.It?[3,2]:[4,this.ps()];case 1:if(n.sent(),this.ls!==Li.READY)return[2];n.label=2;case 2:return this.As(t),[2]}}))}))},t.prototype.ps=function(){return ct(this,void 0,void 0,(function(){var t;return ft(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.ls=Li.OPEN_IN_PROGRESS,t=this,[4,window.caches.open(this.fs)];case 1:return t.It=n.sent(),this.ls=Li.READY,[3,3];case 2:return n.sent(),this.ls=Li.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.As=function(t){return ct(this,void 0,void 0,(function(){var n,i,r,s,e=this;return ft(this,(function(u){switch(u.label){case 0:return u.trys.push([0,,5,6]),this.ws++,this.ws>1?[2]:[4,this.It.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.It.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return s=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return e.It.delete(t)})))];case 4:return u.sent(),t(s),this.us.reset(),[3,6];case 5:return this.ws--,[7];case 6:return[2]}}))}))},t}(),Ui=function(){function t(t){"caches"in window?this.Es(t):this.Ss()}return t.prototype.save=function(t){this.bs.save(t)},t.prototype.recover=function(t){this.bs.recover(t)},t.prototype.Es=function(n){var i=this;this.bs=new Pi(n,t.Ns,(function(t){i.Ss(t)}))},t.prototype.Ss=function(n){var i=this;this.bs=new Di(t.Ns),n&&csArray.prototype.forEach.call(n,(function(t){i.bs.save(t)}))},t.Ns=16777216,t}(),ji=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Ts=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Ts,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Ts,(function(t,n){return ht(ht({},n.getRequestParameters()),t)}),{})},t}(),qi=function(){function t(t,n){this.Rs=t,this.U=n,this.ks=!1,this.Os=null}return t.prototype.start=function(){this.ks=!0,this.Is()},t.prototype.stop=function(){this.ks=!1,this.xs()},t.prototype.trackActivity=function(){this.ks||(this.ks=!0,this.Ls()),this.xs(),this.Is()},t.prototype.Is=function(){var t=this;this.Os=this.Rs.create("recorded user inactive",(function(){t.ks=!1,t.xs(),t.Cs()}),this.U.pendingInactivityTimeout)},t.prototype.xs=function(){null!==this.Os&&(this.Os.cancel(),this.Os=null)},t.prototype.isUserActive=function(){return this.ks},t.prototype.onActivityStopped=function(t){this.Cs=t},t.prototype.onActivityResumed=function(t){this.Ls=t},t}(),Fi=function(){function t(t,n,i){var r=this;this._s=t,this.Ms=n,this.cn=i,this.Zt=setTimeout((function(){r.execute()}),this.cn)}return t.prototype.execute=function(){var t=this;J.tryToExecute(this._s,(function(){t.Ms()}))()},t.prototype.cancel=function(){clearTimeout(this.Zt)},t}(),Hi=function(){function t(){}return t.prototype.create=function(t,n,i){return new Fi(t,n,i)},t}(),Vi=function(){function t(t,n){var i=this;this.Ft=t,this.j=n,this.Ds=[{boundElement:window,type:"resize",listener:function(){return i.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return i.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return i.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){this.Un(),this.triggerInitialEvents()},t.prototype.stop=function(){this.Vn()},t.prototype.Un=function(){csArray.prototype.forEach.call(this.Ds,(function(t){return Fn(t)}))},t.prototype.Vn=function(){csArray.prototype.forEach.call(this.Ds,(function(t){return Hn(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t={type:Cn.RESIZE,args:[hi.windowWidth(),hi.windowHeight()],date:Rt()};this.fi(t)},t.prototype.hashChangeListener=function(){var t={type:Cn.HASH_CHANGE,args:[this.j.anonymizeEmail(this.Ft.href)],date:Rt()};this.fi(t)},t.prototype.visibilityChangeListener=function(){var t={type:Cn.VISIBILITY_CHANGE,args:[document.visibilityState],date:Rt()};this.fi(t)},ot([G("resize")],t.prototype,"resizeListener",null),ot([G("hashChange")],t.prototype,"hashChangeListener",null),ot([G("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),zi=function(t){function n(n,i,r,s,e,u){var h=t.call(this)||this;return h.Ri=n,h.Ti=i,h.Ps=r,h.Ei=s,h.Zn=e,h.ni=u,h.Us=0,h}return ut(n,t),n.prototype.init=function(){var t=this;this.Ri.onEvent((function(){t.js()})),this.Ei.after((function(){t.Us+=1,t.qs()})),this.Ps.onActivityStopped((function(){t.qs()})),this.Ps.onActivityResumed((function(){t.Ti.isStarted()||t.Fs()}))},n.prototype.onIframeRecordingUserEvent=function(t){this.js()},n.prototype.onStart=function(){this.Ps.start()},n.prototype.onStop=function(){this.Ps.stop()},n.prototype.qs=function(){this.Ti.isStarted()&&!this.Zn.isDOMSerializationInProgress()&&!this.Ps.isUserActive()&&this.Us>=2&&this.Hs()},n.prototype.js=function(){this.Ps.trackActivity(),this.Us=0},n.prototype.Hs=function(){this.Ti.stop(),this.ni.emitRecordingStatusChange()},n.prototype.Fs=function(){this.Ti.start(),this.ni.emitRecordingStatusChange()},n}(wi);function Ji(t){return t.replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var s=parseInt(i,16);return 55296<=s&&s<=57343||0===s||s>1114111?"":String.fromCodePoint(s)}))}var Gi=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Wi(t){return-1===t.indexOf('"')?'"'+t+'"':-1===t.indexOf("'")?"'"+t+"'":t}function Bi(t){var n=[];return function(t,n){var i=t.replace(Gi,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],s=t[9]||t[10]||t[11],e=Ji((r||s).trim());return(r?"@import ":"")+"url("+Wi(n(e)||e)+")"}))}(t,(function(t){return n.push(t),t})),n}function Ki(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),s=r[0],e=r[1];return e?(x(s,",")||(e=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(e)),at([Yi(s)],Ki(e),!0)):[Yi(s)]}function Yi(t){return csString.prototype.split.call(t,/,$/)[0]}var Xi,$i=function(){function t(){}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.serializeElementNode=function(t){this.scanElement(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.Vs(t,n),n},t.prototype.scanElement=function(t){this.zs(t)},t.prototype.scanAttribute=function(t,n){this.zs(t,n)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&y(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.Vs=function(t,n){var i=this;y(t)&&si(n,(function(t){v(t)&&i.scanCssString(t.data)}))},t.prototype.zs=function(t,n){this.Js(t,n),this.Gs(t,n),this.Ws(t,n)},t.prototype.Js=function(t,n){!d(t)||n&&"href"!==n||!t.href||this.Bs(t.href)},t.prototype.Gs=function(t,n){w(t)&&(n&&"src"!==n||!t.src||this.Ks(t.src)||null===t.getAttribute("src")||this.Ys(t.getAttribute("src"))||this.Bs(t.src),n&&"srcset"!==n||!t.srcset||this.Xs(t.srcset))},t.prototype.Ws=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.Ys=function(t){return I(t,"#")},t.prototype.Ks=function(t){return I(t,"data:")},t.prototype.scanCssString=function(t){this.$s(Bi(t))},t.prototype.Xs=function(t){this.$s(Ki(t))},t.prototype.$s=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.Ks(t)})),(function(t){return!n.Ys(t)})),(function(t){return Dt(t)})),(function(t){return n.Bs(t)}))},t.prototype.Bs=function(t){var n={date:Rt(),type:Cn.STATIC_RESOURCE_URL,args:[t]};this.fi(n)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive"}(Xi||(Xi={}));var Zi=function(){function t(t){this.Zs=t.performance}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){this.Qs()&&this.te()},t.prototype.te=function(){var t={args:this.ne(),date:Rt(),type:Cn.PERFORMANCE_TIMINGS};this.fi(t)},t.prototype.Qs=function(){return!(!this.Zs||!this.Zs.timing)},t.prototype.ne=function(){return[{performanceTiming:Xi.REQUEST_START,timestamp:this.Zs.timing.requestStart},{performanceTiming:Xi.DOM_INTERACTIVE,timestamp:this.Zs.timing.domInteractive}]},t}(),Qi=function(){function t(t,n){void 0===t&&(t=40),void 0===n&&(n=0),this.ie=t,this.se=n,this.ee=[],this.i=!1,this.ue=0,this.Zt=-1}return t.prototype.schedule=function(t){csArray.prototype.push.call(this.ee,t),this.he()},t.prototype.he=function(){return ct(this,void 0,void 0,(function(){var t,n,i,r=this;return ft(this,(function(s){switch(s.label){case 0:if(this.i)return[2];this.i=!0,window.clearTimeout(this.Zt),s.label=1;case 1:return this.ee.length?this.ue>=this.ie?[4,this.oe()]:[3,3]:[3,4];case 2:s.sent(),this.ue=0,s.label=3;case 3:return t=window.performance.now(),(n=csArray.prototype.shift.call(this.ee))?(this.runTask(n),i=window.performance.now()-t,this.ue+=i,[3,1]):[3,4];case 4:return this.i=!1,this.Zt=window.setTimeout((function(){r.ue=0})),[2]}}))}))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.ee,(function(n){t.runTask(n)})),this.ee=[]},t.prototype.clearQueue=function(){this.ee=[]},t.prototype.oe=function(){var t=this;return new Promise((function(n){return setTimeout((function(){n()}),t.se)}))},t.prototype.isEmpty=function(){return 0===this.ee.length},t.isSupported=function(){return"function"==typeof window.Promise},ot([G("TaskScheduler"),$n("runTask")],t.prototype,"runTask",null),ot([$n("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),tr=function(t){function n(n,i){var r=t.call(this)||this;return r.Ur=n,r.ce=r.handleMutationsSync,r.fe=new Map,i&&i.experimentalMutationObserver&&Qi.isSupported()&&(r.ae=new Qi(i.experimentalMutationObserver.maxProcessingTime,i.experimentalMutationObserver.waitDuration),r.ce=r.handleMutationsAsync),r}return ut(n,t),n.prototype.init=function(){this.ve(),this.le()},n.prototype.le=function(){var t=this;this.de=new csMutationObserver((function(n){t.ce(n)}))},n.prototype.ve=function(){var t=this;this.we()&&(this.ye=this.Ur.createSyncFunctionInterceptor({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.pe()&&(this.ge=this.Ur.createSyncFunctionInterceptor({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.Ae=t},n.prototype.onCharacterDataMutation=function(t){this.Ee=t},n.prototype.onAttributesMutation=function(t){this.Se=t},n.prototype.onAttachShadowMutation=function(t){this.be=t},n.prototype.observe=function(t,n){this.isStarted&&this.de.observe(t,n)},n.prototype.onStart=function(){this.ye&&this.ye.activate(),this.ge&&this.ge.activate()},n.prototype.onStop=function(){this.ye&&this.ye.deactivate(),this.ge&&this.ge.deactivate(),this.ae&&this.ae.clearQueue(),this.de.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.ae&&this.ae.runPendingTasks();var t=this.de.takeRecords();this.handleMutationsSync(t)}},n.prototype.we=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.pe=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutationsSync=function(t){var n=Rt(),i=t.length>1?this.Ne(t):t;this.fe.clear(),this.Te(i);for(var r=0;r<i.length;r+=1){var s=i[r];s.date=n,this.processMutation(s,this.fe)}},n.prototype.handleMutationsAsync=function(t){var n=Rt(),i=t.length>1?this.Ne(t):t;this.ae.isEmpty()&&this.fe.clear(),this.Te(i);for(var r=0;r<i.length;r+=1){var s=i[r];s.date=n,this.Re(s,this.fe)}},n.prototype.Ne=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(a=t[i]).type){var r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e),h=n.get(r),o=ci.getAttributeNS(r,s,e)===a.oldValue?"none":"last";if(h)h.has(u)||h.set(u,o);else{var c=new Map;c.set(u,o),n.set(r,c)}}}var f=[];for(i=t.length-1;i>=0;i-=1){var a;if("attributes"===(a=t[i]).type){r=a.target,s=a.attributeNamespace,e=a.attributeName,u="".concat(s||""," ").concat(e);"last"===(h=n.get(r)).get(u)&&(csArray.prototype.push.call(f,a),h.set(u,"none"))}else csArray.prototype.push.call(f,a)}return csArray.prototype.reverse.call(f)},n.prototype.handleAttachShadow=function(t,n){this.be({shadowRoot:n,date:Rt(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.Se(t);break;case"characterData":this.Ee(t);break;case"childList":this.Ae(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.Re=function(t,n){var i=this;this.ae.schedule((function(){i.processMutation(t,n)}))},n.prototype.Te=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){si(t.addedNodes,(function(t){var i=n.fe.get(t);i?n.fe.set(t,i+1):n.fe.set(t,1)}))}))},ot([$n("handleMutationsSync"),G("handleMutationsSync")],n.prototype,"handleMutationsSync",null),ot([G("handleMutationsAsync")],n.prototype,"handleMutationsAsync",null),ot([$n("handleAttachShadow")],n.prototype,"handleAttachShadow",null),ot([$n("processMutation")],n.prototype,"processMutation",null),n}(wi),nr=function(t){function n(n,i,r){var s=t.call(this,n,null==r?void 0:r.experimental)||this;return s.An=i,s.ke={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},s}return ut(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Dn()},n.prototype.Dn=function(){var t=this;this.An.onDocumentIdentified((function(n){t.observe(n,t.ke)}))},n}(tr);function ir(){var t,n=(t=new Error).stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?rr(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":rr(n[0]))}function rr(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var sr,er=function(){function t(){this.Oe=function(t,n){return{context:t,args:n}}}return t.prototype.Ie=function(t,n){t.prototype=n.prototype,Object.defineProperty(t,"toString",{value:function(){return n.toString()}})},t.prototype.createSyncFunctionInterceptor=function(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Oe:e,h=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return J.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var o=!1,c=i[r];if("function"==typeof c){var f=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,r=u(this,t),e=c.apply(this,t);o&&(h&&h.withCallerName&&(i=ir()),J.tryToExecute("SyncFunctionInterceptor",(function(){s(ht(ht({result:e},r),{callerName:i}))}))());return e};this.Ie(f,c),i[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createAsyncFunctionInterceptor=function(t){var n,i=t.target,r=t.methodName,s=t.hook,e=t.hookPrepareArgs,u=void 0===e?this.Oe:e,h=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return J.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var o=!1,c=i[r];if("function"==typeof c){var f=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return ct(this,void 0,void 0,(function(){var n,i,r;return ft(this,(function(e){return n=u(this,t),i=c.apply(this,t),o&&(h&&h.withCallerName&&(r=ir()),J.tryToExecute("AsyncFunctionInterceptor",(function(){s(ht(ht({result:i},n),{callerName:r}))}))()),[2,i]}))}))};this.Ie(f,c),i[r]=f}return{activate:function(){return o=!0},deactivate:function(){return o=!1}}},t.prototype.createDescriptorInterceptor=function(t,n,i){var r=!1,s=Object.getOwnPropertyDescriptor(t,n);if(s){if(!s.configurable)return J.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,ht(ht({},s.get?{get:function(){return s.get.apply(this,arguments)}}:{}),s.set?{set:function(){var t=this,n=arguments,e=s.set.apply(this,n);return r&&J.tryToExecute("DescriptorInterceptor",(function(){i(t,n[0])}))(),e}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}},t}();!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(sr||(sr={}));var ur=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.xe=new Map,i)for(var r=csString.prototype.split.call(i,"."),s=0;s<r.length;s++){var e=csString.prototype.split.call(r[s],"="),u=e[0],h=e[1];this.xe.set(u,h||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this.xe)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(sr.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,s){var e,u=r.toString(),h="".concat(null===(e=i.constructor)||void 0===e?void 0:e.name,".").concat(u),o=s.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(s.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,at([h],t,!1)),o.bind(this).apply(void 0,t)})}},t}();ur.init();var hr=function(){function t(){this.Le=[],this.Ce=[]}return t.prototype.isFull=function(){return this.Le.length>=t._e||this.Ce.length>=t._e},t.prototype.isEmpty=function(){return 0===this.Le.length&&0===this.Ce.length},t.prototype.addIdInGlobally=function(t){csArray.prototype.push.call(this.Le,t)},t.prototype.addIdInViewPort=function(t){csArray.prototype.push.call(this.Ce,t)},t.prototype.clear=function(){this.Le=[],this.Ce=[]},t.prototype.flushIdsSeenGlobally=function(){var t=at([],this.Le,!0);return this.Le=[],t},t.prototype.flushIdsSeenInViewport=function(){var t=at([],this.Ce,!0);return this.Ce=[],t},t._e=20,t}();function or(t){return"$$"+t}or.asyncIterator="$$asyncIterator";var cr=void 0!==window.Symbol?window.Symbol:or,fr=!!window.IntersectionObserver&&!!window.IntersectionObserverEntry;function ar(t,n){if(!fr)throw new Error("IntersectionObserver is not supported");if((null==n?void 0:n.delay)<100)throw new Error("Visibility delay should be > 100ms");var i="isVisible"in IntersectionObserverEntry.prototype;return(null==n?void 0:n.trackVisibility)&&(t=i?function(t){return function(n,i){n=csArray.prototype.map.call(n,(function(t){return{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,isVisible:t.isVisible||ci.isInViewPort(t.target),rootBounds:t.rootBounds,target:t.target,time:t.time}})),t(n,i)}}(t):function(t){return function(n,i){csArray.prototype.forEach.call(n,(function(t){return t.isVisible=ci.isInViewPort(t.target)})),t(n,i)}}(t)),new IntersectionObserver(t,n)}var vr,lr=function(){function t(t,n){var i=this;this.Me=t,this.De=cr("isVisible"),this.Pe=cr("knownElement"),this.Ue=cr("Tracked"),this.je=[],this.qe=!0,this.Fe=function(t){for(var n=0,r=t;n<r.length;n++){var s=r[n];if(s.isVisible){var e=null===s.target[i.De];s.target[i.De]=!0,e&&!i.He.delay&&i.Ve(s.target,vr.VisibleInViewPort)}else{switch(ci.isVisibleInDocument(s.target)?vr.VisibleOutsideViewPort:s.isIntersecting?vr.HiddenByAnother:vr.Hidden){case vr.Hidden:case vr.HiddenByAnother:i.ze(s.target);break;case vr.VisibleOutsideViewPort:i.Ve(s.target,vr.VisibleOutsideViewPort)}}}i.He.delay&&setTimeout((function(){for(var n=0,r=t;n<r.length;n++){var s=r[n],e=s.isIntersecting&&s.isVisible;s.target[i.De]&&e&&i.Ve(s.target,vr.VisibleInViewPort)}}),i.He.delay)},this.He=ht(ht({},yr),n)}return t.prototype.onVisibilityChange=function(t){csArray.prototype.push.call(this.je,t)},t.prototype.stop=function(){this.qe=!0},t.prototype.start=function(){return ct(this,void 0,void 0,(function(){var t,n=this;return ft(this,(function(i){return this.qe=!1,t={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300},this.Je=ar(this.Fe,t),this.Qn=new csMutationObserver((function(t){return csArray.prototype.forEach.call(t,(function(t){n.Ge(t.target)}))})),this.Me.onElementAvailable((function(t){n.qe||n.We(t)})),[2]}))}))},t.prototype.Ge=function(t){if(t.isConnected&&!ci.areAncestorsHiddenByCSS(t))for(var n,i=this.Me.getElements(t);n=i.next().value;)this.We(n)},t.prototype.We=function(t){if(!t[this.Pe]){this.Je.unobserve(t);var n=ci.getTopAncestorHiddenByCSS(t);n?this.ze(n):(t[this.Pe]=!0,this.Je.observe(t))}},t.prototype.ze=function(n){delete n[this.De],delete n[this.Pe],this.Je.unobserve(n),this.Qn.observe(n,{attributeFilter:t.Be,subtree:!0})},t.prototype.Ve=function(t,n){if(n===vr.VisibleInViewPort&&this.He.trackOnce){if(t[this.Ue])return;t[this.Ue]=!0,this.Je.unobserve(t)}csArray.prototype.forEach.call(this.je,(function(i){return i(t,n)}))},t.Be=["style","class","hidden"],t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.VisibleOutsideViewPort="VisibleOutsideViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(vr||(vr={}));var dr,wr,yr={delay:1e3,trackOnce:!0},pr=function(){function t(t){this.Ht=t}return t.prototype.push=function(t){var n=this;this.Ke||(this.Ke=[],setTimeout((function(){return n.flush()}))),csArray.prototype.push.call(this.Ke,t)},t.prototype.flush=function(){csArray.prototype.forEach.call(this.Ke,this.Ht),this.Ke=void 0},ot([G("MicrotaskBuffer.flush")],t.prototype,"flush",null),t}(),mr=function(){function t(t){var n=this;this.En=t,this.Ye=!1,this.Ke=new pr((function(t){return t.isConnected&&n.Xe(t)}))}return t.prototype.onElementAvailable=function(t){this.Xe=t},t.prototype.serializeTextNode=function(t,n,i){if(i.withAnonymization||!this.Ye)return n;var r=this.$e(t);return r&&this.Ke.push(r),n},t.prototype.getElements=function(t){var n,i,r;return ft(this,(function(s){switch(s.label){case 0:n=ci.createDeepTreeWalker(t,NodeFilter.SHOW_TEXT),s.label=1;case 1:return(i=n.nextNode())?(r=this.$e(i))?[4,r]:[3,3]:[3,4];case 2:s.sent(),s.label=3;case 3:return[3,1];case 4:return[2]}}))},t.prototype.start=function(){this.Ye=!0},t.prototype.stop=function(){this.Ye=!1},t.prototype.$e=function(t){var n=ci.getParentElement(t);return!n||!n.isConnected||this.En.isSensitive(n)||this.En.isSensitiveChild(n)||y(n)||g(n)||ci.isEmpty(t.data)?null:n},t}(),gr=function(){function t(t,n){var i=this;this.En=t,this.Ze=n,this.Ye=!1,this.Qe=new Set,this.tu=new Set,this.nu=new hr,this.Ve=function(t,n){switch(n){case vr.VisibleInViewPort:i.onVisibleInViewPort(t);break;case vr.VisibleOutsideViewPort:i.onVisibleOutsideViewPort(t)}i.nu.isFull()&&i.iu()}}return t.isSupported=function(){return!!window.IntersectionObserver},t.prototype.serializeTextNode=function(n,i,r){return this.Me||(J.warn("TextVisibility: Source was not initialized. (".concat(t.isSupported(),")")),this.start()),this.Me.serializeTextNode(n,i,r)},t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){this.Ye||(this.Me=new mr(this.En),this.Me.start(),this.ru=new lr(this.Me,{delay:this.Ze}),this.ru.start(),this.ru.onVisibilityChange(this.Ve),this.Ye=!0)},t.prototype.stop=function(){this.Ye&&(this.Me.stop(),this.ru&&this.ru.stop(),this.nu.clear(),this.Qe.clear(),this.tu.clear(),this.Ye=!1)},t.prototype.flushEvents=function(){this.Ye&&this.iu()},t.prototype.onVisibleInViewPort=function(t){var n=Ti.getId(t);this.onVisibleOutsideViewPort(t),this.Qe.has(n)||(this.Qe.add(n),this.nu.addIdInViewPort(n))},t.prototype.onVisibleOutsideViewPort=function(t){var n=Ti.getId(t);this.tu.has(n)||(this.tu.add(n),this.nu.addIdInGlobally(n))},t.prototype.iu=function(){if(!this.nu.isEmpty()){var t={visibleGlobally:this.nu.flushIdsSeenGlobally(),visibleInViewPort:this.nu.flushIdsSeenInViewport()},n={type:Cn.TEXT_VISIBILITY,date:Rt(),args:[t]};this.fi(n)}},ot([ur.Log("VisibleInViewport")],t.prototype,"onVisibleInViewPort",null),ot([ur.Log("VisibleInDocument")],t.prototype,"onVisibleOutsideViewPort",null),t}(),Ar=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r.su=[],r.eu=[],r}return ut(n,t),n.prototype.setRequestPayloadProvider=function(t){this.ln=t},n.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.su,t)},n.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.eu,t)},n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters(),n=vt.toQuery(t),i=this.yn();this.hu(n,i)?csArray.prototype.forEach.call(this.su,(function(t){return t()})):csArray.prototype.forEach.call(this.eu,(function(t){return t()})),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.yn=function(){return this.ln?this.ln.getRequestPayload():""},n.prototype.hu=function(t,n){return void 0!==csNavigatorsendBeacon&&csNavigatorsendBeacon("".concat(this.domainUri,"/").concat(this.path,"?").concat(t),n)},n}(wt),Er=function(){function t(t,n,i,r,s,e,u,h,o,c){this.An=t,this._=n,this.ou=i,this.fu=r,this.au=s,this.vu=e,this.lu=u,this.du=h,this.wu=o,this.an=c,this.yu=8e3,this.pu=64e3,this.mu=2e3,this.gu=2e3,this.Au="",this.Eu=document.createElement("div"),this.Su=null,this.bu=!1,this.Nu="[data-cs-encrypt]"}return t.prototype.setEncryptionSelectors=function(t){B(t,this.Eu)&&(this.Nu+=",".concat(t))},t.prototype.shouldEncrypt=function(t){switch(t.nodeType){case Node.ELEMENT_NODE:return!(!p(t)&&!m(t)||!W.call(t,this.Nu)||"password"===t.type);case Node.COMMENT_NODE:case Node.TEXT_NODE:var n=t.parentElement;return!!(n&&v(t)&&W.call(n,this.Nu));default:return!1}},t.prototype.onTextNodeToEncrypt=function(t){this.Tu=t},t.prototype.onInputNodeToEncrypt=function(t){this.Ru=t},t.prototype.onUserIdentifierToEncrypt=function(t){this.ku=t},t.prototype.onApiErrorToEncrypt=function(t){this.Ou=t},t.prototype.init=function(){var t=this;this.Iu()&&(this.xu=new TextEncoder,this.au.onSerializeData((function(n){return t.Lu(n)})),this.vu.onSerializeData((function(n){return t.Cu(n)})),this.lu.onSerializeData((function(n){return t._u(n)})),this.du.onSerializeData((function(n){return t.Mu(n)})),this.wu.onSerializeData((function(n){return t.Du(n)})),this.Pu(this._.encryptionPublicKey))},t.prototype.Pu=function(t){return ct(this,void 0,void 0,(function(){var n;return ft(this,(function(i){switch(i.label){case 0:return[4,this.ou.importKey(t)];case 1:return n=i.sent(),this.bu=!0,n?(this.Su=n,this.au.serializeDataFromBuffer(),this.du.serializeDataFromBuffer()):(this.au.clear(),this.du.clear(),J.warn("Fail to import public key '".concat(t,"'"))),this.vu.serializeDataFromBuffer(),this.lu.serializeDataFromBuffer(),this.wu.serializeDataFromBuffer(),[2]}}))}))},t.prototype.registerTextNodeToEncrypt=function(t){this.Iu()&&(this.bu?this.Lu(t):this.au.addData(t))},t.prototype.registerTextNodeMutationToEncrypt=function(t){this.Iu()&&(this.bu?this.Cu(t):this.vu.addData(t))},t.prototype.registerInputNodeToEncrypt=function(t){this.Iu()&&(this.bu?this._u(t):this.lu.addData(t))},t.prototype.registerUserIdentifierToEncrypt=function(t){this.Iu()&&(this.bu?this.Mu(t):this.du.addData(t))},t.prototype.registerApiErrorToEncrypt=function(t){this.Iu()?this.bu?this.Du(t):this.wu.addData(t):this.Uu(t)},t.prototype.Iu=function(){return this._.encryptionEnabled&&!!this._.encryptionPublicKey&&this._.encryptionPublicKeyId>0&&this.ou.isSupported()&&this.fu.isSupported()},t.prototype.Lu=function(t){var n=this,i=t.textNode,r=this.An.getId(i);if(r){if(this.Su){var s=ht(ht({},t),{targetId:r,date:Rt()});this.ju(s,(function(t){return t.textNode.data}),(function(){return J.warn("Fail to encrypt text node data")}),(function(t,i){return n.qu(t,i)}))}}else J.warn("serializeTextNodeToEncrypt: node without identifier")},t.prototype.Cu=function(t){var n=this;if(!this.Su)return this.Fu(t);this.ju(t,(function(t){return t.textNode.data}),(function(){J.warn("Fail to encrypt text node data - Text node processed as MUTATION_CHARACTER_DATA"),n.Fu(t)}),(function(t,i){return n.qu(t,i)}))},t.prototype._u=function(t){var n=this;if(!this.Su)return this.Hu(t);this.ju(t,(function(t){return t.targetValue}),(function(){J.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),n.Hu(t)}),(function(t,i){return n.Vu(t,i)}))},t.prototype.Mu=function(t){var n=this;this.Su&&this.ju(t,(function(t){return t.userIdentifier}),(function(){J.warn("Fail to encrypt userIdentifier")}),(function(t,i){return n.zu(t,i)}))},t.prototype.ju=function(t,n,i,r){return ct(this,void 0,void 0,(function(){var s,e;return ft(this,(function(u){switch(u.label){case 0:return s=n(t),[4,this.ou.encrypt({publicKey:this.Su},s)];case 1:return(e=u.sent())?(r(t,e),[2]):(i(t),[2])}}))}))},t.prototype.Fu=function(t){var n=t.targetId,i=t.serializedTextData,r={date:t.date,args:[n,i],type:Cn.MUTATION_CHARACTER_DATA};this.Tu(r)},t.prototype.Hu=function(t){var n=t.targetId,i=t.targetValue,r={date:t.date,args:[n,csString.prototype.replace.call(i,/\S/g,"")],type:Cn.INPUT_TEXT};this.Ru(r)},t.prototype.qu=function(t,n){var i=t.targetId,r=t.serializedTextData,s={date:t.date,args:[i,r,n,this._.encryptionPublicKeyId],type:Cn.MUTATION_ENCRYPTED_CHARACTER_DATA};this.Tu(s)},t.prototype.Vu=function(t,n){var i=t.targetId,r=t.targetValue,s={date:t.date,args:[i,csString.prototype.replace.call(r,/\S/g,""),n,this._.encryptionPublicKeyId],type:Cn.INPUT_ENCRYPTED_TEXT};this.Ru(s)},t.prototype.zu=function(t,n){var i={type:Cn.USER_IDENTIFIER,args:[n,t.keyId],date:t.date};this.ku(i)},t.prototype.Du=function(t){return ct(this,void 0,void 0,(function(){var n,i,r,s,e,u,h,o,c,f,a;return ft(this,(function(v){switch(v.label){case 0:return this.Su?[4,this.fu.generateEncryptionKey()]:(this.Uu(t),[2]);case 1:if(n=v.sent(),i=this.fu.generateInitializationVector(),null===n||null===i)return this.Uu(t),[2];v.label=2;case 2:return v.trys.push([2,19,,20]),t.customRequestHeaders?this.Ju(t.customRequestHeaders,this.yu)?[3,3]:(t.customRequestHeaders="",[3,5]):[3,5];case 3:return r=t,[4,this.Gu(n,i,t.customRequestHeaders)];case 4:r.customRequestHeaders=v.sent(),v.label=5;case 5:return t.customResponseHeaders?this.Ju(t.customResponseHeaders,this.yu)?[3,6]:(t.customResponseHeaders="",[3,8]):[3,8];case 6:return s=t,[4,this.Gu(n,i,t.customResponseHeaders)];case 7:s.customResponseHeaders=v.sent(),v.label=8;case 8:return t.queryParameters?this.Ju(t.queryParameters,this.gu)?[3,9]:(t.queryParameters=this.Au,[3,11]):[3,11];case 9:return e=this.an.compressSync(t.queryParameters),u=t,[4,this.Gu(n,i,e)];case 10:u.queryParameters=v.sent(),v.label=11;case 11:return t.requestBody?this.Ju(t.requestBody,this.pu)?[3,12]:(t.requestBody=this.Au,[3,14]):[3,14];case 12:return h=this.an.compressSync(t.requestBody),o=t,[4,this.Gu(n,i,h)];case 13:o.requestBody=v.sent(),v.label=14;case 14:return t.responseBody?this.Ju(t.responseBody,this.mu)?[3,15]:(t.responseBody=this.Au,[3,17]):[3,17];case 15:return c=this.an.compressSync(t.responseBody),f=t,[4,this.Gu(n,i,c)];case 16:f.responseBody=v.sent(),v.label=17;case 17:return a=t,[4,this.Wu(n,this.Su)];case 18:return a.secret=v.sent(),[3,20];case 19:return v.sent(),this.Uu(t),[2];case 20:return t.initializationVector=this.fu.exportInitializationVector(i),t.encryptionKeyId=this._.encryptionPublicKeyId,this.Ou(t),[2]}}))}))},t.prototype.Ju=function(t,n){return this.xu.encode(t).byteLength<=n},t.prototype.Uu=function(t){t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",this.Ou(t)},t.prototype.Gu=function(t,n,i){return ct(this,void 0,void 0,(function(){var r;return ft(this,(function(s){switch(s.label){case 0:return[4,this.fu.encrypt({encryptionKey:t,initializationVector:n},i)];case 1:if(!(r=s.sent()))throw new Error("Encryption failed");return[2,r]}}))}))},t.prototype.Wu=function(t,n){return ct(this,void 0,void 0,(function(){var i,r;return ft(this,(function(s){switch(s.label){case 0:return[4,this.fu.exportSecret(t)];case 1:if(!(i=s.sent()))throw new Error("Export secret failed");return[4,this.ou.encrypt({publicKey:n},i)];case 2:if(!(r=s.sent()))throw new Error("Encrypt secret failed");return[2,r]}}))}))},t}(),Sr=function(){function t(t){this.Sn=t}return t.prototype.serializeTextNode=function(t,n){this.Sn.shouldEncrypt(t)&&(n.data=gi(t.data),this.Sn.registerTextNodeToEncrypt({textNode:t,serializedTextData:n.data}))},t}(),br=function(){function t(){this.Bu=[]}return t.prototype.onSerializeData=function(t){this.Ku=t},t.prototype.addData=function(t){csArray.prototype.push.call(this.Bu,t)},t.prototype.serializeDataFromBuffer=function(){for(;this.Bu.length>0;){var t=csArray.prototype.shift.call(this.Bu);this.Ku(t)}},t.prototype.clear=function(){this.Bu=[]},t}(),Nr=function(){function t(t){this.crypto=t,this.Yu=!1}return t.prototype.init=function(){this.Yu=this.canSupportEncryption(),this.Yu&&(this.textEncoder=new TextEncoder)},t.prototype.isSupported=function(){return this.Yu},t.prototype.canSupportEncryption=function(){return!!(this.crypto&&this.crypto.subtle&&this.crypto.subtle.encrypt&&window.self.CryptoKey&&window.self.TextEncoder&&csString.fromCodePoint)},t}(),Tr="AES-CTR",Rr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.exportInitializationVector=function(t){return xn(t)},n.prototype.exportSecret=function(t){var n;return ct(this,void 0,void 0,(function(){var i;return ft(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.exportKey("jwk",t)];case 2:return i=r.sent(),[2,null!==(n=i.k)&&void 0!==n?n:null];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateEncryptionKey=function(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:if(!this.isSupported())return[2,null];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.crypto.subtle.generateKey({name:Tr,length:128},!0,["encrypt","decrypt"])];case 2:return[2,t.sent()];case 3:return t.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.generateInitializationVector=function(){return this.isSupported()?this.crypto.getRandomValues(new Uint8Array(16)):null},n.prototype.encrypt=function(t,n){return ct(this,void 0,void 0,(function(){var i,r;return ft(this,(function(s){switch(s.label){case 0:if(!this.isSupported())return[2,null];i={counter:t.initializationVector,name:Tr,length:64},r=this.textEncoder.encode(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt(i,t.encryptionKey,r)];case 2:return[2,xn(s.sent())];case 3:return s.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.getRandomValues&&!!this.crypto.subtle.generateKey&&!!this.crypto.subtle.exportKey},n}(Nr),kr="RSA-OAEP",Or=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.importKey=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:if(!this.isSupported())return[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.crypto.subtle.importKey("spki",Ln(t),{name:kr,hash:"SHA-256"},!1,["encrypt"])];case 2:return[2,n.sent()];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.encrypt=function(t,n){return ct(this,void 0,void 0,(function(){var i;return ft(this,(function(r){switch(r.label){case 0:if(!this.isSupported())return[2,null];if(!(i=this.Xu(n,190)))return[2,null];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.crypto.subtle.encrypt({name:kr},t.publicKey,i)];case 2:return[2,xn(r.sent())];case 3:return r.sent(),[2,null];case 4:return[2]}}))}))},n.prototype.Xu=function(t,n){for(var i=0,r=0,s=0;s<t.length;s++){var e=csString.prototype.codePointAt.call(t,s);if(!e)return null;var u=this.$u(e);if(u+i>n)break;r++,i+=u}var h=csString.prototype.slice.call(t,0,r);return this.textEncoder.encode(h)},n.prototype.$u=function(t){return t<=127?1:t<=2047?2:t<=65535?3:4},n.prototype.canSupportEncryption=function(){return t.prototype.canSupportEncryption.call(this)&&!!this.crypto.subtle.importKey},n}(Nr);!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(dr||(dr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(wr||(wr={}));var Ir=function(){function t(t,n,i){this.Zu=t,this.An=n,this.En=i}return t.prototype.start=function(){var n=this;this.Zu.subscribe(t.Qu,(function(t){return n.th(t)}))},t.prototype.stop=function(){this.Zu.unsubscribe(t.Qu)},t.prototype.onEvent=function(t){this.fi=t},t.prototype.th=function(t){if(t.target&&(!a(t.target)||!this.En.isSensitiveChild(t.target))){var n=this.An.getId(t.target);if(n)switch(t.type){case dr.DRAG:case dr.FLICK:this.nh(Mn.SWIPE,t,n);break;case dr.LONG_PRESS:this.nh(Mn.LONG_PRESS,t,n);break;case dr.TAP:this.nh(Mn.TAP,t,n);break;case dr.PINCH_IN:this.nh(Mn.PINCH_IN,t,n);break;case dr.PINCH_OUT:this.nh(Mn.PINCH_OUT,t,n)}else J.warn("processGesture: node without identifier")}},t.prototype.nh=function(t,n,i){var r=this.ih(n,t),s={type:Cn.GESTURE_RECOGNITION,args:[i,r],date:Rt()};this.fi(s)},t.prototype.ih=function(t,n){var i={type:n};return t.direction&&(i.direction=t.direction),t.distance&&(i.distance=t.distance),t.velocity&&(i.velocity=t.velocity),i},t.Qu="RecordingGesturesTracker",t}(),xr=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=Node.DOCUMENT_TYPE_NODE,i}return ut(n,t),n}(xi),Lr=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},Cr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=Node.TEXT_NODE,i}return ut(n,t),n}(xi),_r=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=Node.CDATA_SECTION_NODE,i}return ut(n,t),n}(xi),Mr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=Node.COMMENT_NODE,i}return ut(n,t),n}(xi),Dr=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=Node.DOCUMENT_NODE,r}return ut(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(xi),Pr=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=Node.DOCUMENT_FRAGMENT_NODE,i}return ut(n,t),n}(xi),Ur=function(){function t(t){this.processors=t}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serialize=function(t,n){var i,r=ht({},n),s=t.nodeType;switch(s){case Node.ELEMENT_NODE:i=this.rh(t,r);break;case Node.TEXT_NODE:i=this.eh(t,r);break;case Node.CDATA_SECTION_NODE:i=this.uh(t,r);break;case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:i=this.hh(t,r);break;case Node.DOCUMENT_TYPE_NODE:i=new xr(t);break;case Node.DOCUMENT_NODE:i=this.oh(t,r);break;case Node.DOCUMENT_FRAGMENT_NODE:i=this.fh(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(s,")"))}return si(this.processors,(function(n){var s;null===(s=n.afterSerialize)||void 0===s||s.call(n,t,i,r)})),i},t.prototype.rh=function(t,n){var i,r=new Ci(t);si(this.processors,(function(i){var s;null===(s=i.serializeElementNode)||void 0===s||s.call(i,t,r,n)})),(i=csArray.prototype.push).call.apply(i,at([r.attributes],this.ah(t,n),!1));var s=csElementshadowRoot.apply(t);return s&&(r.shadowRoot=this.lh(s,n)),r.children=this.yh(t,n),r},t.prototype.ah=function(t,n){var i=this,r=ri(t.attributes);return si(this.processors,(function(i){var s,e=null===(s=null==i?void 0:i.beforeSerializeAttributes)||void 0===s?void 0:s.call(i,t,r,n);e&&(r=e)})),csArray.prototype.map.call(r,(function(r){return i.ph(t,r,n)}))},t.prototype.ph=function(t,n,i){var r=new Lr(n);return si(this.processors,(function(s){var e;null===(e=s.serializeAttribute)||void 0===e||e.call(s,t,n,r,i)})),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?ei(r,(function(t){return!n.excludedNodes.get(t)})):r,si(this.processors,(function(i){i.beforeSerializeChildren&&(r=i.beforeSerializeChildren(t,r,n))})),ri(r)},t.prototype.yh=function(t,n){var i=this;return n.skipChildrenSerialization?[]:function(t,n){for(var i=t.length,r=new csArray(i),s=0;s<i;s+=1)r[s]=n(t[s]);return r}(this.runBeforeSerializeChildrenHook(t,n),(function(t){return i.serialize(t,n)}))},t.prototype.eh=function(t,n){var i=new Cr(t);return si(this.processors,(function(r){var s;null===(s=r.serializeTextNode)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.uh=function(t,n){var i=new _r(t);return si(this.processors,(function(r){var s;null===(s=r.serializeCDATASectionNode)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.hh=function(t,n){var i=new Mr(t);return si(this.processors,(function(r){var s;null===(s=r.serializeCommentNode)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.oh=function(t,n){var i=new Dr(t);return i.children=this.yh(t,n),i},t.prototype.lh=function(t,n){var i=new Pr(t);return si(this.processors,(function(r){var s;null===(s=r.serializeShadowRootNode)||void 0===s||s.call(r,t,i,n)})),i.children=this.yh(t,n),si(this.processors,(function(r){var s;null===(s=r.afterSerializeShadowRoot)||void 0===s||s.call(r,t,i,n)})),i},t.prototype.fh=function(t,n){if(t.mode)return this.lh(t,n);throw new Error("Not implemented yet.")},t}();function jr(){return ct(this,void 0,void 0,(function(){return ft(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var qr=function(){function t(t){this.An=t,this.mh=!1,this.gh=new Map,this.Ah={},this.Eh=new Map,this.Sh=new Map,this.bh=new Set,this.Nh=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.mh?ei(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.mh)return n;var r=this.An.getId(t);if(!r)return n;var s=this.Sh.get(r);return s?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=s.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.mh){var r=this.Eh.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.mh){var i=this.Eh.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.mh&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.Th(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.mh&&(i.skipRegisterNode||this.Th(n,i))},t.prototype.enable=function(){this.mh=!0,this.Rh()},t.prototype.disable=function(){this.mh=!1,this.Rh()},t.prototype.deleteNode=function(t){this.gh.delete(t)},t.prototype.setDefaultSerializationOptions=function(t){this.Ah=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.gh.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.An.getId(t);if(i)return null===(n=this.gh.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.An.getId(t);return i&&(null===(n=this.gh.get(i))||void 0===n?void 0:n.options)||this.Ah},t.prototype.registerInitialCharacterData=function(t,n){this.Eh.get(t)||this.Eh.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var s=this.Sh.get(t),e="".concat(i).concat(n||"");if(s){if(s.has(e))return}else s=new Map,this.Sh.set(t,s);var u={name:i,namespaceURI:n||"",value:r};s.set(e,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.An.getId(n);r&&this.bh.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.An.getId(i),s=this.An.getId(t);if(r&&s){var e=this.Nh.get(r);if(e)csArray.prototype.push.call(e.removedNodeIds,s);else{for(var u=[],h=n?this.An.getId(n):null,o=0;o<csNodechildNodes.apply(i).length;o+=1){var c=this.An.getId(csNodechildNodes.apply(i)[o]);c&&!this.bh.has(c)&&(h&&c===h&&csArray.prototype.push.call(u,s),csArray.prototype.push.call(u,c))}null===h&&csArray.prototype.push.call(u,s);var f=[s];this.Nh.set(r,{childNodeIds:u,removedNodeIds:f})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&Fr(r)&&this.kh(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.An.getId(t);return!!n&&this.bh.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.An.getId(n),r=this.An.getId(t);if(!i||!r)return-1;var s=this.Nh.get(i);return s?csArray.prototype.indexOf.call(s.childNodeIds,r):-1},t.prototype.Rh=function(){this.gh.clear(),this.Eh.clear(),this.Sh.clear(),this.bh.clear(),this.Nh.clear()},t.prototype.Th=function(t,n){t.csId&&(this.Oh(t.csId,t,n),this.Ih(t.csId,t),this.gh.set(t.csId,{serializedNode:t,options:n}))},t.prototype.Oh=function(t,n,i){if(function(t){return t instanceof Ci}(n)){var r=this.Sh.get(t);if(r){for(var s=0,e=n.attributes;s<e.length;s++){var u=e[s],h="".concat(u.name).concat(u.namespaceURI||""),o=r.get(h);o&&null!==o.value&&(u.value=o.value,r.delete(h))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.kh=function(t,n,i){t>=0?csArray.prototype.splice.call(n.children,t,0,i):"artificial"in i&&csArray.prototype.push.call(n.children,i)},t.prototype.Ih=function(t,n){var i;if(Fr(n)){var r=this.Nh.get(t);if(r)for(var s=0,e=r.removedNodeIds;s<e.length;s++){var u=e[s],h=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==h){var o=null===(i=this.gh.get(u))||void 0===i?void 0:i.serializedNode;void 0!==o&&this.kh(h,n,o)}}}},t}();function Fr(t){return"children"in t}var Hr={taskTime:25},Vr=function(t){function n(n,i,r,s){void 0===r&&(r=new qr(i)),void 0===s&&(s=Hr);var e=t.call(this,at([r],n,!0))||this;return e.xh=i,e.Lh=r,e.Ch=s,e._h=0,e.Mh=e.Ch.taskTime,e}return ut(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],s=n[2];this.Lh.getSerializedNodeById(i)||this.Lh.registerInitialAttributes(i,r,s,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.Lh.getSerializedNodeById(i)||this.Lh.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.Pr(t,n,i);return this.Dh(t),{removedNodes:this.Dr(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),ct(this,void 0,void 0,(function(){return ft(this,(function(i){return this._h+=1,this.Lh.setDefaultSerializationOptions(n),[2,this.Ph(t,n)]}))}))},n.prototype.Pr=function(t,n,i){var r=[],s=null;if(t.nextSibling){var e=this.xh.getId(t.nextSibling);s=void 0!==e?e:null}for(var u=this.xh.getId(t.target),h=0;h<t.addedNodes.length;h+=1){var o=t.addedNodes[h],c=this.serialize(o,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),f=i.get(o);f&&i.set(o,f-1),csArray.prototype.push.call(r,[u,s,c])}return r},n.prototype.Dh=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.Lh.markAddedTreeAsProcessed(i)}},n.prototype.Uh=function(t,n){if(!n)return-1;var i=this.Lh.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.Dr=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var s=t.removedNodes[r];if(this.Lh.markRemovedNodeAsProcessed(s,t.nextSibling,t.target),this.jh(s))this.qh(s)&&this.Fh(s,n);else{var e=this.serialize(s,{withAnonymization:n});if(this.qh(t.target)){var u=this.Uh(s,t.target);this.Lh.addSerializedChildToParent(t.target,u,e)}}var h=this.xh.getId(s);h&&csArray.prototype.push.call(i,[h])}return i},n.prototype.Fh=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.qh(r))this.Fh(r,n);else if(!this.Lh.isAddedNodeDuringSerialization(r)){var s=this.serialize(r,{withAnonymization:n}),e=this.Uh(r,t);this.Lh.addSerializedChildToParent(t,e,s)}}},n.prototype.qh=function(t){return!!this.Lh.getSerializedNodeByNode(t)},n.prototype.jh=function(t){return this.qh(t)||this.Lh.isAddedNodeDuringSerialization(t)},n.prototype.Ph=function(t,n){return void 0===n&&(n={}),ct(this,void 0,void 0,(function(){var i,r,s,e,u,h,o,c,f,v,l;return ft(this,(function(d){switch(d.label){case 0:return i=this._h,r=Rt(),this.Lh.enable(),n.skipChildrenSerialization=!0,s=[t],[4,jr()];case 1:if(d.sent(),i!==this._h)return[2,null];this.Hh=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(s.length>0))return[3,7];e=csArray.prototype.pop.call(s),u=this.Lh.getOptions(e),h=this.runBeforeSerializeChildrenHook(e,u),o=csArray.prototype.shift.call(h),d.label=3;case 3:return o?csDate.now()-this.Hh>this.Mh?[4,jr()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this._h)return[2,null];this.Hh=csDate.now(),d.label=5;case 5:return this.jh(o)?(o=csArray.prototype.shift.call(h),[3,3]):(csArray.prototype.push.call(s,o),c=this.serialize(o,u),f=this.Uh(o,e),this.Lh.addSerializedChildToParent(e,f,c),a(o)&&csElementshadowRoot.apply(o)&&(v=csElementshadowRoot.apply(o),csArray.prototype.push.call(s,v)),o=csArray.prototype.shift.call(h),[3,3]);case 6:return[3,2];case 7:if(!(l=this.Lh.getSerializedNodeByNode(t)))throw this.Lh.disable(),new Error("traverseAndSerialize : fail to serialize");return this.Lh.disable(),[2,{args:[l],date:r,type:Cn.INITIAL_DOM}]}}))}))},n}(Ur),zr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.isAsynchronous=function(){return!1},n}(Ur),Jr=function(){function t(){this.Vh=!1}return t.prototype.isSupported=function(){return"object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise},t.prototype.start=function(){!this.Vh&&this.isSupported()&&(this.zh?this.zh.clear():this.zh=new Set,this.Vh=!0)},t.prototype.stop=function(){this.Vh&&(this.Vh=!1)},t.prototype.onEvent=function(t){this.fi=t},t.prototype.Jh=function(t){return ct(this,void 0,void 0,(function(){return ft(this,(function(n){switch(n.label){case 0:return this.zh.has(t)?[2]:(this.zh.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.Gh(t),[2]}}))}))},t.prototype.Gh=function(t){if(this.Vh){var n={type:Cn.CUSTOM_ELEMENT_REGISTRATION,date:Rt(),args:[t]};this.fi(n)}},t.prototype.getProcessor=function(){return new(function(){function t(t){this.Wh=t}return t.prototype.serializeElementNode=function(t){(function(t){return a(t)&&csString.prototype.indexOf.call(t.tagName,"-")>0&&csArray.prototype.indexOf.call(b,csString.prototype.toLocaleLowerCase.call(t.tagName))<0})(t)&&this.Wh.Jh(csString.prototype.toLowerCase.call(t.tagName))},t}())(this)},t}(),Gr=function(){function t(t){this.Si=t}return t.prototype.getRequestPayload=function(){var t=this.Si.extractEvents(Cn.JAVASCRIPT_ERROR,Cn.API_ERROR,Cn.CUSTOM_ERROR);return t.length?D(t):""},t}(),Wr=function(){function t(){this.Bh=new Map,this.Kh=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!y(t))return n;var i=this.Yh(t);if(null===i||0===i.length)return n;if(ci.isEmpty(t.textContent)){var r=ri(n);return csArray.prototype.push.call(r,this.Xh(i)),r}var s=this.$h(t);if(s===i.length)return n;for(var e=new csArray(i.length-s),u=s,h=0;u<i.length;u+=1,h+=1)e[h]=i[u];r=ri(n);return csArray.prototype.push.call(r,this.Xh(e)),r},t.prototype.$h=function(t){var n=this.Bh.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.Kh.head.appendChild(i);var r=this.Yh(i);return n=r?r.length:0,this.Bh.set(t.textContent,n),this.Kh.head.removeChild(i),n},t.prototype.Yh=function(t){try{var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.Xh=function(t){var n="";si(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),Br=function(){function t(t,n){this.Ur=t,this.An=n,this.Zh=1}return t.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){var n=this;t.isAdoptedStyleSheetsSupported()&&(this.Qh=new Set,this.qr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var i=t.context,r=t.args;n.no(i,r)}}),this.Hr=this.Ur.createSyncFunctionInterceptor({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var i=t.context,r=t.args;n.io(i,r)}}),this.ro=this.Ur.createDescriptorInterceptor(window.ShadowRoot.prototype,"adoptedStyleSheets",this.so.bind(this)),this.eo=this.Ur.createDescriptorInterceptor(window.Document.prototype,"adoptedStyleSheets",this.so.bind(this)))},t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){t.isAdoptedStyleSheetsSupported()&&(this.qr&&this.qr.activate(),this.Hr&&this.Hr.activate(),this.ro&&this.ro.activate(),this.eo&&this.eo.activate())},t.prototype.stop=function(){t.isAdoptedStyleSheetsSupported()&&(this.Qh.clear(),this.qr&&this.qr.deactivate(),this.Hr&&this.Hr.deactivate(),this.ro&&this.ro.deactivate(),this.eo&&this.eo.deactivate())},t.prototype.serializeDocumentNode=function(t){t.adoptedStyleSheets&&this.so(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){t.adoptedStyleSheets&&this.so(t,t.adoptedStyleSheets)},t.prototype.so=function(t,n){var i=this;csArray.prototype.forEach.call(n,(function(t){return i.uo(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.ho(t)})),s=this.An.getId(t);s&&queueMicrotask((function(){var t={type:Cn.SET_ADOPTED_STYLE_SHEETS,args:[s,r],date:Rt()};i.fi(t)}))},t.prototype.ho=function(t){return t.__adopted_stylesheet_id},t.prototype.no=function(t,n){var i=n[0],r=n[1],s=this.oo(t);if(s){var e={date:Rt(),type:Cn.ADOPTED_STYLESHEET_RULE_INSERT,args:F(r)?[s,i,r]:[s,i]};this.fi(e)}},t.prototype.io=function(t,n){var i=n[0],r=this.oo(t);if(r&&r){var s={date:Rt(),type:Cn.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.fi(s)}},t.prototype.oo=function(t){return this.Qh.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.uo=function(t){if(!this.Qh.has(t)){var n=this.Zh++;t.__adopted_stylesheet_id=n,this.Qh.add(t);var i=this.co(t),r={type:Cn.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:Rt()};this.fi(r)}},t.prototype.co=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){J.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}(),Kr=function(){function t(t,n,i){this.fo=t,this.U=n,this.$=i}return t.prototype.shouldUseAnonymization=function(){var t=!this.fo.isAllowedByConsent();return t?this.U.replayRecordingUnmaskedUrlRegex&&this.U.replayRecordingUnmaskedUrlRegex.test(this.$.getAnonymizedUrl())&&(t=!1):this.U.replayRecordingMaskedUrlRegex&&this.U.replayRecordingMaskedUrlRegex.test(this.$.getAnonymizedUrl())&&(t=!0),t},t}(),Yr=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),Xr="v2/recording",$r=["setCapturedElementsSelector"],Zr=["setPIISelectors"],Qr=["isRecording"],ts=function(){function t(t,n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A){this.ao=t,this.X=n,this.U=i,this.an=r,this.gn=s,this.fo=e,this.vo=u,this.lo=h,this.j=o,this.Ii=c,this.$=f,this.En=a,this.Li=v,this.Ci=l,this._i=d,this.Zu=w,this.Di=y,this.ni=p,this.do=m,this.wo=g,this.yo=A}return t.prototype.init=function(){var t=this,n=new er,i=new Ti,r=new ki(this.En);this.po=new Mi(this.j,this.U),this.po.init();var s=new $i,e=new nr(n,i,this.U),u=new Rr(window.crypto),h=new Or(window.crypto);h.init(),u.init();var o=new br,c=new br,f=new br,a=new br,v=new br,l=new Er(i,this.U,h,u,o,c,f,v,a,this.an);l.init();var d=[new Wr,r,this.po,s];if(this.U.encryptionEnabled){var w=new Sr(l);csArray.prototype.push.call(d,w)}var y=new Br(n,i);y.init(),Br.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(d,y);var p=new gr(this.En,1e3);this.U.textVisibilityEnabled&&gr.isSupported()&&csArray.prototype.push.call(d,p);var m,g=new Jr;g.isSupported()&&csArray.prototype.push.call(d,g.getProcessor()),m=this.mo()?new Vr(d,i):new zr(d),this.Si=new vi;var A=new li,E=new ji(A,this.vo),S=new Ar(this.U.getRecordingUri(),Xr);this.U.useMalkaPipeline&&(E.addProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.X.getRecordingStates())}}}),S.setRequestParametersProviders(this.vo,{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.X.getRecordingStates()),ct:Nn.UNCOMPRESSED,hlm:"true"}}}),S.setRequestPayloadProvider(new Gr(this.Si)));var b=this.Ao(this.an);this.Eo=new Kr(this.fo,this.U,this.$),this.Zn=new bi(m,i,this.po,l),this.Zn.setAnonymization(this.Eo.shouldUseAnonymization()),this.Ri=new ii(this.gn,i,this.En,l),this.Ri.init();var N=new fi(this.Zn,e,s,this.ni,i,this.En),T=new Ui("csPersisted"),R=this.Ao(this.an);this.So=new pi(R,this.Si,T,this.U,S),this.bo=new yi(this.U,b,this.Si,E,A,new Ni(n,i,this.En,s),N,this.Ri,new Vi(window.location,this.j),new Ir(this.Zu,i,this.En),this.Ii,this.X,s,new Zi(window),this.Li,this.Ci,this._i,p,this.Di,l,this.So,g,y),this.To=new zi(this.Ri,N,new qi(new Hi,this.U),b,this.Zn,this.ni),this.do.addListeners(this.bo),this.wo.addListeners(this.bo),this.wo.addListeners(this.To),e.init(),this.To.init(),this.bo.init(),this.lo.register(Qr,(function(){return t.X.isReplayRecorded()&&!t.yo.isUrlExcludedForSessionReplay()})),this.lo.register($r,(function(n){t.po.setWhitelistedElementsSelector(n),t.ni.emitRecordingStatusChange()})),this.lo.register(Zr,(function(n){t.En.setPIISelectors(n),t.ni.emitRecordingStatusChange()})),this.lo.register(["setEncryptionSelectors"],(function(t){l.setEncryptionSelectors(t)})),this.ao.enableRecordingStatus(this.bo,this.En,this.Eo,this.po)},t.prototype.onStartTracking=function(){this.So.recover(),this.X.isReplayRecorded()&&!this.yo.isUrlExcludedForSessionReplay()&&(this.U.useMalkaPipeline&&this.X.isTemporarilyRecorded()&&this.bo.blockSendingEventsFromQuotaService(),this.Ro())},t.prototype.onArtificialPageViewEnd=function(){this.bo.clearStates(),!this.X.isReplayRecorded()||this.yo.isUrlExcludedForSessionReplay()||this.X.isTemporarilyRecorded()||this.So.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.Zn.setAnonymization(this.Eo.shouldUseAnonymization()),this.X.isReplayRecorded()&&!this.yo.isUrlExcludedForSessionReplay()?(this.U.useMalkaPipeline&&this.X.isTemporarilyRecorded()&&this.bo.blockSendingEventsFromQuotaService(),this.ko()):this.Oo()},t.prototype.onBeforeSessionRenewal=function(){this.bo.clearStates(),this.Oo()},t.prototype.onOptout=function(){this.Oo()},t.prototype.onConsentGranted=function(){this.Zn.setAnonymization(this.Eo.shouldUseAnonymization()),this.bo.triggerConsentGranted(),this.ni.emitRecordingStatusChange()},t.prototype.onConsentWithdrawn=function(){this.Zn.setAnonymization(this.Eo.shouldUseAnonymization()),this.bo.triggerConsentWithdrawn(),this.ni.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){var i=this;this.U.useMalkaPipeline&&(t===nn.NOT_RECORDED&&n===rn.ETR_OFF?(this.bo.clearEvents(),this.Oo()):(this.Si.setRequestParametersFromProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(i.X.getRecordingStates())}}}),this.bo.allowSendingEventsFromQuotaService(),this.Zn.isDOMSerializationInProgress()||this.bo.pushEvents()))},t.prototype.onInitialDomStart=function(){this.bo.blockSendingEventsFromSerialization(),this.So.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.Ri.start(),this.bo.addInitialDom(t),this.bo.allowSendingEventsFromSerialization(),this.So.allowSendingLastMessage()},t.prototype.Ro=function(){this.To.start(),this.bo.start(),this.So.start(),this.ni.emitRecordingStatusChange()},t.prototype.Oo=function(){this.To.stop(),this.bo.stop(),this.So.stop(),this.ni.emitRecordingStatusChange()},t.prototype.ko=function(){this.Oo(),this.Ro()},t.prototype.Ao=function(t){var n=this.U.useMalkaPipeline?Xr:"recording",i=this.U.useMalkaPipeline?"byteArray":"base64",r=new Un(this.U.getRecordingUri(),n);return r.setCompressionOptions(t,i),r},t.prototype.mo=function(){return Yr.isAsyncSerializationSupported()&&this.U.asyncSerializerEnabled},ot([$n("Recording.onStartTracking")],t.prototype,"onStartTracking",null),ot([$n("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}(),ns=function(){function t(t,n,i){this.Y=t,this.X=n,this.U=i,this.Io=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Io},t.prototype.setNaturalPageViewSent=function(t){this.Io=t},t.prototype.getTrackingContext=function(){var t=this.getSessionKey(),n=this.xo(),i=this.Lo();return t&&n?{projectId:i,sessionKey:t,pageNumber:n}:null},t.prototype.getSessionKey=function(){var t=this.Y.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.xo=function(){var t=this.X.getSession();return t?t.pageNumber:null},t.prototype.Lo=function(){return this.U.projectId},t}(),is=function(){function t(t){this.Co=t,this._o=[]}return t.prototype.handleCommand=function(t){if(V(t)&&(this.Mo(t),this.Co.isNaturalPageViewSent())){var n=this.Co.getTrackingContext();null!==n&&this.Do(t,n)}},t.prototype.Mo=function(t){csArray.prototype.push.call(this._o,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Co.getTrackingContext();null!==n&&csArray.prototype.map.call(this._o,(function(i){return t.Do(i,n)}))},t.prototype.Do=function(t,n){setTimeout((function(){t(n)}))},t}(),rs=function(){function t(t){this.Co=t,this.Po=[]}return t.prototype.handleCommand=function(t){return this.Co.isNaturalPageViewSent()?this.Uo(t):void this.jo(t)},t.prototype.Uo=function(t){var n=this.Co.getSessionKey();return this.qo(t)&&null!==n&&this.Do(t.callback,n),n},t.prototype.jo=function(t){this.qo(t)&&csArray.prototype.push.call(this.Po,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Co.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.Po,(function(i){t.Do(i,n)})),this.Po=[]},t.prototype.qo=function(t){return t&&"function"==typeof t.callback},t.prototype.Do=function(t,n){setTimeout((function(){t(n)}))},t}(),ss=function(){function t(t,n){this.Fo=t,this.Co=n}return t.prototype.onIframeIntegrationCallback=function(t){if(this.Co.isNaturalPageViewSent()){var n=this.Co.getTrackingContext();null!==n&&(t.trackingContext=n,this.Fo.sendToChildren(Ft.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Co.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:jt.AfterPageView};this.Fo.sendToChildren(Ft.IntegrationCallback,n)}},t}(),es=["afterPageView"],us=["getSessionKey"],hs=function(){function t(t,n,i,r,s,e){this.Y=t,this.X=n,this.lo=i,this.Ho=r,this.Fo=s,this.U=e}return t.prototype.init=function(){var t=this;this.Co=new ns(this.Y,this.X,this.U),this.Vo=new is(this.Co),this.zo=new rs(this.Co),this.Jo=new ss(this.Fo,this.Co),this.Ho.addListeners(this.Jo),this.lo.register(us,(function(n){return t.zo.handleCommand(n)})),this.lo.register(es,(function(n){t.Vo.handleCommand(n)}))},t.prototype.onAfterNaturalPageView=function(){this.Co.setNaturalPageViewSent(!0),this.zo.flushPendingCallbacks(),this.Vo.executeRegisteredCallbacks(),this.Jo.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Vo.executeRegisteredCallbacks(),this.Jo.sendAfterPageViewCallbackToChildren()},t}(),os=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=j(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return j(t)&&(j(n)||U(n))},t}(),cs=function(t){function n(n,i){var r=t.call(this)||this;return r.Go=n,r.j=i,r.Wo=[],r}return ut(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Wo,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.Wo=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?os.isValid(t,n)&&this.Go.add(new os(this.j.anonymizeEmail(t),this.j.anonymizeEmail(n))):csArray.prototype.push.call(this.Wo,{key:t,value:n})},n}(wi);function fs(t,n){var i,r,s,e,u=function(){r=null;var n=Rt()-s;e=t.apply(void 0,at([n],i,!1)),s=null},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];return s||(s=Rt()),r&&window.clearTimeout(r),i=at([],t,!0),r=window.setTimeout(u,n),e};return h.flushPending=function(){r&&(window.clearTimeout(r),u())},h}function as(t){return void 0===t&&(t=0),function(n,i,r){var s=r.value,e=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];e||(e=!0,setTimeout((function(){e=!1,s.apply(n,i)}),t))}}}var vs,ls,ds=function(){function t(t){this.an=t,this.Go=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.Go,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.Go=[]},t.prototype.onBatchReady=function(t){this.Bo=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.Go;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.an.compressSync(csJSON.stringify(t)),ct:this.an.algorithm}},t.prototype.setBatchReadyCall=function(){this.Bo()},ot([as(),G("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),ws=["trackDynamicVariable"],ys=function(){function t(t,n,i,r,s,e){this.lo=t,this.X=n,this.U=i,this.vo=r,this.an=s,this.j=e,this.D=new yt(this.U.getTrackerUri(),"dvar"),this.Go=new ds(this.an),this.Ko=new cs(this.Go,this.j)}return t.prototype.init=function(){var t=this;this.D.setRequestParametersProviders(this.vo,this.Go),this.X.setDynamicVariablesService(this.Ko),this.Go.onBatchReady((function(){return t.D.send()})),this.D.after((function(){return t.Go.clear()})),this.lo.register(ws,(function(n){var i=void 0===n?{}:n,r=i.key,s=i.value;t.Ko.trackDynamicVariable(r,s)}))},t.prototype.onStartTracking=function(){this.Ko.start()},t}(),ps=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),j(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t}(),ms=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.Yo(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return F(n.sku)&&(i.sku=n.sku),F(n.category)&&(i.category=n.category),F(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.Yo=function(t){return j(t.id)&&j(t.name)&&P(parseFloat(t.price))&&U(parseInt(t.quantity,10))&&(!F(t.sku)||j(t.sku))&&(!F(t.category)||j(t.category))&&(!F(t.merchant)||j(t.merchant))},t}(),gs=function(){function t(t,n,i){this.j=t,this.Xo=n,this.Ii=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.j.anonymizeFields(t,["id"]);this.$o=ps.from(n)},t.prototype.getTransaction=function(){return this.$o},t.prototype.sendTransaction=function(){this.Ii.isSessionValid()&&(this.$o.hasValidRevenue()?this.Xo.send():J.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!V(t)){var n=this.j.anonymizeFields(t,["id","name","sku","category"]),i=ms.from(n);null!==i&&csArray.prototype.push.call(this.Zo,i)}},t.prototype.getItems=function(){return this.Zo},t.prototype.clear=function(){this.$o=ps.from({revenue:NaN}),this.Zo=[]},t.prototype.getRequestParameters=function(){var t={id:this.$o.id?"".concat(this.$o.id):"",revenue:"".concat(this.$o.revenue)};return F(this.$o.tax)&&(t.tax="".concat(this.$o.tax)),F(this.$o.shipping)&&(t.shipping="".concat(this.$o.shipping)),F(this.$o.currency)&&(t.cu="".concat(this.$o.currency)),t.items=window.csJSON.stringify(this.Zo),t},t}(),As=function(){function t(t,n){this.Qo=csString.prototype.slice.call(t,0,100),this.tc=n&&csString.prototype.slice.call(n,0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"merchant",{get:function(){return this.tc},enumerable:!1,configurable:!0}),t}(),Es=function(){function t(t,n){this.nc=t,this.Ii=n,this.ic=null}return t.prototype.addToCart=function(t){!this.rc(t.sku)||F(t.merchant)&&!j(t.merchant)||(this.ic=new As(t.sku,t.merchant),this.sendCartItem())},t.prototype.rc=function(t){return j(t)&&t.length>0},t.prototype.getCartItem=function(){return this.ic},t.prototype.sendCartItem=function(){this.Ii.isSessionValid()&&this.nc.send()},t.prototype.clear=function(){this.ic=null},t.prototype.getRequestParameters=function(){if(!this.ic)return{};var t={sku:"".concat(this.ic.sku)};return F(this.ic.merchant)&&this.ic.merchant.length>0&&(t.me=this.ic.merchant),t},t}(),Ss=["ecommerce:addToCart","ec:cart:add"],bs=["ecommerce:addTransaction","ec:transaction:create"],Ns=["ecommerce:addItem","ec:transaction:items:add"],Ts=["ecommerce:send","ec:transaction:send"],Rs=function(){function t(t,n,i,r,s,e,u){this.U=t,this.Y=n,this.X=i,this.lo=r,this.j=s,this.Ii=e,this.$=u}return t.prototype.init=function(){var t=new yt(this.U.getTrackerUri(),"transaction"),i=new yt(this.U.getTrackerUri(),"addtocart"),r=new gs(this.j,t,this.Ii),s=new Es(i,this.Ii);t.setRequestParametersProviders(this.U,this.Y,this.X,this.$,r,n),t.after((function(){r.clear()})),i.setRequestParametersProviders(this.U,this.Y,this.X,this.$,s,n),i.after((function(){s.clear()})),this.lo.register(bs,(function(t){r.addTransaction(t)})),this.lo.register(Ns,(function(t){return r.addItem(t)})),this.lo.register(Ts,(function(){return r.sendTransaction()})),this.lo.register(Ss,(function(t){s.addToCart(t)}))},t}(),ks=function(){function t(t){this.Zs=t.performance}return t.prototype.getRequestParameters=function(){if(this.sc())return{};var t=this.ec();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.ec=function(){var t=this.Zs.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.sc=function(){return!(this.Zs&&this.Zs.timing&&this.Zs.timing.loadEventEnd>0)},t}();function Os(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.EXTENSION=26]="EXTENSION"}(vs||(vs={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(ls||(ls={}));var Is,xs=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),Ls=function(t){function n(n,i){var r=t.call(this)||this;return r._=n,r.hc=i,r.supportedEventTypes=[vs.MOUSEDOWN,vs.MOUSEUP,vs.CLICK,vs.MOUSEOVER,vs.TAP],r}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){if(this._.eMerchandisingEnabled){var i=this.hc.getEventTargetPathAndTargetLink(t),r=i.path,s=i.targetLink;n.tgt=r,n.tgtLk=s}return n},n}(xs),Cs=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),_s=function(t){function n(n){var i=t.call(this)||this;return i.hc=n,i.supportedEventTypes=[vs.MOUSEDOWN,vs.MOUSEUP,vs.CLICK,vs.MOUSEOVER,vs.TAP,vs.DRAG,vs.FLICK],i}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.hc.getEventTargetPath(t)),n},n}(xs),Ms=function(){function t(t,n,i){this.U=t,this.hc=n,this.Zu=i,this.oc=[new Ls(this.U,this.hc),new _s(this.hc)]}return t.prototype.th=function(t,n){switch(t.type){case dr.TAP:this.cc(n);break;case dr.FLICK:this.fc(t,n);break;case dr.DRAG:this.ac(t,n)}},t.prototype.cc=function(t){var n={type:vs.TAP,ts:0,x:0,y:0,tgt:""},i=Cs.build(t,n,this.oc);i.tgt!==it.INVALID_ELEMENT&&this.fi(i)},t.prototype.ac=function(t,n){var i={type:vs.DRAG,ts:0,fd:t.direction,tgt:""},r=Cs.build(n,i,this.oc);r.tgt!==it.INVALID_ELEMENT&&this.fi(r)},t.prototype.fc=function(t,n){var i={type:vs.FLICK,ts:0,fd:t.direction,tgt:""},r=Cs.build(n,i,this.oc);r.tgt!==it.INVALID_ELEMENT&&this.fi(r)},t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){var n=this;this.Zu.subscribe(t.Qu,(function(t,i){return n.th(t,i)}))},t.prototype.stop=function(){this.Zu.unsubscribe(t.Qu)},t.Qu="AnalysisGestureTracker",t}(),Ds="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(H(t)&&function(t){try{if(H(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&z(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Ds))},t.getScrollContainer=function(){return document.querySelector("[".concat(Ds,"]"))}}(Is||(Is={}));var Ps;!function(t){t.getRelativePosition=function(t){var n=Zn(t);if(!(n&&z(n)&&V(n.getBoundingClientRect)&&H(t.pageX)&&H(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-hi.windowOffsetX(),s=t.pageY-i.top-hi.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,s+=n.scrollTop);var e=Math.max(n.scrollWidth,i.width),u=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/e*65535),yRel:Math.round(s/u*65535),valid:!0}}}(Ps||(Ps={}));var Us,js,qs,Fs,Hs,Vs,zs=function(t){function n(n,i){var r=t.call(this)||this;return r._=n,r.hc=i,r.supportedEventTypes=[vs.MOUSEMOVE],r.vc="",r}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){if(!this._.mouseMoveHeatmapEnabled)return n;var i=Ps.getRelativePosition(t),r=i.valid,s=i.xRel,e=i.yRel;if(r){var u=this.hc.getEventTargetPath(t);u!==it.INVALID_ELEMENT&&(n.xRel=s,n.yRel=e,u!==this.vc||this._.iframesTracking?(this.vc=u,n.tgtHM=u):n.tgtHM="")}else this.vc="";return n},n}(xs),Js=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[vs.CHANGE],n.lc=["text","email","number","search","tel","url","password"],n}return ut(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=Zn(t);return p(i)&&csArray.prototype.indexOf.call(this.lc,i.type)>=0&&(n.isBlank=""===i.value),n},n}(xs),Gs=function(){function t(t,n,i){var r=this;this._=t,this.hc=n,this.gn=i,this.wc="select, select *, input, textarea",this.yc="select, select *, input, textarea",this.mc="a, a *, button, button *, select, select *, input, textarea",this.gc="input, select, textarea",this.Ac=150,this.Ec=400,this.Sc=!1,this.bc=fs((function(t,n){return r.scrollListener(t,n)}),this.Ac),this.Nc=fs((function(t){return r.resizeListener(t)}),this.Ac),this.Tc=ti((function(t){return r.mouseMoveListener(t)}),this.Ec),this.Rc=[{boundElement:window,type:"resize",listener:function(){return r.Nc()}},{boundElement:document,type:"scroll",listener:function(t){return r.bc(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.Tc(r.kc(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.Oc=[{boundElement:document,type:"mouseover",listener:this.gn.on(this.mc,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.gn.on(this.mc,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.gn.on(this.wc,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.gn.on(this.wc,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"change",listener:this.gn.on(this.yc,(function(t){return r.changeListener(t)}))},{boundElement:document,type:"keyup",listener:this.gn.on(this.gc,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.gn.on(this.gc,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.gn.on(this.gc,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.gn.on(this.gc,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.gn.on(this.gc,(function(t){return r.pasteListener(t)}))}],this.oc=[new Ls(this._,this.hc),new zs(this._,this.hc),new Js,new _s(this.hc)],this.$n={},this.Mn()}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){var t=this.Ic();csArray.prototype.forEach.call(t,(function(t){return Fn(t)})),this.resizeListener()},t.prototype.stop=function(){var t=this.Ic();csArray.prototype.forEach.call(t,(function(t){return Hn(t)}))},t.prototype.flushPendingDebouncedListeners=function(){this.bc.flushPending(),this.Nc.flushPending()},t.prototype.Ic=function(){return this.gn.isMatchesSelectorSupported()?at(at([],this.Rc,!0),this.Oc,!0):(J.warn("Element.matches is not implemented yet"),this.Rc)},t.prototype.resizeListener=function(t){var n=Is.getScrollContainer(),i=z(n);i&&(this.Sc=!0);var r={type:vs.RESIZE,ts:0,x:i?n.clientWidth:hi.windowWidth(),y:i?n.clientHeight:hi.windowHeight()};void 0!==t&&(r.d=t),this.fi(r)},t.prototype.scrollListener=function(t,n){var i=Is.isEventOnScrollContainer(n);!this.Sc&&i&&this.resizeListener();var r={type:vs.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:hi.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:hi.windowOffsetY(),d:t},s=Cs.build(n,r,this.oc);this.fi(s)},t.prototype.mouseMoveListener=function(t){var n={type:vs.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Cs.build(t,n,this.oc);this.fi(i)},t.prototype.mouseDownListener=function(t){var n={type:vs.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.mouseUpListener=function(t){var n={type:vs.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.clickListener=function(t){var n={type:vs.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.mouseOverListener=function(t){var n={type:vs.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.mouseOutListener=function(t){var n={type:vs.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.hc.getEventTargetPath(t)},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.focusInListener=function(t){var n={type:vs.FOCUSIN,ts:0,tgt:this.hc.getEventTargetPath(t)},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.focusOutListener=function(t){var n={type:vs.FOCUSOUT,ts:0,tgt:this.hc.getEventTargetPath(t)},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.changeListener=function(t){var n={type:vs.CHANGE,ts:0,tgt:this.hc.getEventTargetPath(t)},i=Cs.build(t,n,this.oc);this.xc(i)},t.prototype.copyListener=function(t){var n={type:vs.COMMAND,ts:0,tgt:this.hc.getEventTargetPath(t),key:qn.COPY};this.xc(n)},t.prototype.cutListener=function(t){var n={type:vs.COMMAND,ts:0,tgt:this.hc.getEventTargetPath(t),key:qn.CUT};this.xc(n)},t.prototype.pasteListener=function(t){var n={type:vs.COMMAND,ts:0,tgt:this.hc.getEventTargetPath(t),key:qn.PASTE};this.xc(n)},t.prototype.keyUpListener=function(t){var n={type:vs.KEYUP,ts:0,tgt:this.hc.getEventTargetPath(t),key:this.Lc(t)};this.xc(n)},t.prototype.keyDownListener=function(t){var n={type:vs.KEYDOWN,ts:0,tgt:this.hc.getEventTargetPath(t),key:this.Lc(t)};this.xc(n)},t.prototype.Lc=function(t){var n=this.$n[t.key];return void 0===n?jn.ALPHANUMERICAL:n},t.prototype.xc=function(t){Os(t)&&t.tgt!==it.INVALID_ELEMENT&&this.fi(t)},t.prototype.kc=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},t.prototype.Mn=function(){this.$n[" "]=jn.SPACE,this.$n.Spacebar=jn.SPACE,this.$n.Enter=jn.ENTER,this.$n.Backspace=jn.BACKSPACE,this.$n.Delete=jn.DELETE,this.$n.ArrowUp=jn.ARROWUP,this.$n.ArrowDown=jn.ARROWDOWN,this.$n.ArrowLeft=jn.ARROWLEFT,this.$n.ArrowRight=jn.ARROWRIGHT,this.$n.Up=jn.ARROWUP,this.$n.Down=jn.ARROWDOWN,this.$n.Left=jn.ARROWLEFT,this.$n.Right=jn.ARROWRIGHT,this.$n.CapsLock=jn.CAPSLOCK,this.$n.Shift=jn.SHIFT,this.$n.Tab=jn.TAB},ot([G("Event handler type: resize")],t.prototype,"resizeListener",null),ot([G("Event handler type: scroll")],t.prototype,"scrollListener",null),ot([G("Event handler type: mouseMove"),ni()],t.prototype,"mouseMoveListener",null),ot([G("Event handler type: mouseDown"),ni()],t.prototype,"mouseDownListener",null),ot([G("Event handler type: mouseUp"),ni()],t.prototype,"mouseUpListener",null),ot([G("Event handler type: click"),ni()],t.prototype,"clickListener",null),ot([G("Event handler type: mouseOver"),ni()],t.prototype,"mouseOverListener",null),ot([G("Event handler type: mouseOut"),ni()],t.prototype,"mouseOutListener",null),ot([G("Event handler type: focusIn")],t.prototype,"focusInListener",null),ot([G("Event handler type: focusOut")],t.prototype,"focusOutListener",null),ot([G("Event handler type: change")],t.prototype,"changeListener",null),ot([G("Event handler type: copy")],t.prototype,"copyListener",null),ot([G("Event handler type: cut")],t.prototype,"cutListener",null),ot([G("Event handler type: paste")],t.prototype,"pasteListener",null),ot([G("Event handler type: keyup")],t.prototype,"keyUpListener",null),ot([G("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Ws=function(){function t(){var t=this;this.Cc=100,this._c=0,this.Mc=hi.documentHeight(),this.Dc={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){Fn(this.Dc),this.reset()},t.prototype.stop=function(){Hn(this.Dc)},t.prototype.reset=function(){this.Mc=hi.documentHeight();var t=Is.getScrollContainer();if(null===t)this._c=this.Pc(hi.documentHeight());else{var n=this.Uc(t);this._c=this.jc(t,n)}this.fi()},t.prototype.maxScrollRateListener=function(t){var n,i;if(Is.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),s=this.Uc(r);n=this.qc(r,s),i=this.jc(r,s)}else n=hi.documentHeight(),i=this.Pc(n);(i>this._c||n>this.Mc)&&(this._c=i,n>this.Mc&&(this.Mc=n),this.fi())},t.prototype.Pc=function(t){var n=Math.round(this.Fc()/t*100);return Math.min(n,this.Cc)},t.prototype.Fc=function(){var t=hi.windowHeight();return hi.windowOffsetY()+t},t.prototype.jc=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.qc(t,n),s=Math.round(i/r*100);return Math.min(s,this.Cc)},t.prototype.Uc=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.qc=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this._c),mdh:"".concat(this.Mc)}},ot([G("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),Bs=function(){function t(t,n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m){this.U=t,this.Hc=n,this.Zu=i,this.Vc=r,this.zc=s,this.Jc=e,this.Gc=u,this.Wc=h,this.Bc=o,this.Ii=c,this.X=f,this.pr=a,this.Kc=v,this.Yc=l,this.Xc=d,this.$c=w,this.Zc=y,this.Qc=p,this.tf=m,this.Vi=new di}return t.prototype.init=function(){var t,n,i,r,s=this;this.Hc.onEvent((function(t){return s.Bi(t)})),this.Zu.onEvent((function(t){return s.Bi(t)})),this.Vc.onEvent((function(){s.Jc.setRequestParametersFromProvider(s.Vc)})),this.Yc.onEvent((function(t){return s.nf(t)})),this.Xc.onEvent((function(){var t,n;null===(t=s.Zc)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(n=s.tf)||void 0===n||n.flushPendingTextHighlightEvent(),s.Jc.isEmpty()||s.Wc.send()})),null===(t=this.$c)||void 0===t||t.onEvent((function(t){return s.Bi(t)})),null===(n=this.Qc)||void 0===n||n.onEvent((function(t){return s.Bi(t)})),null===(i=this.Zc)||void 0===i||i.onEvent((function(t){return s.Bi(t)})),null===(r=this.tf)||void 0===r||r.onEvent((function(t){return s.Bi(t)})),this.if()},t.prototype.if=function(){var t=this;this.Gc.setRequestParametersProviders(this.Jc),this.Gc.before((function(){t.Jc.setRequestParametersFromProvider(t.zc),t.Jc.enableCompression()})),this.Gc.after((function(){t.Jc.setRequestParametersFromProvider(t.Bc)})),this.Gc.setRequestPayloadProvider(this.Jc),this.Gc.afterProvidersCalled((function(){return t.Jc.clearEvents()})),this.Wc.setRequestParametersProviders(this.Jc),this.Wc.setRequestPayloadProvider(this.Jc),this.Wc.before((function(){t.Jc.setRequestParametersFromProvider(t.zc),t.Jc.disableCompression()})),this.Wc.onBeaconSuccess((function(){t.Jc.clearEvents(),t.Jc.setRequestParametersFromProvider(t.Bc)})),this.Wc.onBeaconFailure((function(){t.rf()}))},t.prototype.initStates=function(){this.Jc.setRequestParametersFromProvider(this.Bc),this.sf()},t.prototype.start=function(t){var n,i,r,s;this.Xc.start(),this.Hc.start(),this.Vc.start(),this.Zu.start(),null===(n=this.$c)||void 0===n||n.start(),null===(i=this.tf)||void 0===i||i.start(),null===(r=this.Qc)||void 0===r||r.start(),t||this.Yc.start(),null===(s=this.Zc)||void 0===s||s.start()},t.prototype.collectInitialEvents=function(){var t,n;null===(t=this.Qc)||void 0===t||t.collectInitialEvent(),null===(n=this.$c)||void 0===n||n.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Qi(t)},t.prototype.nf=function(t){this.X.hasValidSession()&&this.Qi(t)},t.prototype.Bi=function(t){this.Ii.isSessionValid()&&this.Qi(t)},t.prototype.Qi=function(t){this.Jc.addEvent(this.ef(t)),this.Jc.isFull()&&this.sendEvents(),this.U.emitDebugEvents&&this.Vi.emit("analysisEvent",ht(ht({},t),{typeName:vs[t.type]}))},t.prototype.ef=function(t){return t.ts=this.uf(),t},t.prototype.sendEvents=function(){this.Jc.isEmpty()||this.Gc.send()},t.prototype.stop=function(){var t,n,i,r;this.Xc.stop(),this.Hc.stop(),this.Vc.stop(),this.Zu.stop(),this.Yc.stop(),null===(t=this.$c)||void 0===t||t.stop(),null===(n=this.Qc)||void 0===n||n.stop(),null===(i=this.Zc)||void 0===i||i.stop(),null===(r=this.tf)||void 0===r||r.stop(),this.Jc.empty()},t.prototype.clearStates=function(){var t,n;this.Hc.flushPendingDebouncedListeners(),null===(t=this.Zc)||void 0===t||t.flushPendingKeyboardNavigationEvent(),null===(n=this.tf)||void 0===n||n.flushPendingTextHighlightEvent(),this.sendEvents(),this.Vc.reset(),this.Yc.stop()},t.prototype.sf=function(){this.hf=Rt()},t.prototype.uf=function(){return Rt()-this.hf},t.prototype.rf=function(){try{this.Jc.isEmpty()||this.pr.save({events:this.Jc.getEvents(),metadata:this.Jc.getMetadata()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===ls.SUCCESS||t===ls.FAILURE||t===ls.ATTEMPT}(t))if(z(n)){var i={status:t,type:vs.SUBMIT,ts:0,tgt:this.Kc.getElementPath(n)};i.tgt!==it.INVALID_ELEMENT&&this.nf(i)}else J.warn("AnalysisEvents Service: invalid element: ".concat(n));else J.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),Ks=function(){function t(t){var n=t.events,i=void 0===n?[]:n,r=t.requestParameters,s=void 0===r?{}:r,e=t.stringCompression;this.cf=!0,this.wi=[],this.yi={},this.wi=i,this.yi=s,this.ff=e}return t.prototype.getRequestPayload=function(){return this.af()?this.ff.compressSync(csJSON.stringify(this.wi)):csJSON.stringify(this.wi)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.wi,t)},t.prototype.setRequestParametersFromProvider=function(t){var n=t.getRequestParameters();for(var i in n)n.hasOwnProperty(i)&&(this.yi[i]=n[i])},t.prototype.eventsCount=function(){return this.wi.length},t.prototype.clearEvents=function(){this.wi=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.wi.length},t.prototype.getEvents=function(){return this.wi},t.prototype.getMetadata=function(){return this.yi},t.prototype.getRequestParameters=function(){return ht(ht({},this.yi),{ct:this.af()?this.ff.algorithm:Nn.UNCOMPRESSED})},t.prototype.enableCompression=function(){this.cf=!0},t.prototype.disableCompression=function(){this.cf=!1},t.prototype.af=function(){return this.cf},t}(),Ys=function(){function t(t,n,i){var r=this;this.vf=t,this.pr=n,this.ff=i,this.lf=function(){"visible"===document.visibilityState&&r.df()}}return t.prototype.start=function(){this.df(),this.wf()},t.prototype.stop=function(){this.yf()},t.prototype.getRecoveryStorage=function(){return this.pr},t.prototype.df=function(){var t=this.pr.recover();if(null!==t){var n=t,i=n.metadata,r=n.events,s=new Ks({events:r,requestParameters:i,stringCompression:this.ff});this.vf.setRequestParametersProviders(s),this.vf.before((function(){s.enableCompression()})),this.vf.setRequestPayloadProvider(s),this.vf.afterProvidersCalled((function(){return s.clearEvents()})),this.vf.send()}},t.prototype.wf=function(){document.addEventListener("visibilitychange",this.lf)},t.prototype.yf=function(){document.removeEventListener("visibilitychange",this.lf)},t}(),Xs=function(){function t(t){this.fs=t}return t.prototype.save=function(t){localStorage.setItem(this.fs,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.fs)},t.prototype.recover=function(){var t=localStorage.getItem(this.fs);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){J.error("Invalid item in localStorage.\n         (key:".concat(this.fs,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),$s=function(){function t(t){var n=this;this.pf=t,this.mf=function(t){return n.processMetric(t)},this.Ye=!1}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){this.Ye||(this.Ye=!0,this.pf.onFCP(this.mf),this.pf.onCLS(this.mf),this.pf.onFID(this.mf),this.pf.onLCP(this.mf),this.pf.onTTFB(this.mf))},t.prototype.stop=function(){this.Ye=!1},t.prototype.processMetric=function(t){if(this.Ye){var n={type:vs.PERFORMANCE,name:t.name,val:t.value,ts:0};this.fi(n)}},ot([G("Performance metric handler")],t.prototype,"processMetric",null),t}(),Zs=function(t,n){return{name:t,value:void 0===n?-1:n,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},Qs=function(t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var i=new PerformanceObserver((function(t){return t.getEntries().map(n)}));return i.observe({type:t,buffered:!0}),i}}catch(t){}},te=function(t,n){var i=function i(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),n&&(removeEventListener("visibilitychange",i,!0),removeEventListener("pagehide",i,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)},ne=function(t){addEventListener("pageshow",(function(n){n.persisted&&t(n)}),!0)},ie=function(t,n,i){var r;return function(s){n.value>=0&&(s||i)&&(n.delta=n.value-(r||0),(n.delta||void 0===r)&&(r=n.value,t(n)))}},re=-1,se=function(){return"hidden"===document.visibilityState?0:1/0},ee=function(){te((function(t){var n=t.timeStamp;re=n}),!0)},ue=function(){return re<0&&(re=se(),ee(),ne((function(){setTimeout((function(){re=se(),ee()}),0)}))),{get firstHiddenTime(){return re}}},he=function(t,n){var i,r=ue(),s=Zs("FCP"),e=function(t){"first-contentful-paint"===t.name&&(h&&h.disconnect(),t.startTime<r.firstHiddenTime&&(s.value=t.startTime,s.entries.push(t),i(!0)))},u=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],h=u?null:Qs("paint",e);(u||h)&&(i=ie(t,s,n),u&&e(u),ne((function(r){s=Zs("FCP"),i=ie(t,s,n),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,i(!0)}))}))})))},oe=!1,ce=-1,fe={passive:!0,capture:!0},ae=new Date,ve=function(t,n){Us||(Us=n,js=t,qs=new Date,we(removeEventListener),le())},le=function(){if(js>=0&&js<qs-ae){var t={entryType:"first-input",name:Us.type,target:Us.target,cancelable:Us.cancelable,startTime:Us.timeStamp,processingStart:Us.timeStamp+js};Fs.forEach((function(n){n(t)})),Fs=[]}},de=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){ve(t,n),s()},r=function(){s()},s=function(){removeEventListener("pointerup",i,fe),removeEventListener("pointercancel",r,fe)};addEventListener("pointerup",i,fe),addEventListener("pointercancel",r,fe)}(n,t):ve(n,t)}},we=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,de,fe)}))},ye={},pe=function(){function t(){}return t.prototype.onFCP=function(t){he(t,!0)},t.prototype.onCLS=function(t){!function(t,n){oe||(he((function(t){ce=t.value})),oe=!0);var i,r=function(n){ce>-1&&t(n)},s=Zs("CLS",0),e=0,u=[],h=function(t){if(!t.hadRecentInput){var n=u[0],r=u[u.length-1];e&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(e+=t.value,u.push(t)):(e=t.value,u=[t]),e>s.value&&(s.value=e,s.entries=u,i())}},o=Qs("layout-shift",h);o&&(i=ie(r,s,n),te((function(){o.takeRecords().map(h),i(!0)})),ne((function(){e=0,ce=-1,s=Zs("CLS",0),i=ie(r,s,n)})))}(t,!0)},t.prototype.onFID=function(t){!function(t,n){var i,r=ue(),s=Zs("FID"),e=function(t){t.startTime<r.firstHiddenTime&&(s.value=t.processingStart-t.startTime,s.entries.push(t),i(!0))},u=Qs("first-input",e);i=ie(t,s,n),u&&te((function(){u.takeRecords().map(e),u.disconnect()}),!0),u&&ne((function(){var r;s=Zs("FID"),i=ie(t,s,n),Fs=[],js=-1,Us=null,we(addEventListener),r=e,Fs.push(r),le()}))}(t,!0)},t.prototype.onLCP=function(t){!function(t,n){var i,r=ue(),s=Zs("LCP"),e=function(t){var n=t.startTime;n<r.firstHiddenTime&&(s.value=n,s.entries.push(t),i())},u=Qs("largest-contentful-paint",e);if(u){i=ie(t,s,n);var h=function(){ye[s.id]||(u.takeRecords().map(e),u.disconnect(),ye[s.id]=!0,i(!0))};["keydown","click"].forEach((function(t){addEventListener(t,h,{once:!0,capture:!0})})),te(h,!0),ne((function(r){s=Zs("LCP"),i=ie(t,s,n),requestAnimationFrame((function(){requestAnimationFrame((function(){s.value=performance.now()-r.timeStamp,ye[s.id]=!0,i(!0)}))}))}))}}(t,!0)},t.prototype.onTTFB=function(t){!function(t){var n,i=Zs("TTFB");n=function(){try{var n=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,n={entryType:"navigation",startTime:0};for(var i in t)"navigationStart"!==i&&"toJSON"!==i&&(n[i]=Math.max(t[i]-t.navigationStart,0));return n}();if(i.value=i.delta=n.responseStart,i.value<0||i.value>performance.now())return;i.entries=[n],t(i)}catch(t){}},"complete"===document.readyState?setTimeout(n,0):addEventListener("load",(function(){return setTimeout(n,0)}))}(t)},t}(),me=function(){function t(){var t=this;this.Ye=!1,this.gf=function(n){try{if(("pagehide"===n.type||"visibilitychange"===n.type)&&"hidden"!==document.visibilityState)return;t.Af()}catch(t){}}}return t.prototype.start=function(){this.Ye||(this.Ye=!0,this.wf(),this.Ef(),this.Sf())},t.prototype.stop=function(){this.Ye&&(this.Ye=!1,this.yf(),this.bf(),this.Nf())},t.prototype.onEvent=function(t){this.Af=t},t.prototype.wf=function(){document.addEventListener("visibilitychange",this.gf)},t.prototype.yf=function(){document.removeEventListener("visibilitychange",this.gf)},t.prototype.Ef=function(){window.addEventListener("pagehide",this.gf)},t.prototype.bf=function(){window.removeEventListener("pagehide",this.gf)},t.prototype.Sf=function(){window.addEventListener("blur",this.gf)},t.prototype.Nf=function(){window.removeEventListener("blur",this.gf)},t}(),ge=function(){function t(){var t=this;this.Ac=500,this.Tf=500,this.Rf=fs((function(n,i){return t.onResize(i)}),this.Ac),this.kf=null,this.Of=!0}return t.prototype.start=function(){var n=this;this.kf||(this.If=t.scheduleStart((function(){n.run()}),this.Tf))},t.prototype.stop=function(){this.kf&&(Hn(this.kf),this.kf=null),this.If()},t.scheduleStart=function(t,n){var i=0,r=null,s=function(){i=window.setTimeout((function(){i=0,t()}),n)};return"visible"===document.visibilityState?s():Fn(r={boundElement:document,type:"visibilitychange",listener:function(){"visible"===document.visibilityState&&(s(),Hn(r),r=null)}}),function(){i>0&&(window.clearTimeout(i),i=0),null!==r&&(Hn(r),r=null)}},t.prototype.onEvent=function(t){this.fi=t},t.prototype.run=function(){var n,i=this;0!==window.outerWidth&&(this.xf=this.Lf=t.Cf(),this._f=window.devicePixelRatio,this.Mf=this._f,this.Df=window.outerWidth,this.Pf=window.innerWidth,this.Uf=window.innerHeight,this.jf=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1,this.kf={boundElement:window.visualViewport||window,type:"resize",listener:function(t){return i.Rf(t)}},Fn(this.kf),this.collectInitialEvents())},t.prototype.collectInitialEvents=function(){if(this.kf){var n={type:vs.ZOOM,ts:0,val:t.qf(this.Lf)};if(this.fi(n),window.visualViewport){var i={type:vs.VIEWPORT_SCALE,ts:0,val:window.visualViewport.scale};this.fi(i)}}},t.prototype.onResize=function(t){var n,i=(null===(n=window.visualViewport)||void 0===n?void 0:n.scale)||1;this.Ff(i),window.visualViewport&&this.Hf(i),this.Df=window.outerWidth,this.Pf=window.innerWidth,this.Uf=window.innerHeight,this.jf=i},t.prototype.Ff=function(n){var i;window.devicePixelRatio!==this.Mf?(i=window.devicePixelRatio/this._f*this.xf,this.Mf=window.devicePixelRatio,this.Of=!1):this.Df===window.outerWidth&&this.Uf!==window.innerHeight&&this.Pf!==window.innerWidth&&this.jf===n&&this.Of&&(i=window.outerWidth/window.innerWidth/n);if(void 0!==i){this.Lf=i;var r={type:vs.ZOOM,ts:0,val:t.qf(i)};this.fi(r)}},t.prototype.Hf=function(t){if(t!==this.jf){var n={type:vs.VIEWPORT_SCALE,ts:0,val:t};this.fi(n)}},t.Cf=function(){return t.Vf()?window.csScreen.deviceXDPI/window.csScreen.logicalXDPI:window.outerWidth/window.innerWidth},t.Vf=function(){return"deviceXDPI"in window.csScreen&&"logicalXDPI"in window.csScreen},t.qf=function(t){return 100*t<<0},ot([G("ZoomTracker.run")],t.prototype,"run",null),ot([G("ZoomTracker.onResize")],t.prototype,"onResize",null),ot([G("ZoomTracker.scheduleStart")],t,"scheduleStart",null),t}();!function(t){t[t.MUTATION=0]="MUTATION",t[t.WINDOW_PROPERTY=1]="WINDOW_PROPERTY"}(Hs||(Hs={})),function(t){t[t.COLOR_ENHANCER=0]="COLOR_ENHANCER",t[t.OTHER=1]="OTHER"}(Vs||(Vs={}));var Ae,Ee=function(){function t(t){this.zf=t,this.Jf=500}return t.prototype.start=function(){var n=this;this.If=t.Gf((function(){n.initialDetection()}),this.Jf)},t.prototype.stop=function(){var t;null===(t=this.Qn)||void 0===t||t.disconnect(),this.Qn=null,this.If()},t.prototype.onEvent=function(t){this.fi=t},t.prototype.initialDetection=function(){var n=this;this.Wf=[],this.Bf=[],csArray.prototype.forEach.call(this.zf,(function(i){for(var r=i.id,s=!1,e={id:r,attributesBasedDetectors:{},childListBasedDetectors:{}},u=0,h=i.detectors;u<h.length;u++){var o=h[u],c=o.type;switch(c){case Hs.MUTATION:(s=!!document.querySelector(o.selector))||t.Kf(e,o);break;case Hs.WINDOW_PROPERTY:s=o.property in window;break;default:}if(s){csArray.prototype.push.call(n.Bf,r);break}}s||csArray.prototype.push.call(n.Wf,e)})),this.le(),this.collectInitialEvent()},t.prototype.collectInitialEvent=function(){this.Bf.length>0&&this.Yf(this.Bf)},t.prototype.Yf=function(t){var n={type:vs.EXTENSION,ts:0,ids:at([],t,!0)};this.fi(n)},t.prototype.le=function(){var t=this;0!==this.Wf.length&&(this.Qn=new csMutationObserver((function(n){return t.handleMutations(n)})),this.Qn.observe(document.documentElement,{childList:!1,attributes:!0}),this.Qn.observe(document.head,{childList:!0,attributes:!1}),this.Qn.observe(document.body,{childList:!0,attributes:!0}))},t.prototype.handleMutations=function(t){var n,i=this,r=[];csArray.prototype.forEach.call(t,(function(t){"childList"===t.type?i.handleChildListMutation(t,r):"attributes"===t.type&&i.handleAttributesMutation(t,r)})),r.length>0&&((n=csArray.prototype.push).call.apply(n,at([this.Bf],r,!1)),this.Yf(r)),0===this.Wf.length&&this.stop()},t.prototype.handleChildListMutation=function(n,i){var r=this;if(0!==n.addedNodes.length){var s=n.target;si(n.addedNodes,(function(n){if(a(n))for(var e=0;e<r.Wf.length;e++){var u=r.Wf[e];if(t.Xf(u,s.localName))if(null==u.childListBasedDetectors[s.localName]?void 0:csArray.prototype.some.call(u.childListBasedDetectors[s.localName],(function(t){return n.matches(t.selector)}))){csArray.prototype.push.call(i,u.id),csArray.prototype.splice.call(r.Wf,e,1);break}}}))}},t.prototype.handleAttributesMutation=function(n,i){for(var r=n.target,s=0;s<this.Wf.length;s++){var e=this.Wf[s];if(t.$f(e,r.localName))if(null==e.attributesBasedDetectors[r.localName]?void 0:csArray.prototype.some.call(e.attributesBasedDetectors[r.localName],(function(t){return r.matches(t.selector)}))){csArray.prototype.push.call(i,e.id),csArray.prototype.splice.call(this.Wf,s,1);break}}},t.Xf=function(t,n){return n in t.childListBasedDetectors},t.$f=function(t,n){return n in t.attributesBasedDetectors},t.Kf=function(t,n){var i=t.attributesBasedDetectors;"childList"===n.mutationType&&(i=t.childListBasedDetectors),n.target in i?csArray.prototype.push.call(i[n.target],n):i[n.target]=[n]},t.Gf=function(t,n){var i,r=0,s=function(){r=0,t()};return window.requestIdleCallback?(r=window.requestIdleCallback(s,{timeout:n}),i=window.cancelIdleCallback):(r=window.setTimeout(s,n),i=window.clearTimeout),function(){r>0&&(i.call(window,r),r=0)}},t.isSupported=function(){return/Chrome/i.test(navigator.userAgent)&&!/Android/i.test(navigator.userAgent)},ot([G("ExtensionsTracker.initialDetection")],t.prototype,"initialDetection",null),ot([G("ExtensionsTracker.handleMutations")],t.prototype,"handleMutations",null),ot([G("ExtensionsTracker.handleChildListMutation")],t.prototype,"handleChildListMutation",null),ot([G("ExtensionsTracker.handleAttributesMutation")],t.prototype,"handleAttributesMutation",null),t}(),Se=[{id:Vs.COLOR_ENHANCER,detectors:[{type:Hs.MUTATION,target:"html",selector:"html[data-darkreader-mode]",mutationType:"attributes"},{type:Hs.MUTATION,target:"body",selector:"#hc_extension_svg_filters",mutationType:"childList"},{type:Hs.MUTATION,target:"body",selector:"#cvd_extension_svg_filter",mutationType:"childList"},{type:Hs.MUTATION,target:"html",selector:"html[class~=ss-shaded-scrollbars]",mutationType:"attributes"}]},{id:Vs.OTHER,detectors:[{type:Hs.MUTATION,target:"body",selector:"th-rw4gc",mutationType:"childList"},{type:Hs.MUTATION,target:"head",selector:'link[href*="cdnapgfjopgaggbmfgbiinmmbdcglnam"]',mutationType:"childList"},{type:Hs.MUTATION,target:"head",selector:'link[href*="dgmanlpmmkibanfdgjocnabmcaclkmod"]',mutationType:"childList"},{type:Hs.WINDOW_PROPERTY,property:"cvox"},{type:Hs.MUTATION,target:"body",selector:"#highlighter[style*=box-shadow]",mutationType:"childList"},{type:Hs.MUTATION,target:"head",selector:'link[href*="ddnpdohiipephjpdpohikkamhdikbldp"]',mutationType:"childList"},{type:Hs.MUTATION,target:"head",selector:'link[href*="emgfmfgandmhbgleikkoaebngboghfpe"]',mutationType:"childList"}]}],be=function(){function t(){this.Zf=0,this.Qf=0,this.ta=0,this.na=0,this.ia=0}return t.prototype.incrementFocusWithKeyboard=function(){this.Zf+=1},t.prototype.incrementFocusWithMouse=function(){this.Qf+=1},t.prototype.incrementClickWithKeyboard=function(){this.ta+=1},t.prototype.incrementClickWithMouse=function(){this.na+=1},t.prototype.incrementScrollWithKeyboard=function(){this.ia+=1},t.prototype.buildKeyboardNavigationCounters=function(){return{focus:{keyboardCounter:this.Zf,mouseCounter:this.Qf},click:{keyboardCounter:this.ta,mouseCounter:this.na},scroll:{keyboardCounter:this.ia}}},t.prototype.reset=function(){this.Zf=0,this.Qf=0,this.ta=0,this.na=0,this.ia=0},t}(),Ne=function(){function t(){var t=this;this.ra=ti((function(){return t.sa()}),5e3),this.bc=fs((function(n,i){return t.scrollListener()}),150),this.Zf=!1,this.ta=!1,this.ia=!1,this.ea=[{boundElement:document,type:"click",listener:function(n){return t.clickListener(n)}},{boundElement:document,type:"focus",listener:function(n){return t.focusListener(n)}},{boundElement:document,type:"keydown",listener:function(n){return t.keyDownListener(n)}},{boundElement:document,type:"mousedown",listener:function(){return t.ua()}},{boundElement:document,type:"mouseover",listener:function(n){return t.mouseOverListener(n)}},{boundElement:document,type:"scroll",listener:function(){return t.bc()}},{boundElement:document,type:"wheel",listener:function(){return t.ha()}}],this.oa=new be}return t.prototype.start=function(){csArray.prototype.forEach.call(this.ea,(function(t){return Fn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.ea,(function(t){return Hn(t)}))},t.prototype.onEvent=function(t){this.fi=t},t.prototype.flushPendingKeyboardNavigationEvent=function(){this.bc.flushPending(),this.ra.flushPending()},t.prototype.clickListener=function(t){var n=Zn(t);z(n)&&ci.isElementFocusable(n)&&(this.ta?(this.oa.incrementClickWithKeyboard(),this.ta=!1):this.oa.incrementClickWithMouse(),this.ra())},t.prototype.focusListener=function(t){var n=Zn(t);this.Zf&&z(n)&&ci.isElementFocusable(n)&&(this.oa.incrementFocusWithKeyboard(),this.ra(),this.Zf=!1)},t.prototype.keyDownListener=function(t){this.Zf||"Tab"!==t.key&&"ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key||(this.Zf=!0),this.ta||"Spacebar"!==t.key&&" "!==t.key&&"Enter"!==t.key||(this.ta=!0),this.ia||"ArrowDown"!==t.key&&"ArrowUp"!==t.key&&"ArrowRight"!==t.key&&"ArrowLeft"!==t.key&&"PageUp"!==t.key&&"PageDown"!==t.key&&"Spacebar"!==t.key&&" "!==t.key||(this.ia=!0)},t.prototype.ua=function(){this.Zf=!1,this.ta=!1},t.prototype.mouseOverListener=function(t){var n=Zn(t);z(n)&&ci.isElementFocusable(n)&&(this.oa.incrementFocusWithMouse(),this.ra())},t.prototype.scrollListener=function(){this.ia&&(this.oa.incrementScrollWithKeyboard(),this.ra(),this.ia=!1)},t.prototype.ha=function(){this.ia=!1},t.prototype.sa=function(){var t={type:vs.KEYBOARD_NAVIGATION,ts:0,val:this.oa.buildKeyboardNavigationCounters()};this.fi(t),this.oa.reset()},ot([G("Keyboard navigation Event handler type: click")],t.prototype,"clickListener",null),ot([G("Keyboard navigation Event handler type: focus")],t.prototype,"focusListener",null),ot([G("Keyboard navigation Event handler type: keydown")],t.prototype,"keyDownListener",null),ot([G("Keyboard navigation Event handler type: mouseover")],t.prototype,"mouseOverListener",null),ot([G("Event handler type: scroll")],t.prototype,"scrollListener",null),t}(),Te=function(){function t(){var t=this;this.ca=null,this.fa=[{boundElement:document,type:"selectionchange",listener:function(){return t.selectionChangeListener()}},{boundElement:document,type:"copy",listener:function(){return t.copyListener()}}]}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){csArray.prototype.forEach.call(this.fa,(function(t){return Fn(t)}))},t.prototype.stop=function(){csArray.prototype.forEach.call(this.fa,(function(t){return Hn(t)}))},t.prototype.flushPendingTextHighlightEvent=function(){this.ca&&this.aa(this.ca)},t.prototype.selectionChangeListener=function(){var t=document.getSelection();if(t)if(this.ca){var n=this.ca,i=n.anchorNode,r=n.anchorOffset;if(i===t.anchorNode&&r===t.anchorOffset){if(v(t.anchorNode)){var s=t.toString().length;s>this.ca.length&&(this.ca.length=s)}}else this.aa(this.ca)}else t.anchorNode&&v(t.anchorNode)&&0!==t.toString().length&&(this.ca={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,length:t.toString().length})},t.prototype.copyListener=function(){this.ca&&this.va()},t.prototype.aa=function(t){var n={type:vs.TEXT_HIGHLIGHT,ts:0,len:t.length};this.fi(n),this.va()},t.prototype.va=function(){this.ca=null},ot([G("Text highlight event handler type: selectionChange")],t.prototype,"selectionChangeListener",null),ot([G("Text highlight event handler type: copy")],t.prototype,"copyListener",null),t}(),Re="v2/events",ke=["submit"],Oe=function(){function t(t,n,i,r,s,e,u,h,o,c){this.U=t,this.Y=n,this.X=i,this.Kc=r,this.gn=s,this.lo=e,this.Ii=u,this.Zu=h,this.Ho=o,this.ff=c}return t.prototype.init=function(){var t=this,n=new Ks({stringCompression:this.ff});this.da=this.wa(),this.ya=this.pa(n,this.da.getRecoveryStorage()),this.ya.init(),this.Ho.addListeners(this.ya),this.lo.register(ke,(function(n,i){t.ya.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.da.start(),this.ya.start(t)},t.prototype.onAfterNaturalPageView=function(){this.ya.initStates()},t.prototype.onAfterArtificialPageView=function(){this.ya.initStates(),this.ya.collectInitialEvents()},t.prototype.onBeforeArtificialPageView=function(){this.ya.clearStates()},t.prototype.onBeforeSessionRenewal=function(){this.ya.clearStates(),this.ya.stop(),this.da.stop()},t.prototype.onOptout=function(){this.ya.stop(),this.da.stop()},t.prototype.pa=function(t,i){var r,s,e,u,h=new ks(window),o=new Ws,c=new Gs(this.U,this.Kc,this.gn),f=new Ms(this.U,this.Kc,this.Zu),a=new $s(new pe),v=new me;this.U.accessibilityEnabled&&(r=new ge,s=new Ne,e=new Te,Ee.isSupported()&&(u=new Ee(Se)));var l=new Un(this.U.getTrackerUri(),Re),d=new Ar(this.U.getTrackerUri(),Re),w=new ji(this.U,this.Y,this.X,o,h,n);return new Bs(this.U,c,f,o,h,t,l,d,w,this.Ii,this.X,i,this.Kc,a,v,r,s,u,e)},t.prototype.wa=function(){var t=new Un(this.U.getTrackerUri(),Re);return new Ys(t,new Xs("csAnalysisEventsPersisted"),this.ff)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Ae||(Ae={}));var Ie=function(){function t(){this.ma=Ae.Natural}return t.prototype.setPageViewType=function(t){this.ma=t},t.prototype.getRequestParameters=function(){return{pvt:this.ma}},t}(),xe=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.ni=n,e.ga=i,e.$=r,e.Aa=s,e}return ut(n,t),n.prototype.init=function(){this.Ea()},n.prototype.onStart=function(t){t?this.Sa():this.ba()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.Na(t):this.$.overridePath(t)},n.prototype.ba=function(){this.Aa.setPageViewType(Ae.Natural),this.ni.emitBeforeNaturalPageView(),this.ga.send(),this.ni.emitAfterNaturalPageView()},n.prototype.Sa=function(){this.Aa.setPageViewType(Ae.Renewal),this.ni.emitBeforeNaturalPageView(),this.ga.send(),this.ni.emitAfterNaturalPageView()},n.prototype.Na=function(t){this.Aa.setPageViewType(Ae.Artificial),this.ni.emitArtificialPageViewEnd(),t&&this.$.overridePath(t),this.ni.emitBeforeArtificialPageView(),this.ga.send(),this.ni.emitAfterArtificialPageView()},n.prototype.Ea=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.Na()}))},n}(wi),Le=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Ce(){return{la:Le}}var _e,Me=function(){function t(t){this.Ta=t,this.Ra=[],this.ka=!1}return t.prototype.getRequestParameters=function(){return{dr:this.Oa()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.Ta.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Ra,n)},t.prototype.enableRemoveQueryString=function(){this.ka=!0},t.prototype.disableRemoveQueryString=function(){this.ka=!1},t.prototype.Oa=function(){var t=this.ka?this.Ta.removeQueryString(this.Ia()):this.Ia();return this.Ta.anonymizeUrl(t,this.Ra)},t.prototype.Ia=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),t},t}(),De=function(){function t(t){this.X=t,this.xa=this.La()&&"currentScript"in document}return t.prototype.Ca=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this._a(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype._a=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.xa||1!==this.xo())return{};var t=this.Ca();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.xo=function(){var t;return(null===(t=this.X.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.La=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Pe=["trackPageview"],Ue=["setPath"],je=["setQuery"],qe=["referrer:maskUrl"],Fe=["referrer:removeQueryString"],He=["referrer:keepQueryString"],Ve=function(){function t(t,n,i,r,s,e,u,h,o,c){this.U=t,this.lo=n,this.ni=i,this.Y=r,this.X=s,this.fo=e,this.Tt=u,this.Ta=h,this.$=o,this.yo=c}return t.prototype.init=function(){var t=this,r=new yt(this.U.getTrackerUri(),"pageview"),s=new Ie;this.Ma=new xe(this.ni,r,this.$,s);var e=new Me(this.Ta);this.Ma.init(),r.setRequestParametersProviders(this.U,this.Y,this.X,hi,e,this.$,this.fo,i,this.Tt,n,s,new De(this.X),this.yo),this.lo.register(Pe,(function(n){return t.Ma.triggerArtificialPageView(n)})),this.lo.register(Ue,(function(n){return t.$.overridePath(n)})),this.lo.register(je,(function(n){return t.$.overrideQuery(n)})),this.lo.register(qe,(function(t){return e.addUrlMaskingPattern(t)})),this.lo.register(Fe,(function(){return e.enableRemoveQueryString()})),this.lo.register(He,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Ma.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Ma.stop()},t}(),ze=function(){function t(t){this.hc=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.hc.hasValidEventTarget(r)&&i.Da(r,t)&&n(r)}},t.prototype.Da=function(t,n){var i=Zn(t);return W.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!W},t}(),Je=function(){function t(){}return t.prototype.onLoad=function(t){this.dn=t},t.prototype.onLoadCallbackExecute=function(){this.dn()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.Pa(t)},t.prototype.Pa=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},ot([G("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),Ge=["clearSession"],We=["extendSession"],Be=function(){function t(t,n,i){this.Y=t,this.X=n,this.lo=i}return t.prototype.init=function(){var t=this;this.lo.register(Ge,(function(){return t.X.removeSession()})),this.lo.register(We,(function(){return t.X.extendSessionPeriodically()}))},t.prototype.onBeforeNaturalPageView=function(){this.Y.createOrUpdateVisitor(),this.X.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.X.abortQuotaServiceRequest(),this.Y.createOrUpdateVisitor(),this.X.createOrUpdateSession()},t.prototype.onOptout=function(){this.Y.removeVisitor(),this.X.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.X.updateRecordingState(t,n)},t}(),Ke=function(){function t(t,n){this.X=t,this.Y=n,this.Ua=!1}return t.prototype.onSessionExpired=function(t){this.ja=t},t.prototype.isSessionValid=function(){if(this.Ua)return!0;var t=this.X.hasValidSession(),n=!1;return this.X.pollCacheRefreshEvent()&&(n=this.Y.isSessionRenewed()),t&&!n||!this.qa()?t:(this.Fa=Rt(),this.Ua=!0,this.ja(),this.Ua=!1,this.X.hasValidSession())},t.prototype.qa=function(){return!F(this.Fa)||Rt()-this.Fa>6e4},t}(),Ye=function(t){function n(n,i,r,s,e,u,h){var o=t.call(this)||this;return o.$=n,o.Ha=i,o.Xc=r,o.Va=s,o.za=e,o.Ja=u,o.Ga=h,o}return ut(n,t),n.prototype.init=function(){this.Va.init(),this.Wa(),this.Ba(),this.Ka()},n.prototype.collectInitialProducts=function(){var t=this.Ha.collectProductsAndAnchors(),n=t.products,i=t.anchors;this.Ya(i),this.Va.send(this.Xa(n))},n.prototype.Ya=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){n.Ga.pushProduct(t)}))},n.prototype.onIframeEmerchandisingMessage=function(t){this.Va.send(t)},n.prototype.clearState=function(){this.Ja.clearState(),this.Ha.flushEvents(),this.za.isEmpty()||this.$a(!1)},n.prototype.initStates=function(){this.Va.initStates()},n.prototype.onStart=function(){this.Xc.start(),this.Ha.start(),this.Ja.start()},n.prototype.onStop=function(){this.Xc.stop(),this.Ha.stop(),this.Ja.stop()},n.prototype.Ka=function(){var t=this;this.Ja.onProductExposed((function(n){t.za.addProductExposure(n),t.za.isFull()&&t.$a(!1)}))},n.prototype.Xa=function(t,n){void 0===n&&(n=[]);var i={products:t,targetUrl:this.$.getAnonymizedUrl(),windowWidth:hi.windowWidth(),windowHeight:hi.windowHeight()};return n.length>0&&(i.exposures=n),i},n.prototype.Wa=function(){var t=this;this.Ha.init(),this.Ha.onProductsDetection((function(n){var i=n.products,r=n.anchors;t.za.addProducts(i),t.za.isFull()&&t.$a(!1),t.Ya(r)}))},n.prototype.Ba=function(){var t=this;this.Xc.onEvent((function(){t.Ja.clearState(),t.Za()}))},n.prototype.Za=function(){this.za.isEmpty()||this.$a(!0)},n.prototype.$a=function(t){var n=this.Xa(this.za.getProducts(),this.za.getProductsExposure());t?this.Va.sendBeacon(n):this.Va.send(n)},n}(wi),Xe=function(){function t(t,n){this.configuration=t,this.projectPathComputation=n}return t.prototype.collectProductsAndAnchors=function(t){void 0===t&&(t=document);for(var n=[],i=this.getAllValidAnchors(this.configuration.hostnames,t),r=0,s=i;r<s.length;r++){var e=s[r];csArray.prototype.push.call(n,this.buildProductFromAnchor(e))}return{products:n,anchors:i}},t.prototype.getAllValidAnchors=function(t,n){var i=this;return void 0===n&&(n=document),csArray.prototype.filter.call(ci.findAllElements("a",n),(function(n){return i.isAnchorValid(n,t)}))},t.prototype.isAnchorValid=function(t,n){return("https:"===t.protocol||"http:"===t.protocol)&&t.offsetHeight>0&&t.offsetWidth>0&&""!==t.hostname&&Ut(t.hostname,n)},t.prototype.buildProductFromAnchor=function(t){return{targetPath:this.projectPathComputation.getElementPath(t),href:t.href}},ot([$n("getAllValidAnchors")],t.prototype,"getAllValidAnchors",null),t}(),$e=function(t){function n(n,i,r){var s=t.call(this,n,i)||this;return s.Qn=r,s.Qa={subtree:!0,childList:!0},s}return ut(n,t),n.prototype.init=function(){this.le()},n.prototype.start=function(){this.Qn.start(),this.tv()},n.prototype.stop=function(){this.Qn.stop()},n.prototype.flushEvents=function(){this.Qn.flushPendingMutations()},n.prototype.onProductsDetection=function(t){this.nv=t},n.prototype.le=function(){this.Qn.init(),this.iv()},n.prototype.iv=function(){var t=this;this.Qn.onChildListMutation((function(n){return t.rv(n)})),this.Qn.onAttachShadowMutation((function(n){return t.sv(n)}))},n.prototype.rv=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];if(l(i)&&this.isAnchorValid(i,this.configuration.hostnames)){var r=this.buildProductFromAnchor(i);this.ev({products:[r],anchors:[i]})}else if(z(i)){var s=this.collectProductsAndAnchors(i);this.ev(s)}}},n.prototype.sv=function(t){var n=t.shadowRoot;this.ev(this.collectProductsAndAnchors(n)),this.Qn.observe(n,this.Qa)},n.prototype.ev=function(t){t.products.length>0&&this.nv(t)},n.prototype.tv=function(){this.Qn.observe(document,this.Qa),this.uv(document)},n.prototype.uv=function(t){var n=this,i=ui.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){t.shadowRoot&&n.Qn.observe(t.shadowRoot,n.Qa)}))},n}(Xe),Ze=function(){function t(n){void 0===n&&(n=t.hv),this.yi={},this.ov=[],this.cv=[],this.fv=new ai(n)}return t.prototype.addProducts=function(t){var n;this.fv.addString(csJSON.stringify(t)),(n=csArray.prototype.push).call.apply(n,at([this.ov],t,!1))},t.prototype.addProductExposure=function(t){this.fv.addString(csJSON.stringify(t)),csArray.prototype.push.call(this.cv,t)},t.prototype.reset=function(){this.fv.reset(),this.ov=[],this.cv=[]},t.prototype.isEmpty=function(){return 0===this.ov.length&&0===this.cv.length},t.prototype.isFull=function(){return this.fv.isThresholdReached()},t.prototype.getProducts=function(){return this.ov},t.prototype.getProductsExposure=function(){return this.cv},t.prototype.setRequestParametersFromProvider=function(t){var n=t.getRequestParameters();for(var i in n)n.hasOwnProperty(i)&&(this.yi[i]=n[i])},t.prototype.getRequestParameters=function(){return ht({},this.yi)},t.hv=10240,t}(),Qe=function(t){function n(n,i){var r=t.call(this)||this;return r.U=n,r.ru=i,r.av="function"==typeof window.IntersectionObserver,r}return ut(n,t),n.prototype.onProductExposed=function(t){this.vv=t},n.prototype.clearState=function(){this.av&&this.isStarted&&this.lv()},n.prototype.onStart=function(){this.av&&(this.wv=new Map,this.yv())},n.prototype.onStop=function(){this.av&&(this.lv(),this.ru.stop(),this.wv.clear())},n.prototype.yv=function(){var t=this;this.ru.onVisibilityChange((function(n,i){i===vr.VisibleInViewPort?t.pv(n):t.mv(n)})),this.ru.start()},n.prototype.lv=function(){var t=this;this.wv.forEach((function(n,i){t.mv(i)})),this.wv.clear()},n.prototype.pv=function(t){this.wv.set(t,Rt())},n.prototype.mv=function(t){var i=this.wv.get(t);if(void 0!==i){var r=Rt()-i;this.wv.delete(t),r<n.EXPOSURE_DURATION_THRESHOLD||this.vv(this.gv(t,r))}},n.prototype.gv=function(t,n){var i=t.href;return{targetPath:it.getElementPath(t,{dynamicIdRegex:this.U.dynamicIdRegex}),duration:n,href:i}},n.EXPOSURE_DURATION_THRESHOLD=150,n}(wi),tu=function(){function t(){var t=this;this.Ke=new pr((function(n){return n.isConnected&&t.Xe(n)}))}return t.prototype.onElementAvailable=function(t){this.Xe=t},t.prototype.pushProduct=function(t){this.Ke.push(t)},t.prototype.getElements=function(t){return ft(this,(function(t){return[2]}))},t}(),nu=function(){function t(t,n,i,r,s){this.Av=t,this.Ev=n,this.za=i,this.an=r,this.Sv=s}return t.prototype.init=function(){this.bv(),this.Nv()},t.prototype.initStates=function(){this.Tv(!0)},t.prototype.send=function(t){this.Rv(t)},t.prototype.sendBeacon=function(t){this.kv(t)},t.prototype.bv=function(){var t=this,n=ur.isCompressionEnabled();n&&this.Ov(),this.Av.afterProvidersCalled((function(){t.za.reset()})),this.Av.setRequestParametersProviders(this.za),this.Av.after((function(){t.Tv(n)}))},t.prototype.Tv=function(t){var n=this;this.za.setRequestParametersFromProvider(new ji(this.Sv,{getRequestParameters:function(){return{ct:t?n.an.algorithm:Nn.UNCOMPRESSED}}}))},t.prototype.Nv=function(){var t=this;this.Ev.before((function(){t.Tv(!1)})),this.Ev.setRequestParametersProviders(this.za),this.Ev.after((function(){t.za.reset(),t.Tv(!0)}))},t.prototype.Rv=function(t){this.Av.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Av.send()},t.prototype.kv=function(t){this.Ev.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(t)}}),this.Ev.send()},t.prototype.Ov=function(){this.Av.setCompressionOptions(this.an,"base64"),this.Av.setRequestHeader({name:"Content-type",value:"text/plain; charset=UTF-8"})},t}(),iu="display",ru=function(){function t(t,n,i,r,s,e,u,h){this.U=t,this.Kc=n,this.an=i,this.Iv=r,this.Tt=s,this.$=e,this.Ho=u,this.lo=h}return t.prototype.init=function(){var t=new tr(new er),n=new $e(this.U,this.Kc,t),i=new me,r=new Ze,s=new tu,e=new Qe(this.U,new lr(s,{trackOnce:!1})),u=new nu(new Un(this.U.getTrackerUri(),iu),new Ar(this.U.getTrackerUri(),iu),r,this.an,new ji(this.Iv,this.Tt));this.xv=new Ye(this.$,n,i,u,r,e,s),this.xv.init(),this.Ho.addListeners(this.xv)},t.prototype.onStartTracking=function(){this.xv.start(),this.xv.collectInitialProducts()},t.prototype.onArtificialPageViewEnd=function(){this.xv.clearState()},t.prototype.onAfterNaturalPageView=function(){this.xv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.xv.initStates(),this.xv.collectInitialProducts()},t.prototype.onBeforeSessionRenewal=function(){this.xv.clearState(),this.xv.stop()},t.prototype.onOptout=function(){this.xv.stop()},ot([$n("Emerch.onStartTracking")],t.prototype,"onStartTracking",null),t}();function su(t){return t.tagDeploymentMode===_e.DualCollectionReview||t.tagDeploymentMode===_e.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION"}(_e||(_e={}));var eu,uu=function(){function t(t,n,i,r){this.U=t,this.Y=n,this.X=i,this.En=r}return t.prototype.init=function(){this.Lv=!1,this.Cv=!1},t.prototype.loadClicktalePtc=function(){!this.Lv&&this.U.ptcDomain&&this.U.ptcGuid&&this._v()},t.prototype.getSessionData=function(){var t=this.U.projectId,n=this.Y.getVisitor();null==n&&J.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,s=i.visitsCount,e=this.X.getSession();return null===e&&J.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:s,pageNumber:(null!=e?e:{}).pageNumber}},t.prototype.startDataCollection=function(t){this.Cv||(this.U.tagDeploymentMode===_e.LoadClicktalePtc&&this.Mv()&&this.En.initCTPII(),su(this.U)&&(this.En.initCTPII(),t(),this.Cv=!0))},t.prototype.Mv=function(){return this.U.useMalkaPipeline&&this.X.isReplayRecorded()},t.prototype._v=function(){this.Lv=!0;var t=this.Dv();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.Dv=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.U.ptcSha512&&this.U.ptcSnapshotPath?(t.integrity="sha512-".concat(this.U.ptcSha512),t.src="https://".concat(this.U.ptcDomain,"/").concat(this.U.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.U.ptcDomain,"/ptc/").concat(this.U.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(eu||(eu={}));var hu,ou=function(){function t(t,n,i,r,s,e,u){this.U=t,this.Y=n,this.X=i,this.$=r,this.lo=s,this.Pv=e,this.En=u}return t.prototype.init=function(){var t=this;this.Uv=new uu(this.U,this.Y,this.X,this.En),this.Uv.init(),this.jv(),this.lo.register(["getSessionData"],(function(){return t.Uv.getSessionData()})),this.lo.register(["startDataCollection"],(function(){t.Uv.startDataCollection(t.Pv)}))},t.prototype.jv=function(){su(this.U)&&this.Uv.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.U.tagDeploymentMode===_e.LoadClicktalePtc&&(!this.U.useMalkaPipeline&&this.X.isReplayRecorded()||this.Uv.loadClicktalePtc())},t.prototype.onAfterArtificialPageView=function(){!this.X.isReplayRecorded()&&eu.isRecording()&&this.U.tagDeploymentMode===_e.LoadClicktalePtc&&eu.triggerLogicalPageView(this.$.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.X.isReplayRecorded()&&eu.isRecording()&&eu.triggerLogicalPageView(this.$.getAnonymizedUrl())},t.prototype.onOptout=function(){eu.isRecording()&&eu.stopRecording()},t}(),cu="@user-identifier@",fu=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.U=n,u.qv=i,u.an=r,u.Fv=s,u.Hv=e,u.Vv=[],u.zv=[],u}return ut(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Vv,(function(n){return t.trackPageEvent(n)})),this.Vv=[],csArray.prototype.forEach.call(this.zv,(function(n){return t.trackEventTriggerRecording(n)})),this.zv=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.Jv(t)&&(this.Gv(t)?this.Hv.isSupported()&&this.Wv(t):this.Bv(t)):csArray.prototype.push.call(this.Vv,t)},n.prototype.Gv=function(t){return I(t,cu)},n.prototype.Wv=function(t){return ct(this,void 0,void 0,(function(){var n,i;return ft(this,(function(r){switch(r.label){case 0:return this.U.customHashIdEnabled?(n=csString.prototype.slice.call(t,cu.length),this.Hv.isValidInput(n)?[4,this.Hv.digest(n,this.U.projectId)]:(J.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this.Kv={eventName:i,isETR:!1,isCustomHashId:!0},this.Yv()):J.warn("Page event: unable to compute customHashId"),this.U.encryptionEnabled?(this.Fv.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.Bv=function(t){this.Fv.emitPageEvent(t),this.Kv={eventName:t,isETR:!1,isCustomHashId:!1},this.Yv(),this.U.tagDeploymentMode===_e.LoadClicktalePtc&&eu.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.Jv(t)&&(this.U.useMalkaPipeline&&this.U.malkaEtrEnabled?this.Xv(t):this.$v(t)):csArray.prototype.push.call(this.zv,t)},n.prototype.Xv=function(t){I(t,"@ETP@")?this.Fv.emitEventTriggerRecording(t,sn.ETR_PAGE):this.Fv.emitEventTriggerRecording(t,sn.ETR_SESSION),this.Kv={eventName:t,isETR:!0,isCustomHashId:!1},this.Yv()},n.prototype.$v=function(t){(function(t){return su(t)||t.tagDeploymentMode===_e.LoadClicktalePtc})(this.U)&&(this.Fv.emitEventTriggerRecording(t,sn.ETR_LEGACY),this.Kv={eventName:t,isETR:!0,isCustomHashId:!1},this.Yv(),this.U.tagDeploymentMode===_e.LoadClicktalePtc&&eu.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.an.compressSync(this.Kv.eventName),ct:this.an.algorithm,isETR:"".concat(this.Kv.isETR),isCustomHashId:"".concat(this.Kv.isCustomHashId)}},n.prototype.Yv=function(){this.qv.send()},n.Jv=function(t){return j(t)&&!!csString.prototype.trim.call(t)},n}(wi),au=function(){function t(t){this.Zv=t,this.Qv=!1}return t.prototype.init=function(){this.Qv=this.tl(),this.Qv&&(this.xu=new TextEncoder)},t.prototype.tl=function(){return!!(this.Zv&&this.Zv.subtle&&this.Zv.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.isSupported=function(){return this.Qv},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.nl=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t.prototype.digest=function(t,n){return ct(this,void 0,void 0,(function(){var i,r,s;return ft(this,(function(e){switch(e.label){case 0:if(!this.Qv)return[2,null];i=this.nl(t,n),r=this.xu.encode(i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return s=e.sent(),[2,(u=s,h=csArray.from(new Uint8Array(u)),csArray.prototype.join.call(csArray.prototype.map.call(h,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),""))];case 3:return e.sent(),[2,null];case 4:return[2]}var u,h}))}))},t}(),vu=["trackPageEvent"],lu=["trackEventTriggerRecording"],du=function(){function t(t,n,i,r,s){this.U=t,this.lo=n,this.an=i,this.vo=r,this.Fv=s}return t.prototype.init=function(){var t=this,n=new yt(this.U.getTrackerUri(),"pageEvent"),i=new au(window.crypto);i.init(),this.il=new fu(this.U,n,this.an,this.Fv,i),n.setRequestParametersProviders(this.il,this.vo),this.lo.register(vu,(function(n){t.il.trackPageEvent(n)})),this.lo.register(lu,(function(n){t.il.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.il.start()},t}();!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(hu||(hu={}));var wu,yu=["value","checked","src","data","alt"],pu=["[data-cs-mask]","img[src^='data:']","script"],mu=[{selector:"input:not([type=button])",attrName:"value"}],gu=[".ctHidden, textarea"],Au=[{selector:".ctHidden, input:not([type=button])",attrName:"value"}],Eu=function(){function t(t){var n;this.U=t,this.rl=[],this.sl="",this.Eu=document.createElement("div"),su(this.U)||(this.sl=this.el(this.sl,pu),(n=csArray.prototype.push).call.apply(n,at([this.rl],mu,!1)))}return t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return B(t,i.Eu)}));this.sl=this.el(this.sl,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&B(t.selector,i.Eu)&&!i.ul(t)&&csArray.prototype.push.call(i.rl,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.sl],Attributes:this.rl}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.sl=this.el(this.sl,gu),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var s=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return B(t,r.Eu)}));this.sl=this.el(this.sl,s),(t=csArray.prototype.push).call.apply(t,at([this.rl],Au,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&B(t.rule,r.Eu)&&csArray.prototype.push.call(r.rl,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(yu,n)||this.hl(t,n,this.rl)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===hu.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===hu.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(a(t)||A(t)){this.ol(t);var i=ui.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return t.shadowRoot&&n.ol(t.shadowRoot)}))}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(a(t)||A(t)){this.cl(t);var i=ui.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return t.shadowRoot&&n.cl(t.shadowRoot)}))}},t.prototype.cl=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.ol=function(t){var n=this;if(this.al(t))return this.vl(t),void this.ll(t);this.dl(t,this.sl)?(this.wl(t),this.ll(t)):si(t.querySelectorAll(this.sl),(function(t){n.yl(t)||(n.wl(t),n.ll(t))}))},t.prototype.yl=function(t){return w(t)&&I(t.src,"data:image/svg+xml")&&t.src.length<=1024},t.prototype.wl=function(t){t.__contentsquare_sensitive=hu.Sensitive},t.prototype.vl=function(t){t.__contentsquare_sensitive=hu.SensitiveChild},t.prototype.ll=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.vl(i),i=n.nextNode()},t.prototype.al=function(t){return!(!csNodeparentNode.apply(t)||!a(csNodeparentNode.apply(t))&&!A(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||S(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.dl=function(t,n){return a(t)&&W.call(t,n)},t.prototype.hl=function(t,n,i){return csArray.prototype.some.call(i,(function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&W.call(t,i.selector)}))},t.prototype.el=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=t,r=0,s=n;r<s.length;r++)for(var e=s[r],u=0,h=csString.prototype.split.call(e,",");u<h.length;u++){var o=h[u];-1===csString.prototype.indexOf.call(i,o)&&(i+=",".concat(o))}return i},t.prototype.ul=function(t){return csArray.prototype.some.call(this.rl,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),Su=function(){function t(t){this.lo=t}return t.prototype.init=function(){this.pl(t.ml,Ct),this.pl(t.gl,Lt)},t.prototype.pl=function(t,n){this.lo.register([t],(function(t,i){j(t)&&j(i)&&J.error(i,"".concat(n).concat(t))}))},t.gl="logSnippetError",t.ml="logImplementationSnippetError",t}(),bu=function(){function t(t,n,i,r){this.U=t,this.Fo=n,this.ao=i,this.Ho=r}return t.prototype.init=function(){var t=this;this.Fo.onChildMessage((function(n,i,r){return t.Ho.emitIframeEvent(n,i,r)})),this.Fo.setRecordingStatusCallback((function(){return t.ao.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.U.iframesTracking&&this.Fo.start()},t.prototype.onOptout=function(){this.U.iframesTracking&&this.Fo.stop()},t.prototype.onRecordingStatusChange=function(){this.U.iframesTracking&&this.Fo.onRecordingStatusChange(this.ao.getRecordingStatus())},t}(),Nu=function(t){function n(n,i){var r=t.call(this)||this;return r.U=n,r.En=i,r.Al=0,r.El=new Map,r.Sl={boundElement:window,type:"message",listener:function(t){return r.bl(t)}},r}return ut(n,t),n.prototype.onChildMessage=function(t){this.Nl=t},n.prototype.setRecordingStatusCallback=function(t){this.Tl=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=Ht.buildBaseMessage(Ft.RecordingStatus,qt.Parent,this.U.projectId);i.content=t,this.El.forEach((function(t){!n.Rl(t)&&t.port&&Ht.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=Ht.buildBaseMessage(t,qt.Parent,this.U.projectId);i.content=n,this.kl(i)},n.prototype.onStart=function(){Fn(this.Sl,!1),this.Ol()},n.prototype.onStop=function(){this.Il(),Hn(this.Sl,!1),this.xl()},n.prototype.Ol=function(){var t=this,n=this.Ll();this.Cl(n),csArray.prototype.forEach.call(n,(function(n){if(null===t._l(n)){var i={iframe:n};t.El.set(t.Al,i),t.Al+=1}})),this.Ml()},n.prototype.Ll=function(){var t=this;return csArray.prototype.filter.call(ci.findAllElements("iframe"),(function(n){return t.Dl(n)}))},n.prototype.Cl=function(t){var n=this;this.El.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.Pl(r,i)}))},n.prototype.Pl=function(t,n){n.port&&Ht.closeChannelPort(n.port),this.El.delete(t)},n.prototype.xl=function(){this.El.forEach((function(t){t.port&&Ht.closeChannelPort(t.port)})),this.El.clear()},n.prototype._l=function(t){var n=null;return this.El.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.Dl=function(t){return t.id!==r&&(!t.src||Ut(Pt(t.src),this.U.hostnames))},n.prototype.kl=function(t){this.El.forEach((function(n){n.port&&Ht.sendChannelMessage(n.port,t)}))},n.prototype.Ml=function(){var t=this;this.El.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Ul(i);Ht.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.Il=function(){var t=this.jl();this.El.forEach((function(n){n.port?Ht.sendChannelMessage(n.port,t):n.iframe.contentWindow&&Ht.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Ul=function(t){return Ht.buildBaseMessage(Ft.Discovery,qt.Parent,this.U.projectId,t)},n.prototype.jl=function(){return Ht.buildBaseMessage(Ft.Stop,qt.Parent,this.U.projectId)},n.prototype.ql=function(t,n){var i=this,r=this.El.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.Fl(t,r)}):J.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Al,")"))},n.prototype.Hl=function(t){if(t.port){var n=Ht.buildBaseMessage(Ft.RecordingStatus,qt.Parent,this.U.projectId),i=this.Tl();this.Rl(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,Ht.sendChannelMessage(t.port,n)}},n.prototype.Fl=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===Ft.EndOfBufferedMessages?this.Hl(n):this.Nl(n.iframe,i,r)}else J.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.bl=function(t){if(Ht.isMessageValid(t,qt.Child,this.U.projectId,this.U.hostnames))switch(t.data.type){case Ft.Discovery:if(void 0===t.data.id)return void this.Ol();if(t.ports&&1===t.ports.length&&this.El.has(t.data.id))return void this.ql(t.data.id,t.ports[0]);J.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case Ft.ChildLogMessage:this.Nl(null,Ft.ChildLogMessage,t.data.content);break;default:J.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Rl=function(t){return this.En.isSensitive(t.iframe)||this.En.isSensitiveChild(t.iframe)},n}(wi),Tu=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.Vl(n.x)-this.Vl(t.x),r=this.Vl(n.y)-this.Vl(t.y),s=n.time-t.time;return{duration:s,distance:this.zl(i,r),direction:this.Jl(i,r),velocity:this.Gl(i,r,s)}},t.prototype.computePinchMetrics=function(t,n){var i=this.Vl(n.x)-this.Vl(t.x),r=this.Vl(n.y)-this.Vl(t.y);return{duration:n.time-t.time,distance:this.zl(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.Vl=function(t){return t/window.devicePixelRatio},t.prototype.zl=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.Gl=function(t,n,i){var r=i/1e3,s=t/r,e=n/r;return Math.round(Math.abs(s)+Math.abs(e))},t.prototype.Jl=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?wr.RIGHT:wr.LEFT:n>0?wr.DOWN:wr.UP},t}(),Ru=function(){function t(){this.Wl={},this.Bl=new Tu,this.Kl()}return t.prototype.onGesture=function(t){this.Yl=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.Xl(t)){this.$l(t)&&this.Kl();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Rt()};if(1===t.touches.length)this.Wl.startPinchTime=n.time,this.Wl.firstTouch=n;else if(2===t.touches.length&&(this.Wl.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Rt()},this.Wl.firstTouch&&this.Wl.secondTouch)){var i=this.Bl.computePinchMetrics(this.Wl.firstTouch,this.Wl.secondTouch);this.Zl=i.distance}csArray.prototype.push.call(this.Ql,n),this.td=Zn(t)}},t.prototype.processActionMove=function(){this.nd=!0},t.prototype.processActionUp=function(t){if(this.rd(t)){if(csArray.prototype.push.call(this.Ql,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Rt()}),this.sd(t)&&this.Wl.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Wl.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Rt()};this.Wl.firstTouch&&(this.Wl.firstTouch=n,this.Wl.secondTouch=i),this.ud(t)}this.Zl||this.od()&&this.ad(t)}},t.prototype.Kl=function(){this.Ql=[],this.td=null,this.nd=!1,this.Zl=null},t.prototype.ad=function(t){var n=this.Bl.compute(this.Ql[0],this.Ql[1]),i=this.nd?this.vd(n):this.ld(n);this.Yl(i,t)},t.prototype.ud=function(t){if(this.Wl.firstTouch&&this.Wl.secondTouch){var n=this.Bl.computePinchMetrics(this.Wl.firstTouch,this.Wl.secondTouch),i=this.dd(n);i&&this.Yl(i,t)}},t.prototype.dd=function(t){if(this.Zl&&!(this.Bl.getScale(this.Zl,t.distance)<.1))return{type:this.Zl>t.distance?dr.PINCH_IN:dr.PINCH_OUT,target:this.td,distance:t.distance}},t.prototype.vd=function(t){return{type:t.velocity<100?dr.DRAG:dr.FLICK,target:this.td,velocity:t.velocity,distance:t.distance,direction:t.direction}},t.prototype.ld=function(t){return{type:t.duration<1e3?dr.TAP:dr.LONG_PRESS,target:this.td}},t.prototype.$l=function(t){return 1===t.touches.length},t.prototype.od=function(){return 2===this.Ql.length},t.prototype.Xl=function(t){return t.touches.length>0},t.prototype.rd=function(t){return t.changedTouches.length>0},t.prototype.sd=function(t){return this.nd&&!!this.Zl&&1===t.changedTouches.length&&1===t.touches.length},t}(),ku=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}(),Ou=function(t){function n(n){var i=t.call(this)||this;return i.wd=n,i.Ds=[{boundElement:document,type:"touchstart",listener:function(t){return i.Qi(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.Qi(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.Qi(t)}}],i.yd=new Ru,i.yd.onGesture((function(t,n){return i.th(t,n)})),i}return ut(n,t),n.prototype.th=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ds,(function(t){return Fn(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ds,(function(t){return Hn(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.Qi=function(t){var n=this;this.wd.tryToExecute("process gesture event",(function(){if(n.yd.isValidTouchEvent(t))switch(t.type){case"touchstart":n.yd.processActionDown(t);break;case"touchmove":n.yd.processActionMove();break;case"touchend":n.yd.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===dr.FLICK||t.type===dr.DRAG},n}(ku),Iu=function(t){function n(n,i){var r=t.call(this)||this;return r.Av=n,r.pd=i,r.md=0,r}return ut(n,t),n.prototype.onStart=function(){var t=this;J.isPerfLoggingActive()&&(this.gd=window.setInterval((function(){return t.Ad()}),n.Ed))},n.prototype.onStop=function(){J.isPerfLoggingActive()&&(this.Ad(),clearInterval(this.gd))},n.prototype.Ad=function(){if(!(Vn.isEmpty()||this.md>=n.Sd)){var t=Vn.getAll();this.md++;var i=ht({a:n.bd,l:n.Nd},this.pd.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return ht(ht({},t),i)}));this.Av.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify(r)}}),this.Av.after((function(){Vn.clear()})),this.Av.send(!1)}},n.bd="uxa",n.Nd="perf",n.Ed=5e3,n.Sd=5,n}(wi),xu=function(){function t(t,n){this.U=t,this.pd=n}return t.prototype.init=function(){this.Td=new Iu(new Un(this.U.getLoggerUri(),""),this.pd)},t.prototype.onStartTracking=function(){this.Td.start()},t.prototype.onOptout=function(){this.Td.stop()},t}(),Lu=function(){function t(){this.Rd=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r){this.Rd=!0,this.bo=t,this.En=n,this.Eo=i,this.po=r},t.prototype.getRecordingStatus=function(){return this.Rd?{isRecording:this.bo.isRecording(),isMutationTrackerStarted:this.bo.isMutationTrackerStarted(),PIISelectors:this.En.getPIISelectors(),capturedElementSelector:this.po.getWhitelistedElementsSelector(),useAnonymization:this.Eo.shouldUseAnonymization()}:{isRecording:!1}},t}(),Cu=function(){function t(t,n,i,r,s,e,u,h,o,c,f,a,v,l,d,w,y,p,m,g,A,E,S,b,N,T,R){var k=this;this.Iv=t,this.an=n,this.Y=i,this.X=r,this.ni=s,this.lo=e,this.kd=u,this.U=h,this.Od=o,this.Id=c,this.xd=f,this.fo=a,this.j=v,this.Kc=l,this.Ta=d,this.$=w,this.Ld=y,this.Fv=p,this.Li=m,this.Ci=g,this._i=A,this.Di=E,this.Ho=S,this.Tt=b,this.Cd=N,this.yo=T,this._d=R,this.Md=function(t){void 0===t&&(t=!1),k.Dd.start(t),k.Pd.start()}}return t.prototype.start=function(){var t=this;if(this.Od.init(),this.Id.init(),!this.Id.isActive()){var n=new Ke(this.X,this.Y),i=new ze(this.Kc),r=new Ou(J),s=new Oe(this.U,this.Y,this.X,this.Kc,i,this.lo,n,r,this.Ho,this.an),e=new ys(this.lo,this.X,this.U,this.Iv,this.an,this.j),u=new Eu(this.U),h=new Lu,o=new Nu(this.U,u),c=new bu(this.U,o,h,this.Ho);c.init();var f=new hs(this.Y,this.X,this.lo,this.Ho,o,this.U),a=new Rs(this.U,this.Y,this.X,this.lo,this.j,n,this.$);this.Dd=new Ve(this.U,this.lo,this.ni,this.Y,this.X,this.fo,this.Tt,this.Ta,this.$,this.yo);var v=new Be(this.Y,this.X,this.lo),l=new ou(this.U,this.Y,this.X,this.$,this.lo,this.Md,u),d=new du(this.U,this.lo,this.an,this.Iv,this.Fv),w=new Su(this.lo),y=new xu(this.U,new xt(this.U,this.j));if(this.Pd=new Je,this.xd.init(),f.init(),e.init(),a.init(),this.Cd.init(),this.Dd.init(),v.init(),l.init(),d.init(),this.Ld.init(),w.init(),y.init(),this._d.init(),this.ni.addListeners(v,this.kd,s,this.xd,f,this.Cd,this.Dd,l,d,e,c,y),Yr.isRecordingSupported()&&this.an.isSupported()){var p=new ts(h,this.X,this.U,this.an,i,this.fo,this.Iv,this.lo,this.j,n,this.$,u,this.Li,this.Ci,this._i,r,this.Di,this.ni,this.Fv,this.Ho,this.yo);p.init(),this.ni.addListeners(p)}if(this.U.eMerchandisingEnabled){var m=new ru(this.U,this.Kc,this.an,this.Iv,this.Tt,this.$,this.Ho,this.lo);m.init(),this.ni.addListeners(m)}s.init(),n.onSessionExpired((function(){t.ni.emitBeforeSessionRenewal(),t.Ud(!0),t.ni.emitAfterSessionRenewal()})),this.Ud()}},t.prototype.Ud=function(t){var n=this;void 0===t&&(t=!1),this.lo.start(),this.Pd.onLoad((function(){n.ni.emitStartTracking(t)})),su(this.U)&&!t||this.Md(t)},t}(),_u=function(){function t(t,n,i,r,s,e,u,h){this.U=t,this.Y=n,this.Nt=i,this.jd=r,this.qd=s,this.Fd=e,this.kt=u,this.Hd=h}return t.prototype.compute=function(t){var n=this;this.U.crossDomainTracking&&!this.U.cookielessTrackingEnabled?this.U.crossDomainSingleIframeTracking?this.kt.start((function(){return n.Vd(t)})):this.Fd.applyUpToDate((function(){return n.Vd(t)})):this.Vd(t)},t.prototype.Vd=function(t){this.qd.handle(),this.jd.clear(),this.zd()?(this.jd.restoreClearedVisitor(),t(!0)):(this.Nt.exclude(this.U),t(!1))},t.prototype.zd=function(){var t=C.boolean(this.U.sampleRate);return this.Hd.isForceIncluded()||!this.Nt.isExcluded()&&this.Y.doesVisitorExist()||!this.Nt.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(wu||(wu={}));var Mu,Du=function(){function t(t,n,i){this.U=t,this.Jd=n,this.X=i}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.Gd(),this.X.removeSession()),this.Wd(t),this.setVisitor(t)},t.prototype.Gd=function(){return{id:wu.generate(),visitsCount:0,appliedTrackingDraw:this.U.lastTrackingDraw,creationTimestamp:kt(),lastVisitTimestamp:0,hitTimestamp:0,expires:Rt()+this.U.visitorCookieTimeout}},t.prototype.Wd=function(t){var n=kt();this.X.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.U.lastTrackingDraw,this.Bd=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.Jd.get()},t.prototype.setVisitor=function(t){this.Jd.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.Jd.get()},t.prototype.removeVisitor=function(){this.Jd.remove()},t.prototype.handleSubdomainChange=function(){this.Jd.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.Bd&&t.visitsCount!==this.Bd},t}(),Pu=function(){function t(t,n){this.configuration=t,this.compressor=n}return t.prototype.isCompressionSupported=function(){return this.compressor.isSupported()},t}(),Uu=function(t){function n(n,i,r,s){var e=t.call(this,n,i)||this;return e.configuration=n,e.compressor=i,e.Hd=r,e.$=s,e}return ut(n,t),n.prototype.sanitizeSessionRecordingState=function(t){return t},n.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&(this.Hd.isForceLegacyReplayRecorded()||C.percentage()<this.configuration.replayRecordingRate&&Yr.isRecordingSupported())?tn.REPLAY_RECORDING_ENABLED:tn.REPLAY_RECORDING_DISABLED},n.prototype.updateRecordingState=function(t){return t.recordingState},n.prototype.isReplayRecorded=function(t){return t.recordingState===tn.REPLAY_RECORDING_ENABLED||this.computeTriggerSessionReplayStatus(t)},n.prototype.computeTriggerSessionReplayStatus=function(t){if(this.configuration.triggerSessionReplayEnabled&&this.configuration.triggerSessionReplayRegex&&t.recordingState!==tn.REPLAY_RECORDING_ENABLED){var n=this.$.getAnonymizedUrl();return this.configuration.triggerSessionReplayRegex.test(n)}return!1},n.prototype.getDisabledRecordingState=function(){return tn.REPLAY_RECORDING_DISABLED},n.prototype.setVisitorService=function(t){},n}(Pu),ju=function(t){function n(n,i,r,s,e,u){var h=t.call(this,n,i)||this;return h.configuration=n,h.compressor=i,h.Kd=r,h.ni=s,h.Hd=e,h.$=u,h.Yd=[],h}return ut(n,t),n.prototype.init=function(){this.Xd()},n.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===nn.TEMPORARILY_RECORDED&&(t.recordingState=nn.NOT_RECORDED),t},n.prototype.computeInitialRecordingState=function(t){return this.isCompressionSupported()&&Yr.isRecordingSupported()?(this.Yd=[],C.percentage()<this.configuration.replayRecordingRate||this.Hd.isForceMalkaReplayRecorded()?csArray.prototype.push.call(this.Yd,nn.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.Yd,nn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Yd,nn.ETR_SAMPLING),this.Yd.length>0?(this.$d(t),nn.TEMPORARILY_RECORDED):nn.NOT_RECORDED):nn.NOT_RECORDED},n.prototype.updateRecordingState=function(t){return this.isCompressionSupported()&&Yr.isRecordingSupported()?t.recordingState===nn.GLOBAL_SAMPLING?nn.GLOBAL_SAMPLING:(this.Yd=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.Yd,nn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Yd,nn.ETR_SAMPLING)),this.Yd.length>0?(this.$d(t),nn.TEMPORARILY_RECORDED):nn.NOT_RECORDED):nn.NOT_RECORDED},n.prototype.$d=function(t){var n,i=this,r=null===(n=this.Y)||void 0===n?void 0:n.getVisitor();this.Kd.setRequestPayloadProvider({getRequestPayload:function(){return csJSON.stringify({recordingTypes:csArray.prototype.map.call(i.Yd,Number),url:i.$.getAnonymizedUrl(),projectId:i.configuration.projectId,uu:(null==r?void 0:r.id)||"",sn:(null==r?void 0:r.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})}}),this.Kd.send()},n.prototype.abortQuotaServiceRequest=function(){this.Kd.abort()},n.prototype.isReplayRecorded=function(t){return t.recordingState===nn.TEMPORARILY_RECORDED||t.recordingState===nn.GLOBAL_SAMPLING||t.recordingState===nn.URL_SAMPLING||t.etrState===rn.ETR_ON},n.prototype.Xd=function(){var t=this;this.Kd.setRequestHeader({name:"Content-Type",value:"application/json"}),this.Kd.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.Kd.onTimeout(3e3,(function(){return t.quotaServiceTimeoutHandler()})),this.Kd.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},n.prototype.quotaServiceErrorHandler=function(t){this.Zd(),J.warn("Quota Service: request error - ".concat(t))},n.prototype.quotaServiceTimeoutHandler=function(){this.Zd(),J.warn("Quota Service: request timeout")},n.prototype.Zd=function(){var t=nn.NOT_RECORDED;this.Qd(this.Yd)&&(t=nn.GLOBAL_SAMPLING),this.ni.emitRecordingStateChange(t,rn.ETR_OFF)},n.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=rn.ETR_OFF,s=nn.NOT_RECORDED;this.Qd(i)?s=nn.GLOBAL_SAMPLING:this.tw(i)&&(s=nn.URL_SAMPLING),this.nw(i)&&(r=rn.ETR_ON),this.ni.emitRecordingStateChange(s,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},n.prototype.Qd=function(t){return csArray.prototype.some.call(t,(function(t){return t===nn.GLOBAL_SAMPLING}))},n.prototype.tw=function(t){return csArray.prototype.some.call(t,(function(t){return t===nn.URL_SAMPLING}))},n.prototype.nw=function(t){return csArray.prototype.some.call(t,(function(t){return t===nn.ETR_SAMPLING}))},n.prototype.setVisitorService=function(t){this.Y=t},n.prototype.getDisabledRecordingState=function(){return nn.NOT_RECORDED},ot([G("Quota Service: onerror")],n.prototype,"quotaServiceErrorHandler",null),ot([G("Quota Service: ontimeout")],n.prototype,"quotaServiceTimeoutHandler",null),ot([G("Quota Service: onload")],n.prototype,"quotaServiceLoadHandler",null),n}(Pu),qu=function(){function t(t,n){this.iw=t,this.rw=n,this.ew=!1,this.uw=null,this.hw=0}return t.prototype.setDynamicVariablesService=function(t){this.ow=t},t.prototype.createOrUpdateSession=function(){this.cw(),this.fw=Rt(),this.hw=0;var t=this.aw();null===t?(t=this.lw(),this.yw(t),t.recordingState=this.rw.computeInitialRecordingState(t)):(t=this.rw.sanitizeSessionRecordingState(t),this.yw(t),t.recordingState=this.rw.updateRecordingState(t)),this.setSession(t),this.pw(t)},t.prototype.lw=function(){return{pageNumber:0,recordingState:this.rw.getDisabledRecordingState(),etrState:rn.ETR_OFF}},t.prototype.pw=function(t){this.rw instanceof Uu?this.ew=this.rw.computeTriggerSessionReplayStatus(t):this.ew=!1},t.prototype.mw=function(){var t=this.lw();return this.yw(t),t.recordingState=this.rw.computeInitialRecordingState(t),this.pw(t),t},t.prototype.yw=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.rw.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===nn.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.rw instanceof ju&&this.rw.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber),this.rw instanceof Uu&&(t.re=this.ew?tn.TRIGGER_REPLAY_RECORDING_ENABLED:n.recordingState)),t},t.prototype.getSession=function(){return this.iw.get()},t.prototype.aw=function(){return this.iw.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.iw.get()},t.prototype.setSession=function(t){this.iw.set(t)},t.prototype.removeSession=function(){this.iw.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==nn.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===rn.ETR_ON&&csArray.prototype.push.call(n,nn.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.iw.getRawSession();return this.iw.isValid(t)},t.prototype.handleSubdomainChange=function(){this.iw.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(){var t=this.iw.isCacheRefreshed();return t&&this.iw.resetCacheRefreshed(),t},t.prototype.extendSessionPeriodically=function(){this.uw||this.gw()},t.prototype.gw=function(){if(this.Aw())this.cw();else{var t=this.getSession();null===t&&(t=this.mw()),this.iw.set(t,174e4),this.Ew(),this.Sw()}},t.prototype.Sw=function(){var t=this;this.uw=window.setTimeout((function(){t.gw()}),174e4)},t.prototype.Aw=function(){return 1434e4-(Rt()+vn-this.fw)<0},t.prototype.cw=function(){this.uw&&(window.clearTimeout(this.uw),this.uw=null)},t.prototype.Ew=function(){this.hw+=1,this.ow.trackDynamicVariable("session_expiry_update",this.hw)},t}(),Fu=function(){function t(t,n,i){this.U=t,this.Y=n,this.Nt=i}return t.prototype.clear=function(){this.bw()&&(this.Nw=this.Y.getVisitor(),this.Y.removeVisitor()),this.Tw()&&this.Nt.removeExclusion()},t.prototype.bw=function(){return this.Y.doesVisitorExist()&&this.Y.getVisitor().appliedTrackingDraw!==this.U.lastTrackingDraw},t.prototype.Tw=function(){return this.Nt.getAppliedTrackingDraw()!==this.U.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Nw&&this.Y.setVisitor(this.Nw)},t}(),Hu=function(){function t(t,n){this.Y=t,this.X=n}return t.prototype.handle=function(){this.Rw(),this.kw()},t.prototype.Rw=function(){this.Y.handleSubdomainChange()},t.prototype.kw=function(){this.X.handleSubdomainChange()},t}(),Vu=function(){function t(){this.listeners=[]}return t.prototype.addListeners=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(t=csArray.prototype.push).call.apply(t,at([this.listeners],n,!1))},t}(),zu=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onStartTracking&&r.onStartTracking(t)}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onArtificialPageViewEnd&&i.onArtificialPageViewEnd()}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentGranted&&i.onConsentGranted()}},n.prototype.emitConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentWithdrawn&&i.onConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onRecordingStateChange&&s.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},ot([$n("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(Vu),Ju="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(Mu||(Mu={}));var Gu,Wu=function(){function t(t,n,i){this.U=t,this.Rt=n,this.Ow=i}return t.prototype.get=function(){var t;return null===(t=this.U.cookielessTrackingEnabled?this.Ow.getItem(Ju):this.Rt.get(Ju))?t:Number(t)},t.prototype.set=function(t){this.U.cookielessTrackingEnabled?this.Ow.setItem(Ju,csString(t)):this.Rt.set(Ju,csString(t),L)},t.prototype.remove=function(){this.U.cookielessTrackingEnabled?this.Ow.removeItem(Ju):this.Rt.delete(Ju)},t.prototype.handleSubdomainChange=function(){this.U.cookielessTrackingEnabled||(this.U.allowSubdomains?this.Rt.delete(Ju,Yt.CURRENT_DOMAIN):this.Rt.delete(Ju,this.Rt.getRootDomain()))},t}(),Bu=["trackConsentGranted"],Ku=["trackConsentWithdrawn"],Yu=function(){function t(t,n){this.lo=t,this.Ko=n}return t.prototype.init=function(){this.Ko.handleSubdomainChange(),this.Ko.setInitialConsent(),this.Iw()},t.prototype.Iw=function(){var t=this;this.lo.register(Bu,(function(){t.Ko.grantConsent()})),this.lo.register(Ku,(function(){t.Ko.withdrawConsent()}))},t.prototype.onOptout=function(){this.Ko.removeConsent()},t}(),Xu=function(){function t(t,n,i){this.U=t,this.Jd=n,this.ni=i}return t.prototype.setInitialConsent=function(){var t=this.Jd.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefault()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.U.consentRequired;return n&&t===Mu.NOT_REQUIRED||!n&&t!==Mu.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.Jd.handleSubdomainChange()},t.prototype.setDefault=function(){var t=this.U.consentRequired?Mu.NOT_EXPRESSED:Mu.NOT_REQUIRED;this.Jd.set(t)},t.prototype.grantConsent=function(){this.U.consentRequired&&(this.Jd.set(Mu.GRANTED),this.ni.emitConsentGranted())},t.prototype.withdrawConsent=function(){this.U.consentRequired&&(this.Jd.set(Mu.WITHDRAWN),this.ni.emitConsentWithdrawn())},t.prototype.removeConsent=function(){this.Jd.remove()},t.prototype.isAllowedByConsent=function(){return!this.U.consentRequired||this.Jd.get()===Mu.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.Jd.get())}},t}(),$u=function(){function t(t,n,i,r,s,e,u){this.ni=t,this.lo=n,this.kd=i,this.Od=r,this.Id=s,this.xw=e,this.xd=u}return t.prototype.start=function(){this.ni.addListeners(this.xw,this.xd,this.kd),this.xd.init(),this.Od.init(),this.Id.init(),this.Id.isActive()||this.lo.start()},t}(),Zu=function(){function t(t,n){this.Ft=t,this.Jd=n}return t.prototype.exclude=function(t){this.Jd.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.Jd.remove()},t.prototype.isExcluded=function(){return this.Lw()||this.Cw()},t.prototype.Lw=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.Jd.get()},t.prototype.Cw=function(){return csString.prototype.indexOf.call(this.Ft.href,mn)>0},t}(),Qu=function(){function t(t){this.Ko=t}return t.prototype.onOptout=function(){this.Ko.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Gu||(Gu={}));var th,nh=function(){function t(t){this.$=t,this._w=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this._w=new RegExp(t)},t.prototype.Mw=function(){return this._w.test(this.$.getAnonymizedUrl())?Gu.SessionReplay:Gu.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Mw()===Gu.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Mw()}},t}(),ih=["excludeURLforReplay"],rh=function(){function t(t,n){this.Ko=t,this.lo=n}return t.prototype.init=function(){var t=this;this.lo.register(ih,(function(n){j(n)&&t.Ko.setExcludeUrlForSessionReplay(n)}))},t}(),sh="_cs_inc",eh=function(){function t(t,n){this.Ft=t,this.Rt=n}return t.prototype.isForceIncluded=function(){return this.Dw()||this.Pw()},t.prototype.isForceLegacyReplayRecorded=function(){return this.Uw(tn.REPLAY_RECORDING_ENABLED)||this.jw(tn.REPLAY_RECORDING_ENABLED)},t.prototype.isForceMalkaReplayRecorded=function(){return this.Uw(nn.GLOBAL_SAMPLING)},t.prototype.Dw=function(){return null!==this.Rt.get(sh)},t.prototype.Uw=function(t){return this.Rt.get(sh)===t},t.prototype.Pw=function(){return csString.prototype.indexOf.call(this.Ft.href,sh)>0},t.prototype.jw=function(t){return csString.prototype.indexOf.call(this.Ft.href,"".concat(sh,"=").concat(t))>0},t}(),uh="_cs_optout",hh=function(){function t(t,n,i){this.U=t,this.Rt=n,this.Ow=i}return t.prototype.get=function(){return this.U.cookielessTrackingEnabled?this.Ow.getItem(uh):this.Rt.get(uh)},t.prototype.set=function(t){this.U.cookielessTrackingEnabled?this.Ow.setItem(uh,t):this.Rt.set(uh,t,L)},t}(),oh=function(){function t(t,n,i){this.ni=t,this.Ft=n,this.Jd=i}return t.prototype.init=function(){!this.isActive()&&this.qw()&&this.activate()},t.prototype.isActive=function(){return"1"===this.Jd.get()},t.prototype.activate=function(){this.ni.emitOptout(),this.Jd.set("1")},t.prototype.qw=function(){return csString.prototype.indexOf.call(this.Ft.href,uh)>0},t}(),ch=["optout"],fh=function(){function t(t,n){this.lo=t,this.Id=n}return t.prototype.init=function(){var t=this;this.lo.register(ch,(function(){t.Id.activate()}))},t}();function ah(t,n){return n.visitor.visitsCount!==t.visitor.visitsCount?n.visitor.visitsCount-t.visitor.visitsCount:t.session?n.session?n.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,n){var i=function(t,n){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===n}))[0]}(t,n),r=function(t,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,n){return t.visitor&&t.visitor.appliedTrackingDraw===n}(t,n)})),ah)[0]}(t,n);return i||r}}(th||(th={}));var vh=function(){function t(t,n,i){this.U=t,this.Fw=n,this.Hw=i}return t.prototype.applyUpToDate=function(t){var n=this;this.Hw.retrieve(this.U.hostnames,(function(i){var r=at([n.Fw.get()],i,!0),s=th.select(r,n.U.lastTrackingDraw);n.Fw.apply(s),t()}))},t}(),lh=function(){function t(t,n){this.lo=t,this.Ho=n}return t.prototype.init=function(){this.Ho.addListeners(this.lo)},t.prototype.onOptout=function(){this.lo.stop()},t.prototype.onBeforeSessionRenewal=function(){this.lo.stop()},t}();var dh,wh=function(t){function n(){var n=t.call(this)||this;return n.Vw={},n}return ut(n,t),n.prototype.register=function(t,n){for(var i=0,r=t;i<r.length;i++){var s=r[i];this.Vw[s]=n,this.Vw}},n.prototype.onStart=function(){this.zw(),this.Jw()},n.prototype.onStop=function(){window._uxa=[]},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.Gw(r.name,r.params,t.iframePath)}},n.prototype.Gw=function(t,n,i){var r=this;J.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.Vw[t])return(i=r.Vw)[t].apply(i,n)}))()},n.prototype.zw=function(){var t=this;window._uxa.forEach((function(n){var i=n[0],r=n.slice(1);return t.apply(i,r)}))},n.prototype.Jw=function(){var t=this;window._uxa={push:function(n){var i=n[0],r=n.slice(1);return t.apply(i,r)}}},n.prototype.apply=function(t,n){var i;if(this.Vw[t])return(i=this.Vw)[t].apply(i,n)},ot([G("Commands.apply")],n.prototype,"apply",null),n}(wi),yh=function(){function t(){var t=this;this.kf={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.onEvent=function(t){this.fi=t},t.prototype.start=function(){Fn(this.kf)},t.prototype.stop=function(){Hn(this.kf)},t.prototype.Ww=function(n){if(!n)return!1;var i=n.disposition;return j(n.sourceFile)&&csArray.prototype.some.call(t.Bw,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.Ww(t)&&this.fi({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.Bw=["contentsquare","cdnssl.clicktale.net","localhost","website.com/build/e2e"],ot([G("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),ph=function(){function t(t){this.Kw=t}return t.prototype.init=function(){var t=this;this.Kw.onEvent((function(n){return t.Qi(n)}))},t.prototype.start=function(){this.Kw.start()},t.prototype.stop=function(){this.Kw.stop()},t.prototype.Qi=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);J.warn(n)},t}(),mh=function(t){function n(n,i,r,s,e,u){var h=t.call(this)||this;return h.Li=n,h.Yw=i,h.Iv=r,h.Ci=s,h.do=e,h.$=u,h.Xw=[],h.qi=0,h.$w=[],h}return ut(n,t),n.prototype.init=function(){this.Zw()},n.prototype.initStates=function(){this.hf=Rt(),this.Xw=[],this.qi=0},n.prototype.onStart=function(){var t=this;this.Li.subscribe(n.tr,(function(n){return t.Qi(n)})),this.Qw()},n.prototype.onStop=function(){this.Li.unsubscribe(n.tr)},n.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.Xw})},n.prototype.onIframeJavascriptError=function(t){this.Qi(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.ty(n)},n.prototype.ty=function(t){var n=this;this.isStarted?this.Qi(t,(function(t){return n.do.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.$w,t)},n.prototype.Qw=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.$w,(function(n){return t.ty(n)})),this.$w=[])},n.prototype.Qi=function(t,n){if(this.isStarted&&this.qi<20){var i=ht(ht({},t),{pageUrl:this.$.getAnonymizedUrl(),rt:this.uf()});this.Ci.anonymize(i),csArray.prototype.push.call(this.Xw,i),this.ny(),n&&n(i)}},n.prototype.Zw=function(){var t=this;this.Yw.setRequestParametersProviders(this.Iv),this.Yw.setRequestPayloadProvider(this),this.Yw.after((function(){t.Xw=[],t.qi+=1}))},n.prototype.uf=function(){return Rt()-this.hf},n.prototype.ny=function(){this.Yw.send()},n.tr="JavaScriptErrorsService",n}(wi),gh=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e._i=n,e.iy=i,e.Iv=r,e.Di=s,e.sy=[],e.Fi=0,e}return ut(n,t),n.prototype.init=function(){this._i.init(),this.Zw()},n.prototype.initStates=function(){this.sy=[],this.Fi=0,this.sf()},n.prototype.sf=function(){this.hf=Rt()},n.prototype.uf=function(){return Rt()-this.hf},n.prototype.onStart=function(){var t=this;this._i.subscribe(n.tr,(function(n){return t.Qi(n)}))},n.prototype.onStop=function(){this._i.unsubscribe(n.tr)},n.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.sy})},n.prototype.onIframeApiError=function(t){this.Qi(t)},n.prototype.Qi=function(t){this.isStarted&&this.Fi<n.ey&&(t.relativeTime=this.uf(),csArray.prototype.push.call(this.sy,this.Di.anonymize(t)),this.ny())},n.prototype.Zw=function(){var t=this;this.iy.setRequestParametersProviders(this.Iv),this.iy.setRequestPayloadProvider(this),this.iy.after((function(){t.sy=[],t.Fi+=1}))},n.prototype.ny=function(){this.iy.send()},n.tr="ApiErrorsService",n.ey=20,n}(wi),Ah=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.uy=n,e.Iv=i,e.hy=r,e.Fv=s,e.oy=[],e.Hi=0,e.$w=[],e}return ut(n,t),n.prototype.init=function(){this.Zw()},n.prototype.initStates=function(){this.hf=Rt(),this.oy=[],this.Hi=0},n.prototype.trackCustomError=function(t,n){if(void 0===n&&(n={}),j(t)&&q(n)){var i={message:csString.prototype.slice.call(t,0,300),errorType:"customError"};this.vy(n)&&(i.attributes=n),this.ty(i)}},n.prototype.vy=function(t){var n=Object.keys(t).length;if(0===n||n>5)return!1;for(var i in t)if(i.length>30||t[i].length>30)return!1;return!0},n.prototype.onStart=function(){this.Qw()},n.prototype.onStop=function(){},n.prototype.Qw=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.$w,(function(n){return t.ty(n)})),this.$w=[])},n.prototype.ty=function(t){if(this.isStarted){var n=this.ly(t);this.Qi(n),this.Fv.emitCustomErrorEvent(n)}else csArray.prototype.push.call(this.$w,t)},n.prototype.Qi=function(t){this.isStarted&&this.Hi<20&&(csArray.prototype.push.call(this.oy,t),this.ny())},n.prototype.ly=function(t){var n=ht(ht({},t),{rt:this.uf()});return n.message=this.hy.anonymizeEmail(t.message),n},n.prototype.Zw=function(){var t=this;this.uy.setRequestParametersProviders(this.Iv),this.uy.setRequestPayloadProvider(this),this.uy.after((function(){t.oy=[],t.Hi+=1}))},n.prototype.getRequestPayload=function(){return csJSON.stringify({errors:this.oy})},n.prototype.uf=function(){return Rt()-this.hf},n.prototype.ny=function(){this.uy.send()},n}(wi);!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(dh||(dh={}));var Eh,Sh=["trackError"],bh=["api-errors:maskUrl"],Nh=function(){function t(t,n,i,r,s,e,u,h,o,c,f){this.Li=t,this.Ci=n,this._i=i,this.Di=r,this.hy=s,this.U=e,this.Iv=u,this.Ho=h,this.lo=o,this.do=c,this.$=f}return t.prototype.init=function(){this.wy=new ph(new yh),this.wy.init();var t=new Un(this.U.getTrackerUri(),"errors");this.yy=new mh(this.Li,t,this.Iv,this.Ci,this.do,this.$),this.yy.init(),this.Ho.addListeners(this.yy);var n=new Un(this.U.getTrackerUri(),"api-errors");this._i.excludeDomains([dh.CONTENTSQUARE,dh.CLICKTALE,dh.FAKE_TRACKER]),this.py=new gh(this._i,n,this.Iv,this.Di),this.py.init(),this.Ho.addListeners(this.py);var i=new Un(this.U.getTrackerUri(),"custom-errors");this.my=new Ah(i,this.Iv,this.hy,this.do),this.my.init(),this.Iw()},t.prototype.Iw=function(){var t=this;this.lo.register(bh,(function(n){return t.Di.addUrlMaskingPattern(n)})),this.lo.register(Sh,(function(n,i){t.U.customErrorsEnabled?t.my.trackCustomError(n,i):t.U.jsCustomErrorsEnabled&&t.yy.trackCustomError(n)}))},t.prototype.onInitTracking=function(){this.wy.start()},t.prototype.onStartTracking=function(){this.U.jsErrorsEnabled&&this.yy.start(),this.U.apiErrors.enabled&&this.py.start(),this.U.customErrorsEnabled&&this.my.start()},t.prototype.onAfterNaturalPageView=function(){this.yy.initStates(),this.py.initStates(),this.my.initStates()},t.prototype.onAfterArtificialPageView=function(){this.yy.initStates(),this.py.initStates(),this.my.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.yy.stop(),this.py.stop(),this.my.stop()},t.prototype.onOptout=function(){this.wy.stop(),this.yy.stop(),this.py.stop(),this.my.stop()},t}(),Th="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(Eh||(Eh={}));var Rh=function(){function t(t,n){this.U=t,this.Rt=n,this.gy=Gt.None,this.Ay=!1,this.Ey=[],this.Sy=[]}return t.prototype.init=function(){this.gy=this.Rt.isSameSiteSupported()?Gt.None:Gt.NotSet},t.prototype.setStates=function(t,n){this.Fw=t,this.by=n},t.prototype.start=function(t){var n=this;this.by.init(this.Ny(),(function(i,r){var s=[n.Fw.get()];r&&csArray.prototype.push.call(s,i);var e=th.select(s,n.U.lastTrackingDraw);n.Ay=!0,n.Fw.apply(e),t()})),this.Ty=this.by.openIframe()},t.prototype.setCookie=function(t,n,i){if(this.Ay){var r={name:t,value:n,samesite:this.gy,secure:Wt.Yes};i&&(r.expires=zt.toExpireDate(i).getTime()),this.Ry(r)}},t.prototype.removeCookie=function(t){this.Ay&&this.ky(t)},t.prototype.ky=function(t){this.Sy=csArray.prototype.filter.call(this.Sy,(function(n){return n!==t})),this.Ey=csArray.prototype.filter.call(this.Ey,(function(n){return n.name!==t})),csArray.prototype.push.call(this.Sy,t),this.setBatchReadyCall()},t.prototype.Ry=function(t){this.Sy=csArray.prototype.filter.call(this.Sy,(function(n){return n!==t.name})),this.Ey=csArray.prototype.filter.call(this.Ey,(function(n){return n.name!==t.name})),csArray.prototype.push.call(this.Ey,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.Oy()},t.prototype.Oy=function(){if(this.Ey.length>0){var t=this.Iy(Eh.Set,this.Ey);this.xy(t),this.Ey=[]}if(this.Sy.length>0){var n=this.Iy(Eh.Remove,this.Sy);this.xy(n),this.Sy=[]}},t.prototype.Iy=function(t,n){return{command:t,cookies:n,domain:null,pid:this.U.projectId}},t.prototype.xy=function(t){var n="https://".concat(this.Ny());this.Ty.contentWindow&&this.Ty.contentWindow.postMessage(t,n)},t.prototype.Ny=function(){return this.U.dualCollectionTagDomain&&this.U.dualCollectionTagDomain!==Th?"cdnssl.".concat(this.U.dualCollectionTagDomain):"csxd.".concat(Th)},ot([as(),G("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),kh=function(){function t(t,n){this.U=t,this.qt=n}return t.prototype.init=function(t,n){this.Ly="https://".concat(t),this.Ht=n},t.prototype.openIframe=function(){var t=this;this.qt.onMessage((function(n){t.Jt(n)})),this.qt.onTimeout((function(){t.Gt()})),this.qt.start();var n=this.Cy(this.Ly);return this.qt.open(n)},t.prototype.Jt=function(t){if(this.Wt(t)){var n=t.data,i=!0;if(this._y(t))return void J.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!pn.isRawDomainState(n))return void J.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));pn.isValid(n)||(J.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),i=!1),this.qt.stop(),this.Ht(i?wn.fromRaw(n):{},i)}},t.prototype.Gt=function(){J.warn("xdframe single domain: all messages not received")},t.prototype.Wt=function(t){return t.origin===this.Ly&&q(t.data)},t.prototype._y=function(t){return!!t.data.error},t.prototype.Cy=function(t){var n=this.U.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.1.1",".html?pid=").concat(n)},t}(),Oh=function(){function t(t,n,i){this.U=t,this.Y=n,this.X=i}return t.prototype.getRequestParameters=function(){var t=this.X.getSession();if(!t)return{};var n=this.Y.getVisitor();return n?ht(ht(ht({},Tt()),this.U.getRequestParameters()),{uu:n.id,sn:"".concat(n.visitsCount),pn:"".concat(t.pageNumber)}):{}},t}(),Ih=function(t){function n(){var n=t.call(this)||this;return n.My=!1,n.kf={boundElement:window,type:"error",listener:function(t){return n.errorListener(t)}},n}return ut(n,t),n.prototype.onStartTracking=function(){Fn(this.kf,this.My)},n.prototype.onStopTracking=function(){Hn(this.kf,this.My)},n.prototype.errorListener=function(t){var n=this.Dy(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.Py=function(t){return(t=null!=t?t:"[NO ERROR MESSAGE]").length<=n.Uy?t:csString.prototype.slice.call(t,0,n.Uy-n.truncatedErrorMessageMarker.length)+n.truncatedErrorMessageMarker},n.prototype.Dy=function(t){return{errorType:"jsError",message:this.Py(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.truncatedErrorMessageMarker="",n.Uy=1024,ot([G("Event handler type: error")],n.prototype,"errorListener",null),n}(ku),xh=function(){function t(t,n){this.lo=t,this._=n}return t.prototype.init=function(){var t=this;this.lo.register(["debugEvents"],(function(n){"boolean"==typeof n&&t._.updateDynamicFields("emitDebugEvents",n)}))},t}();function Lh(t,n,i){if(!F(n)&&!F(i))return t.href;var r=F(n)?function(t){return I(t,"/")?t:"/".concat(t)}(n):t.pathname,s=F(i)?function(t){return I(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(s)}var Ch=function(){function t(t,n){this.Ft=t,this.Ta=n}return t.prototype.overridePath=function(t){F(t)&&j(t)&&(this.jy=""===t?void 0:t)},t.prototype.overrideQuery=function(t){F(t)&&j(t)&&(this.qy=t)},t.prototype.computeOverriddenUrl=function(t){return this.Fy(t)?this.getAnonymizedUrl():t},t.prototype.Fy=function(t){var n=this.Hy(this.Ft.href);return this.Hy(t)===n},t.prototype.Hy=function(t){return x(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.getAnonymizedUrl=function(){var t=Lh(this.Ft,this.jy,this.qy);return this.Ta.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.Ft.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),_h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var s=r[i];s.onEventTriggerRecording&&s.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(Vu),Mh=function(t){function n(n,i){var r=t.call(this)||this;return r.Vy=n,r.zy=i,r.Jy=[],r}return ut(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,n,i)},n.prototype.init=function(){var t=this;this.Vy.onEvent((function(n){return t.Gy(n)})),this.zy.onEvent((function(n){return t.Gy(n)}))},n.prototype.onStartTracking=function(){this.Vy.start(),this.zy.start()},n.prototype.onStopTracking=function(){this.Vy.stop(),this.zy.stop()},n.prototype.Gy=function(t){if(t.url&&t.statusCode){if(this.Wy(t.url))return;if(t.statusCode>=400)for(var n in this.subscriptions){var i=this.subscriptions[n];if(i.hasOwnProperty("detailedEvent"))i(this.By(t));else i(this.Ky(t))}}},n.prototype.Ky=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}},n.prototype.By=function(t){var n=this.Ky(t);return Object.keys(t.standardRequestHeaders).length>0&&(n.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(n.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(n.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(n.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(n.queryParameters=t.queryParameters),t.requestBody&&(n.requestBody=t.requestBody),t.responseBody&&(n.responseBody=t.responseBody),n},n.prototype.Wy=function(t){return csArray.prototype.some.call(this.Jy,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n.prototype.excludeDomains=function(t){var n;(n=csArray.prototype.push).call.apply(n,at([this.Jy],t,!1))},n.truncatedErrorMessageMarker="",n}(ku),Dh=function(){function t(){this.Yy=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.isValidBodyType=function(t){var n=t["content-type"];if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return csArray.prototype.some.call(this.Yy,(function(t){return I(i,t)}))},t}(),Ph=function(t){function n(n,i,r){var s=t.call(this)||this;return s.Ur=n,s.Xy=i,s.U=r,s.Ye=!1,s.$y=null,s.Zy=null,s.Qy=null,s.je=[],s.tp=function(t){var n=t.context,i=t.args,r=t.callerName;return s.interceptOpen(n,i,r)},s.np=function(t){var n=t.context,i=t.args;return s.interceptSetRequestHeader(n,i)},s.ip=function(t){var n=t.context,i=t.args;return s.interceptSend(n,i)},s}return ut(n,t),n.prototype.onEvent=function(t){csArray.prototype.push.call(this.je,t)},n.prototype.start=function(){this.Ye||(this.rp(),this.$y&&this.$y.activate(),this.Zy&&this.Zy.activate(),this.Qy&&this.Qy.activate(),this.Ye=!0)},n.prototype.stop=function(){this.Ye&&(this.$y&&this.$y.deactivate(),this.Zy&&this.Zy.deactivate(),this.Ye=!1)},n.prototype.rp=function(){this.$y||(this.$y=this.Ur.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"open",hook:this.tp,options:{withCallerName:!0}})),this.Zy||(this.Zy=this.Ur.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.np})),this.Qy||(this.Qy=this.Ur.createSyncFunctionInterceptor({target:XMLHttpRequest.prototype,methodName:"send",hook:this.ip}))},n.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&j(n[1])){var s=csString.prototype.split.call(n[1],"?"),e=s[0],u=s[1],h=Dt(e);t.apiCall={url:h,method:n[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:Rt(),responseTime:0,statusCode:0,library:i},u&&this.isValidUrl(h,this.U.apiErrors.validUrls)&&this.U.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=u),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},n.prototype.readyStateChangeListener=function(t){var n=this;t.apiCall&&t.readyState===XMLHttpRequest.DONE&&t.status>=400&&(t.apiCall.responseTime=Rt(),t.apiCall.statusCode=t.status,this.sp()&&csArray.prototype.forEach.call(null==t.getAllResponseHeaders()?void 0:csString.prototype.split.call(t.getAllResponseHeaders(),/[\r\n]+/),(function(i){var r=csString.prototype.split.call(i,/:(.*)/),s=r[0],e=r[1];n.U.apiErrors.collectStandardHeaders&&n.Xy.isValidStandardHeader(s)?t.apiCall.standardResponseHeaders[s]=csString.prototype.trim.call(e):n.Xy.isValidCustomHeader(s)&&(t.apiCall.customResponseHeaders[s]=csString.prototype.trim.call(e))})),this.isValidUrl(t.apiCall.url,this.U.apiErrors.validUrls)&&this.U.apiErrors.collectResponseBody&&this.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.je,(function(n){return n(t.apiCall)})))},n.prototype.interceptSetRequestHeader=function(t,n){if(t.apiCall&&this.sp()){var i=n[0],r=n[1];this.U.apiErrors.collectStandardHeaders&&this.Xy.isValidStandardHeader(i)&&r?t.apiCall.standardRequestHeaders[i]=r.trim():this.Xy.isValidCustomHeader(i)&&r&&(t.apiCall.customRequestHeaders[i]=r.trim())}},n.prototype.interceptSend=function(t,n){var i=n[0];t.apiCall&&this.isValidUrl(t.apiCall.url,this.U.apiErrors.validUrls)&&this.U.apiErrors.collectRequestBody&&this.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof i&&(t.apiCall.requestBody=i)},n.prototype.sp=function(){return this.U.apiErrors.collectStandardHeaders||this.U.apiErrors.validCustomHeaders&&0!==this.U.apiErrors.validCustomHeaders.length},ot([G("XhrRequestTracker.interceptOpen")],n.prototype,"interceptOpen",null),ot([G("XhrRequestTracker.readyStateChangeListener")],n.prototype,"readyStateChangeListener",null),ot([G("XhrRequestTracker.interceptSetRequestHeader")],n.prototype,"interceptSetRequestHeader",null),ot([G("XhrRequestTracker.interceptSend")],n.prototype,"interceptSend",null),n}(Dh),Uh=function(t){function n(n,i,r){var s=t.call(this)||this;return s.Ur=n,s.Xy=i,s.U=r,s.Ye=!1,s.ep=null,s.je=[],s.up=function(t){var n=t.result,i=t.args,r=t.callerName;s.interceptFetch(n,i,r)},s}return ut(n,t),n.prototype.onEvent=function(t){csArray.prototype.push.call(this.je,t)},n.prototype.start=function(){this.Ye||this.hp()&&(this.op(),this.ep&&this.ep.activate(),this.Ye=!0)},n.prototype.stop=function(){this.Ye&&(this.ep&&this.ep.deactivate(),this.Ye=!1)},n.prototype.hp=function(){return!!window.csFetch&&"function"==typeof window.csFetch},n.prototype.cp=function(t,n){var i=at([],n,!0);return i[0]&&"function"==typeof i[0].clone&&(i[0]=n[0].clone()),{context:t,args:i}},n.prototype.op=function(){this.ep||(this.ep=this.Ur.createAsyncFunctionInterceptor({target:window,methodName:"fetch",hook:this.up,hookPrepareArgs:this.cp,options:{withCallerName:!0}}))},n.prototype.fp=function(t,n,i){return ct(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return ft(this,(function(f){switch(f.label){case 0:return r=csString.prototype.split.call(n.url,"?"),s=r[0],e=r[1],u=Dt(s),h=ht(ht({},t),{url:u,method:n.method,responseTime:Rt(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{}}),this.U.apiErrors.collectStandardHeaders&&(h.standardRequestHeaders=this.ap(n.headers),h.standardResponseHeaders=this.ap(i.headers)),this.U.apiErrors.validCustomHeaders&&0!==this.U.apiErrors.validCustomHeaders.length&&(h.customRequestHeaders=this.vp(n.headers),h.customResponseHeaders=this.vp(i.headers)),this.isValidUrl(s,this.U.apiErrors.validUrls)?(this.U.apiErrors.collectQueryParam&&e&&(h.queryParameters=e),this.U.apiErrors.collectResponseBody&&this.isValidBodyType(h.standardResponseHeaders)?i.bodyUsed?[3,2]:(o=h,[4,i.clone().text()]):[3,2]):[3,4];case 1:o.responseBody=f.sent(),f.label=2;case 2:return this.U.apiErrors.collectRequestBody&&this.isValidBodyType(h.standardRequestHeaders)?(c=h,[4,n.text()]):[3,4];case 3:c.requestBody=f.sent(),f.label=4;case 4:return csArray.prototype.forEach.call(this.je,(function(t){return t(h)})),[2]}}))}))},n.prototype.interceptFetch=function(t,n,i){return ct(this,void 0,void 0,(function(){var r,s,e,u,h,o,c;return ft(this,(function(f){switch(f.label){case 0:if(r=n[0],s=n[1],!j((e=new Request(r,s)).url))return[2];u=Rt(),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,t];case 2:return h=f.sent(),[3,4];case 3:if(o=f.sent(),this.lp(o)||this.dp(o)||this.wp(o))return[2];throw o;case 4:return c=-1,-1===h.type.indexOf("opaque")&&(c=h.status),c>=400?[4,this.fp({statusCode:c,library:i,requestTime:u},e,h)]:[3,6];case 5:f.sent(),f.label=6;case 6:return[2]}}))}))},n.prototype.ap=function(t){var n=this,i={};return t.forEach((function(t,r){n.Xy.isValidStandardHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.vp=function(t){var n=this,i={};return t.forEach((function(t,r){n.Xy.isValidCustomHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.lp=function(t){return t instanceof TypeError},n.prototype.dp=function(t){return t instanceof DOMException&&"AbortError"===t.name},n.prototype.wp=function(t){return t instanceof DOMException&&csArray.prototype.some.call(n.yp,(function(n){return n===t.name}))},n.yp=["NoModificationAllowedError","InvalidStateError","OperationError"],ot([G("FetchRequestTracker.interceptFetch")],n.prototype,"interceptFetch",null),n}(Dh),jh="|iframe|",qh=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.pp=n,e.mp=i,e.gp=r,e.Ap=s,e}return ut(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.Ep(n)&&null===t)J.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case Ft.ChildLogMessage:this.Sp(i);break;case Ft.AnalysisEvent:var r=this.pp.transformEvent(t,i);this.bp(r);break;case Ft.RecordingEvent:var s=i,e=this.Ap.transformEvents(t,s);if(0===e.events.length)return;e.containsUserEvent?this.Np(e.events):this.Tp(e.events);break;case Ft.JavascriptError:this.Rp(i);break;case Ft.ApiError:this.kp(i);break;case Ft.DetailedApiError:this.Op(i);break;case Ft.EmerchandisingMessage:var u=this.gp.transformEvent(t,i);this.Ip(u);break;case Ft.Commands:var h=this.mp.transformEvent(t,i);this.xp(h);break;case Ft.IntegrationCallback:this.Lp(i);break;default:J.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.Ep=function(t){var n=[Ft.AnalysisEvent,Ft.RecordingEvent,Ft.EmerchandisingMessage,Ft.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.Sp=function(t){var n=t.message,i=t.errorCode;switch(t.level){case M.debug:J.debug(n,i);break;case M.warn:J.warn(n,i);break;case M.error:J.error(n,i);break;case M.critical:J.critical(n,i)}},n.prototype.bp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.Np=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.Tp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.Rp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.kp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.Op=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.Ip=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.xp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.Lp=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n}(Vu),Fh=function(){self.addEventListener("message",(function(t){var n=t.data,i=n[0],r=n[1],s=n[2],e=n[3];if(i===WORKER_SIGNATURE){var u=compress(r,s);u.then?u.then((function(t){return self.postMessage([WORKER_SIGNATURE,e,t])})):self.postMessage([WORKER_SIGNATURE,e,u])}}))},Hh="CS_WORKER_SIGNATURE",Vh=function(t){function n(n,i){var r=t.call(this,i)||this;return r.Cp=n,r._p=r.Mp(),r.je={},r.Dp=0,r.Pp=n(),r}return ut(n,t),n.prototype.isSupported=function(){return!0},n.prototype.compress=function(t,n,i){if(this._p){var r=this.jp();this.je[r]=i,this._p.postMessage([Hh,t,n,r])}else{var s=this.Pp(t,n);s.then?s.then(i):i(s)}},n.prototype.compressSync=function(t){return this.Pp("base64",t)},n.prototype.handleWorkerMessage=function(t){var n=t.data,i=n[0],r=n[1],s=n[2];i===Hh&&(this.je[r](s),delete this.je[r])},n.prototype.jp=function(){return this.Dp+=1},n.prototype.Mp=function(){try{var t=csArray.prototype.join.call(["\nvar WORKER_SIGNATURE = ".concat(csJSON.stringify(Hh),";"),"var compress = (".concat(this.Cp.toString(),")();"),"(".concat(Fh.toString(),")()\n\n//compression algo")],"\n");return this.qp(t)}catch(t){return null}},n.prototype.qp=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,s=window.Worker;if(!i||!r||!s)return null;var e=new r([t],{type:"application/javascript"}),u=new s(i.createObjectURL(e));return u.onerror=function(t){return n.Fp(t)},u.onmessage=function(t){return n.handleWorkerMessage(t)},u},n.prototype.Fp=function(t){var n="WorkerError: ".concat(t.message?t.message:"No message");return this.onError(n)},ot([G("Worker message handler")],n.prototype,"handleWorkerMessage",null),n}(Dn);function zh(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,s=15,e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var f=new Array(60);t(f);var a=new Array(512);t(a);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,s){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var A=function(t){return t<256?a[t]:a[256+(t>>>7)]},E=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},S=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){S(t,i[2*n],i[2*n+1])},N=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},T=function(t,n,i){var r,e,u=new Array(16),h=0;for(r=1;r<=s;r++)u[r]=h=h+i[r-1]<<1;for(e=0;e<=n;e++){var o=t[2*e+1];0!==o&&(t[2*e]=N(u[o]++,o))}},R=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},k=function(t){t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},O=function(t,n,i,r){var s=2*n,e=2*i;return t[s]<t[e]||t[s]===t[e]&&r[n]<=r[i]},I=function(t,n,i){for(var r=t.heap[i],s=i<<1;s<=t.heap_len&&(s<t.heap_len&&O(n,t.heap[s+1],t.heap[s],t.depth)&&s++,!O(n,r,t.heap[s],t.depth));)t.heap[i]=t.heap[s],i=s,s<<=1;t.heap[i]=r},x=function(t,i,r){var s,h,o,c,f=0;if(0!==t.last_lit)do{s=t.pending_buf[t.d_buf+2*f]<<8|t.pending_buf[t.d_buf+2*f+1],h=t.pending_buf[t.l_buf+f],f++,0===s?b(t,h,i):(o=v[h],b(t,o+n+1,i),0!==(c=e[o])&&(h-=l[o],S(t,h,c)),s--,o=A(s),b(t,o,r),0!==(c=u[o])&&(s-=p[o],S(t,s,c)))}while(f<t.last_lit);b(t,256,i)},L=function(t,n){var i,r,e,u=n.dyn_tree,h=n.stat_desc.static_tree,o=n.stat_desc.has_stree,c=n.stat_desc.elems,f=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==u[2*i]?(t.heap[++t.heap_len]=f=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(e=t.heap[++t.heap_len]=f<2?++f:0)]=1,t.depth[e]=0,t.opt_len--,o&&(t.static_len-=h[2*e+1]);for(n.max_code=f,i=t.heap_len>>1;i>=1;i--)I(t,u,i);e=c;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],I(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*e]=u[2*i]+u[2*r],t.depth[e]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=e,t.heap[1]=e++,I(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,e,u,h,o,c=n.dyn_tree,f=n.max_code,a=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=s;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>f||(t.bl_count[u]++,h=0,r>=d&&(h=l[r-d]),o=c[2*r],t.opt_len+=o*(u+h),v&&(t.static_len+=o*(a[2*r+1]+h)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(e=t.heap[--i])>f||(c[2*e+1]!==u&&(t.opt_len+=(u-c[2*e+1])*c[2*e],c[2*e+1]=u),r--)}}(t,n),T(u,f,t.bl_count)},C=function(t,n,i){var r,s,e=-1,u=n[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)s=u,u=n[2*(r+1)+1],++h<o&&s===u||(h<c?t.bl_tree[2*s]+=h:0!==s?(s!==e&&t.bl_tree[2*s]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4))},_=function(t,n,i){var r,s,e=-1,u=n[1],h=0,o=7,c=4;for(0===u&&(o=138,c=3),r=0;r<=i;r++)if(s=u,u=n[2*(r+1)+1],!(++h<o&&s===u)){if(h<c)do{b(t,s,t.bl_tree)}while(0!=--h);else 0!==s?(s!==e&&(b(t,s,t.bl_tree),h--),b(t,16,t.bl_tree),S(t,h-3,2)):h<=10?(b(t,17,t.bl_tree),S(t,h-3,3)):(b(t,18,t.bl_tree),S(t,h-11,7));h=0,e=s,0===u?(o=138,c=3):s===u?(o=6,c=3):(o=7,c=4)}},M=!1,D=function(t,n,i,r){S(t,0+(r?1:0),3),function(t,n,i,r){k(t),r&&(E(t,i),E(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},P=function(t){M||(!function(){var t,n,o,g,A,E=new Array(16);for(o=0,g=0;g<28;g++)for(l[g]=o,t=0;t<1<<e[g];t++)v[o++]=g;for(v[o-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)a[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)a[256+A++]=g;for(n=0;n<=s;n++)E[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,E[8]++;for(;t<=255;)c[2*t+1]=9,t++,E[9]++;for(;t<=279;)c[2*t+1]=7,t++,E[7]++;for(;t<=287;)c[2*t+1]=8,t++,E[8]++;for(T(c,287,E),t=0;t<r;t++)f[2*t+1]=5,f[2*t]=N(t,5);d=new m(c,e,257,i,s),w=new m(f,u,0,r,s),y=new m(new Array(0),h,0,19,7)}(),M=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,R(t)},U=function(t,i,r,s){var e,u,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),L(t,t.l_desc),L(t,t.d_desc),h=function(t){var n;for(C(t,t.dyn_ltree,t.l_desc.max_code),C(t,t.dyn_dtree,t.d_desc.max_code),L(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*o[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),e=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=e&&(e=u)):e=u=r+5,r+4<=e&&-1!==i?D(t,i,r,s):4===t.strategy||u===e?(S(t,2+(s?1:0),3),x(t,c,f)):(S(t,4+(s?1:0),3),function(t,n,i,r){var s;for(S(t,n-257,5),S(t,i-1,5),S(t,r-4,4),s=0;s<r;s++)S(t,t.bl_tree[2*o[s]+1],3);_(t,t.dyn_ltree,n-1),_(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),x(t,t.dyn_ltree,t.dyn_dtree)),R(t),s&&k(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*A(i)]++),t.last_lit===t.lit_bufsize-1},q=function(t){S(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},F={_tr_init:P,_tr_stored_block:D,_tr_flush_block:U,_tr_tally:j,_tr_align:q},H=function(t,n,i,r){for(var s=65535&t|0,e=t>>>16&65535|0,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{e=e+(s=s+n[r++]|0)|0}while(--u);s%=65521,e%=65521}return s|e<<16|0},V=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),z=function(t,n,i,r){var s=V,e=r+i;t^=-1;for(var u=r;u<e;u++)t=t>>>8^s[255&(t^n[u])];return-1^t},J={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=0,W=2,B=3,K=4,Y=0,X=1,$=-1,Z=0,Q=8,tt=F._tr_init,nt=F._tr_stored_block,it=F._tr_flush_block,rt=F._tr_tally,st=F._tr_align,et=G,ut=1,ht=B,ot=K,ct=5,ft=Y,at=X,vt=-2,lt=-3,dt=-5,wt=$,yt=1,pt=2,mt=3,gt=4,At=Z,Et=2,St=Q,bt=258,Nt=262,Tt=103,Rt=113,kt=666,Ot=function(t,n){return t.msg=J[n],n},It=function(t){return(t<<1)-(t>4?9:0)},xt=function(t){for(var n=t.length;--n>=0;)t[n]=0},Lt=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},Ct=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},_t=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,Ct(t.strm)},Mt=function(t,n){t.pending_buf[t.pending++]=n},Dt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Pt=function(t,n){var i,r,s=t.max_chain_length,e=t.strstart,u=t.prev_length,h=t.nice_match,o=t.strstart>t.w_size-Nt?t.strstart-(t.w_size-Nt):0,c=t.window,f=t.w_mask,a=t.prev,v=t.strstart+bt,l=c[e+u-1],d=c[e+u];t.prev_length>=t.good_match&&(s>>=2),h>t.lookahead&&(h=t.lookahead);do{if(c[(i=n)+u]===d&&c[i+u-1]===l&&c[i]===c[e]&&c[++i]===c[e+1]){e+=2,i++;do{}while(c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&c[++e]===c[++i]&&e<v);if(r=bt-(v-e),e=v-bt,r>u){if(t.match_start=n,u=r,r>=h)break;l=c[e+u-1],d=c[e+u]}}}while((n=a[n&f])>o&&0!=--s);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,s,e,u,h,o,c,f,a=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-Nt)){t.window.set(t.window.subarray(a,a+a),0),t.match_start-=a,t.strstart-=a,t.block_start-=a,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=a?r-a:0}while(--i);n=i=a;do{r=t.prev[--n],t.prev[n]=r>=a?r-a:0}while(--i);s+=a}if(0===t.strm.avail_in)break;if(u=t.strm,h=t.window,o=t.strstart+t.lookahead,c=s,f=void 0,(f=u.avail_in)>c&&(f=c),i=0===f?0:(u.avail_in-=f,h.set(u.input.subarray(u.next_in,u.next_in+f),o),1===u.state.wrap?u.adler=H(u.adler,h,f,o):2===u.state.wrap&&(u.adler=z(u.adler,h,f,o)),u.next_in+=f,u.total_in+=f,f),t.lookahead+=i,t.lookahead+t.insert>=3)for(e=t.strstart-t.insert,t.ins_h=t.window[e],t.ins_h=Lt(t,t.ins_h,t.window[e+1]);t.insert&&(t.ins_h=Lt(t,t.ins_h,t.window[e+3-1]),t.prev[e&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=e,e++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Nt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Nt&&(t.match_length=Pt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2},qt=function(t,n){for(var i,r,s;;){if(t.lookahead<Nt){if(Ut(t),t.lookahead<Nt&&n===et)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Nt&&(t.match_length=Pt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=Lt(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(_t(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&_t(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2};function Ft(t,n,i,r,s){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=s}var Ht=[new Ft(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===et)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,_t(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Nt&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ot?(_t(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(_t(t,!1),t.strm.avail_out),1)})),new Ft(4,4,8,4,jt),new Ft(4,5,16,8,jt),new Ft(4,6,32,32,jt),new Ft(4,4,16,16,qt),new Ft(8,16,32,32,qt),new Ft(8,16,128,128,qt),new Ft(8,32,128,256,qt),new Ft(32,128,258,1024,qt),new Ft(32,258,258,4096,qt)];function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=St,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),xt(this.dyn_ltree),xt(this.dyn_dtree),xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),xt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var zt=function(t){if(!t||!t.state)return Ot(t,vt);t.total_in=t.total_out=0,t.data_type=Et;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Rt,t.adler=2===n.wrap?0:1,n.last_flush=et,tt(n),ft},Jt=function(t){var n=zt(t);return n===ft&&function(t){t.window_size=2*t.w_size,xt(t.head),t.max_lazy_match=Ht[t.level].max_lazy,t.good_match=Ht[t.level].good_length,t.nice_match=Ht[t.level].nice_length,t.max_chain_length=Ht[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Gt=function(t,n,i,r,s,e){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),s<1||s>9||i!==St||r<8||r>15||n<0||n>9||e<0||e>gt)return Ot(t,vt);8===r&&(r=9);var h=new Vt;return t.state=h,h.strm=t,h.wrap=u,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=n,h.strategy=e,h.method=i,Jt(t)},Wt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?Ot(t,vt):vt;var s=t.state;if(!t.output||!t.input&&0!==t.avail_in||s.status===kt&&n!==ot)return Ot(t,0===t.avail_out?dt:vt);s.strm=t;var e=s.last_flush;if(s.last_flush=n,42===s.status)if(2===s.wrap)t.adler=0,Mt(s,31),Mt(s,139),Mt(s,8),s.gzhead?(Mt(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Mt(s,255&s.gzhead.time),Mt(s,s.gzhead.time>>8&255),Mt(s,s.gzhead.time>>16&255),Mt(s,s.gzhead.time>>24&255),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Mt(s,255&s.gzhead.extra.length),Mt(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=z(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,0),Mt(s,9===s.level?2:s.strategy>=pt||s.level<2?4:0),Mt(s,3),s.status=Rt);else{var u=St+(s.w_bits-8<<4)<<8;u|=(s.strategy>=pt||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=Rt,Dt(s,u),0!==s.strstart&&(Dt(s,t.adler>>>16),Dt(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(i=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),Ct(t),i=s.pending,s.pending!==s.pending_buf_size));)Mt(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),Ct(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){i=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),Ct(t),i=s.pending,s.pending===s.pending_buf_size)){r=1;break}r=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Mt(s,r)}while(0!==r);s.gzhead.hcrc&&s.pending>i&&(t.adler=z(t.adler,s.pending_buf,s.pending-i,i)),0===r&&(s.status=Tt)}else s.status=Tt;if(s.status===Tt&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&Ct(t),s.pending+2<=s.pending_buf_size&&(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),t.adler=0,s.status=Rt)):s.status=Rt),0!==s.pending){if(Ct(t),0===t.avail_out)return s.last_flush=-1,ft}else if(0===t.avail_in&&It(n)<=It(e)&&n!==ot)return Ot(t,dt);if(s.status===kt&&0!==t.avail_in)return Ot(t,dt);if(0!==t.avail_in||0!==s.lookahead||n!==et&&s.status!==kt){var h=s.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===et)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}(s,n):s.strategy===mt?function(t,n){for(var i,r,s,e,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===et)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[s=t.strstart-1])===u[++s]&&r===u[++s]&&r===u[++s]){e=t.strstart+bt;do{}while(r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&r===u[++s]&&s<e);t.match_length=bt-(e-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ot?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}(s,n):Ht[s.level].func(s,n);if(3!==h&&4!==h||(s.status=kt),1===h||3===h)return 0===t.avail_out&&(s.last_flush=-1),ft;if(2===h&&(n===ut?st(s):n!==ct&&(nt(s,0,0,!1),n===ht&&(xt(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),Ct(t),0===t.avail_out))return s.last_flush=-1,ft}return n!==ot?ft:s.wrap<=0?at:(2===s.wrap?(Mt(s,255&t.adler),Mt(s,t.adler>>8&255),Mt(s,t.adler>>16&255),Mt(s,t.adler>>24&255),Mt(s,255&t.total_in),Mt(s,t.total_in>>8&255),Mt(s,t.total_in>>16&255),Mt(s,t.total_in>>24&255)):(Dt(s,t.adler>>>16),Dt(s,65535&t.adler)),Ct(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?ft:at)},Bt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,s=r.wrap;if(2===s||1===s&&42!==r.status||r.lookahead)return vt;if(1===s&&(t.adler=H(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===s&&(xt(r.head),r.strstart=0,r.block_start=0,r.insert=0);var e=new Uint8Array(r.w_size);e.set(n.subarray(i-r.w_size,i),0),n=e,i=r.w_size}var u=t.avail_in,h=t.next_in,o=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,f=r.lookahead-2;do{r.ins_h=Lt(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--f);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=h,t.input=o,t.avail_in=u,r.wrap=s,ft},Kt={deflateInit:function(t,n){return Gt(t,n,St,15,8,At)},deflateInit2:Gt,deflateReset:Jt,deflateResetKeep:zt,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,ft):vt},deflate:Wt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Tt&&n!==Rt&&n!==kt?Ot(t,vt):(t.state=null,n===Rt?Ot(t,lt):ft)},deflateSetDictionary:Bt,deflateInfo:"pako deflate (from Nodeca project)"},Yt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Xt=function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Yt(i,r)&&(t[r]=i[r])}}return t},$t=function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var s=new Uint8Array(n),e=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];s.set(u,e),e+=u.length}return s},Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Zt=!1}for(var Qt=new Uint8Array(256),tn=0;tn<256;tn++)Qt[tn]=tn>=252?6:tn>=248?5:tn>=240?4:tn>=224?3:tn>=192?2:1;Qt[254]=Qt[254]=1;var nn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},rn=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,s,e,u=t.length,h=0;for(s=0;s<u;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(h),e=0,s=0;e<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<u&&56320==(64512&(r=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(r-56320),s++),i<128?n[e++]=i:i<2048?(n[e++]=192|i>>>6,n[e++]=128|63&i):i<65536?(n[e++]=224|i>>>12,n[e++]=128|i>>>6&63,n[e++]=128|63&i):(n[e++]=240|i>>>18,n[e++]=128|i>>>12&63,n[e++]=128|i>>>6&63,n[e++]=128|63&i);return n};var sn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,un=G,hn=W,on=B,cn=K,fn=Y,an=X,vn=$,ln=Z,dn=Q;function wn(t){this.options=Xt({level:vn,method:dn,chunkSize:16384,windowBits:15,memLevel:8,strategy:ln},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sn,this.strm.avail_out=0;var i=Kt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==fn)throw new Error(J[i]);if(n.header&&Kt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?rn(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Kt.deflateSetDictionary(this.strm,r))!==fn)throw new Error(J[i]);this._dict_set=!0}}function yn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new wn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||J[i.err];return i.result}(t,n)}return wn.prototype.push=function(t,n){var i,r,s=this.strm,e=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?cn:un,"string"==typeof t?s.input=rn(t):"[object ArrayBuffer]"===en.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(e),s.next_out=0,s.avail_out=e),(r===hn||r===on)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((i=Kt.deflate(s,r))===an)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),i=Kt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===fn;if(0!==s.avail_out){if(r>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},wn.prototype.onData=function(t){this.chunks.push(t)},wn.prototype.onEnd=function(t){t===fn&&(this.result=$t(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n){var i=yn(n);return"base64"===t?btoa(nn(i)):i}}var Jh=function(t){function n(n){var i=t.call(this,zh,n)||this;return i.algorithm=Nn.GZIP,i}return ut(n,t),n}(Vh),Gh=function(t){function n(n){var i=t.call(this,Wh,n)||this;return i.Hp=zh(),i.algorithm=Nn.GZIP,i}return ut(n,t),n.prototype.compressSync=function(t){return this.Hp("base64",t)},n}(Vh);function Wh(){return function(t,n){var i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();return"base64"===t?r.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})):r}}var Bh,Kh,Yh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n}("undefined"!=typeof CompressionStream?Gh:Jh),Xh=function(){function t(){}return t.create=function(t){return this.instance?this.instance:ur.isCompressionEnabled()?this.instance=new Yh(t):new Pn(t)},t}(),$h=function(){function t(t){this.Ta=t,this.Ra=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.Ta.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Ra,n)},t.prototype.anonymize=function(t){var n=this.Ta.removeQueryString(t.url);return ht(ht({},t),{url:this.Ta.anonymizeUrl(n,this.Ra),library:t.library?this.Ta.anonymizeUrl(t.library,this.Ra):void 0})},t}(),Zh=function(){function t(t,n){this.j=t,this.$=n}return t.prototype.anonymize=function(t){return j(t.message)&&(t.message=this.Vp(t.message),t.message=this.j.anonymizeEmail(t.message)),j(t.filename)&&(t.filename=this.$.computeOverriddenUrl(t.filename)),t},t.prototype.Vp=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),Qh=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),to=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),no=["visit",2],io=["page",3],ro=["nextPageOnly",4],so=function(){function t(t,n){this.j=t,this.Jd=n,this.zp={},this.Jp={}}return t.prototype.set=function(t,n,i,r){var s,e;if(t>0&&H(n)&&H(i)&&!V(n)&&!V(i)){var u=this.j.anonymizeEmail(csString(n)),h=this.j.anonymizeEmail(csString(i));if(s=[u.slice(0,512),h.slice(0,255)],e=""!==i,!F(r)||csArray.prototype.indexOf.call(no,r)>=0){var o=this.getCustomVariablesSession();e?o[t]=s:delete o[t],this.setCustomVariableSession(o)}(!F(r)||csArray.prototype.indexOf.call(io,r)>=0)&&(e?this.zp[t]=s:delete this.zp[t]),F(r)&&csArray.prototype.indexOf.call(ro,r)>=0&&(e?this.Jp[t]=s:delete this.Jp[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.Jd.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&q(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.Jd.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.Jd.remove()},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.Jp)this.Jp.hasOwnProperty(n)&&(this.zp[n]=this.Jp[n]);for(var n in this.zp)this.zp.hasOwnProperty(n)&&(t[n]=this.zp[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.Gp(t)};return this.zp&&window.csJSON.stringify(this.zp).length>2&&(i.cvarp=this.Gp(this.zp)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.Jp).length>0)for(var t in this.Jp)this.Jp[t]===this.zp[t]&&(delete this.zp[t],delete this.Jp[t])},t.prototype.Gp=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],s=r[0],e=r[1];h=1,o=20,(!(U(u=i)&&u>=h&&u<=o)||s.length>512||e.length>255)&&delete t[n]}var u,h,o,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),eo=["setCustomVariable"],uo=function(){function t(t,n){this.lo=t,this.Tt=n}return t.prototype.init=function(){var t=this;this.lo.register(eo,(function(n,i,r,s){t.Tt.set(n,i,r,s)}))},t.prototype.onAfterArtificialPageView=function(){this.Tt.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.Tt.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.Tt.removeCustomVariablesSession()},t}(),ho=function(){function t(t){this.U=t,this.Wp=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this.Wp,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){if(!this.U.apiErrors.validCustomHeaders)return!1;var n=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(this.U.apiErrors.validCustomHeaders,(function(t){return csString.prototype.toLowerCase.call(t)===n}))},t}(),oo=function(){function t(t){this.j=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,s=csString.prototype.split.call(n,"/");r<s.length;r++){var e=s[r];I(e,t.Bp)?csArray.prototype.push.call(i,{key:e,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(e,1)))}):csArray.prototype.push.call(i,{key:e,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.j.anonymizeEmail(t);return i=this.j.anonymizeJwt(i),n.length>0?this.Kp(i,n):i},t.prototype.removeQueryString=function(t){var n=this.Yp(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.Yp=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.Kp=function(t,n){for(var i=this.Yp(t),r=i.path,s=i.queryString,e=csString.prototype.split.call(r,"/"),u=0,h=n;u<h.length;u++){var o=h[u],c=this.Xp(e,o);if(null!==c)return"".concat(c).concat(s)}return t},t.prototype.Xp=function(n,i){if(n.length<i.length)return null;for(var r="",s=0;s<n.length;s+=1)if(s>=i.length)r+="".concat(n[s],"/");else if(I(i[s].key,t.Bp))r+="".concat(i[s].value,"/");else{if(n[s]!==i[s].key)return null;r+="".concat(n[s],"/")}return csString.prototype.slice.call(r,0,-1)},t.Bp=":",t}(),co=function(){function t(t,n){this.hc=t,this.U=n}return t.prototype.getEventTargetPath=function(t){var n=Zn(t);return this.hc.getElementPath(n,ht({dynamicIdRegex:this.U.dynamicIdRegex},this.U.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=Zn(t),i=this.hc.getElementPathAndFirstAnchorParent(n,ht({dynamicIdRegex:this.U.dynamicIdRegex},this.U.pathComputationRules)),r=i.path,s=i.firstAnchorParent;return{path:r,targetLink:this.$p(s)?s.href:""}},t.prototype.hasValidEventTarget=function(t){var n=Zn(t);return this.hc.isValidElement(n)},t.prototype.getElementPath=function(t){return this.hc.getElementPath(t,ht({dynamicIdRegex:this.U.dynamicIdRegex},this.U.pathComputationRules))},t.prototype.$p=function(t){var n;return null!==t&&t.hasAttribute("href")&&!I(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),fo=function(){function t(t){this.Kc=t}return t.prototype.transformEvent=function(t,n){var i=this.Zp(t,n),r=this.Kc.getElementPath(t);return this.Qp(r,i)},t.prototype.Zp=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+hi.windowOffsetX()),n.y=Math.round(i.top+n.y+hi.windowOffsetY())}return n},t.prototype.Qp=function(t,n){return Os(n)&&(n.tgt="".concat(t).concat(jh).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(jh).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(jh).concat(n.tgtLk)),n},t}(),ao=function(){function t(t){this.Kc=t}return t.prototype.transformEvent=function(t,n){var i=this.Kc.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(jh).concat(n.iframePath):i,commands:n.commands}},t}(),vo=function(){function t(t){this.Kc=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.Kc.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return ht(ht({},t),{targetPath:"".concat(i).concat(jh).concat(t.targetPath)})}));return ht(ht({},n),{products:r})},t}(),lo=function(){function t(t){this.An=t,this.tm={clientX:2,clientY:3},this.nm={clientX:1,clientY:2},this.im=[Cn.POINTER_DOWN,Cn.POINTER_MOVE,Cn.POINTER_UP],this.rm=[Cn.TOUCH_START,Cn.TOUCH_MOVE,Cn.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!ci.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==Cn.VISIBILITY_CHANGE})),0===n.events.length||(J.warn("IframeRecordingEventsTransformer received event ".concat(Ft.RecordingEvent," \n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.An.getId(t);if(void 0===r)return J.error("IframeRecordingEventsTransformer received event ".concat(Ft.RecordingEvent," \n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var s=null;csArray.prototype.some.call(n.events,(function(t){return i.sm(t)||i.um(t)}))&&(s=t.getBoundingClientRect());for(var e=0,u=n.events;e<u.length;e++){var h=u[e];this.sm(h)?this.hm(s,h):this.um(h)&&this.om(s,h),h.context=h.context&&h.context.length>0?"".concat(r,"/").concat(h.context):"".concat(r)}return n},t.prototype.om=function(t,n){this.fm(this.nm,t,n)},t.prototype.hm=function(t,n){this.fm(this.tm,t,n)},t.prototype.fm=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.sm=function(t){return-1!==csArray.prototype.indexOf.call(this.im,t.type)},t.prototype.um=function(t){return-1!==csArray.prototype.indexOf.call(this.rm,t.type)},t}(),wo=function(){function t(t,n,i){this.U=t,this.Z=n,this.q=i}return t.prototype.init=function(){var t,n,i,r=this,s="boot";(null===(t=window.performance)||void 0===t?void 0:t.mark)&&window.performance.mark("cs-start-".concat(s));var e=new zu,u=new St,h=new oo(u),o=new Ch(window.location,h),c=new Yt(this.U,o,this.Z);c.init();var f=new Qh,a=new to,v=new eh(window.location,c),l=new Rh(this.U,c);l.init();var d,w=Xh.create(J.warn);if(this.U.useMalkaPipeline){var y=new Un(this.U.getQuotaServiceUri(),"quota");(d=new ju(this.U,w,y,e,v,o)).init()}else d=new Uu(this.U,w,v,o);var p=new yn(this.U,c,l,f),m=new qu(p,d),g=new cn(this.U,c,l,f),A=new Du(this.U,g,m);this.q.setContext(A,m),d.setVisitorService(A);var E=new Hu(A,m),S=new En(this.U,c,l,f),b=new Zu(window.location,S),N=new Qu(b),T=new Fu(this.U,A,b),R=new Ti,k=new co(it,this.U),O=new fo(k),I=new ao(k),x=new vo(k),L=new lo(R),C=new qh(O,I,x,L),_=new wh,M=new lh(_,C),D=new nh(o),P=new rh(D,_),U=new bn(this.U,c,l,f),j=new so(u,U),q=new uo(_,j),F=new un(A,m,b,j,this.U),H=new Rn,V=new Tn(H,window.location),z=new vh(this.U,F,V),G=new kh(this.U,H);l.setStates(F,G),new _u(this.U,A,b,T,E,z,l,v).compute((function(t){var n;M.init();var i=new _h,f=new Wu(r.U,c,a),v=new Xu(r.U,f,e),l=new Yu(_,v),d=new hh(r.U,c,a),y=new oh(e,window.location,d),p=new fh(_,y),g=new xh(_,r.U),E=new Oh(r.U,A,m),S=new Ih,b=new er,T=new ho(r.U),R=new Ph(b,T,r.U),O=new Uh(b,T,r.U),I=new Mh(R,O),x=new $h(h),L=new Zh(u,o),U=new Nh(S,L,I,x,u,r.U,E,C,_,i,o);(U.init(),(null===(n=window.performance)||void 0===n?void 0:n.mark)&&window.performance.mark("cs-step2-".concat(s)),e.addListeners(U),t)?(e.emitInitTracking(),new Cu(E,w,A,m,e,_,M,r.U,p,y,l,v,u,k,h,o,g,i,S,L,I,x,C,j,q,D,P).start()):new $u(e,_,M,p,y,N,l).start()})),(null===(n=window.performance)||void 0===n?void 0:n.mark)&&(null===(i=window.performance)||void 0===i?void 0:i.measure)&&(window.performance.mark("cs-end-".concat(s)),window.performance.measure("cs-measure-".concat(s),"cs-start-".concat(s),"cs-end-".concat(s)))},t}();!function(t){var n,i="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var h=t.source,o=t.data;if(e(o)){var a=function(){var n,i,r,e=s("{domain}/tag/tag.bundle.js?v={version}",o);n=e,i=function(){return h.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=o.token,f(r.loadBundle),u(t.origin)?a():function(t,n){var r=s(i,t),e=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),u=function(t){t.source===e.contentWindow&&"TOKEN_VALID"===t.data&&(f(u),e.remove(),n())};c(u),document.head.appendChild(e)}(o,a)}}};function s(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function e(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&o(t.version)&&h(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function h(t){return/^[a-zA-Z0-9]+$/.test(t)}function o(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function f(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=e,t.isAuthorizedDomain=u,t.isAuthorizedToken=h,t.isAuthorizedTagVersion=o,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=f}(Bh||(Bh={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],s={ping:function(t){"ping"===t.data&&e(t.origin)&&(n=t.origin,o(s.ping),h(s.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(o(s.insertMessageScript),u(n))}))};function e(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var s=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(s,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function h(t){window.addEventListener("message",t,!1)}function o(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Bh.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=e,t.waitForConnection=function(){h(s.ping),Bh.waitForBundleInjection()},t.listen=h,t.removeListener=o,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}(Kh||(Kh={}));var yo,po,mo=window.CSFrameCommunication||Kh,go=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n.prototype.emitAfterPageViewCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},n.prototype.emitIntegrationSessionKeyCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},n.prototype.emitParentRecordingStatusChange=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},n}(Vu),Ao=function(){function t(t){this.am=t}return t.prototype.init=function(){this.am.register(ws),this.am.register(eo),this.am.register(Ue),this.am.register(je),this.am.register(Pe),this.am.register(Ss),this.am.register(bs),this.am.register(Ns),this.am.register(Ts),this.am.register(Ge),this.am.register(We),this.am.register(ch),this.am.register(vu),this.am.register(lu),this.am.register(Bu),this.am.register(Ku),this.am.register(bh),this.am.register(Sh)},t.prototype.onStartTracking=function(){this.am.start()},t.prototype.onOptout=function(){this.am.stop()},t}(),Eo=function(t){function n(n,i){var r=t.call(this)||this;return r.lo=n,r.vm=i,r.Go=[],r}return ut(n,t),n.prototype.onStart=function(){this.commandsBatchReady()},n.prototype.onStop=function(){this.Go=[]},n.prototype.register=function(t){for(var n=this,i=function(t){r.lo.register([t],(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n.send(t,i)}))},r=this,s=0,e=t;s<e.length;s++){i(e[s])}},n.prototype.send=function(t,n){csArray.prototype.push.call(this.Go,{name:t,params:n}),this.isStarted&&this.commandsBatchReady()},n.prototype.commandsBatchReady=function(){if(0!==this.Go.length){var t={commands:this.Go};this.vm.sendToParent(Ft.Commands,t),this.Go=[]}},ot([G("Commands.iframe.commandsBatch.send")],n.prototype,"send",null),ot([as(),G("send iframe commands batch")],n.prototype,"commandsBatchReady",null),n}(wi),So=function(t){function n(n,i,r,s){var e=t.call(this)||this;return e.U=n,e.ni=i,e.lm=r,e.dm=s,e.wm=null,e.ym=25,e.pm=[],e.gm={boundElement:window,type:"message",listener:function(t){return e.bl(t)}},e}return ut(n,t),n.prototype.onStart=function(){Fn(this.gm,!1),this.Am()},n.prototype.onStop=function(){Hn(this.gm,!1),this.wm&&(Ht.closeChannelPort(this.wm),this.wm=null)},n.prototype.sendToParent=function(t,n){var i=this.Em(t,n);this.xy(i)},n.prototype.Am=function(){var t=this.Em(Ft.Discovery);Ht.sendPostMessage(window.parent,"*",t)},n.prototype.Em=function(t,n){var i=Ht.buildBaseMessage(t,qt.Child,this.U.projectId);return n&&(i.content=n),i},n.prototype.xy=function(t){null!==this.wm?Ht.sendChannelMessage(this.wm,t):this.Sm(t)},n.prototype.bm=function(t,n){var i=this,r=new MessageChannel;this.wm=r.port1,this.wm.onmessage=function(t){i.Fl(t)};var s=this.Em(Ft.Discovery);s.id=n,Ht.sendPostMessage(window.parent,t,s,[r.port2]),this.Nm()},n.prototype.Fl=function(t){switch(t.data.type){case Ft.IntegrationCallback:var n=t.data.content;n.initiator===jt.AfterPageView?this.dm.emitAfterPageViewCallback(n):n.initiator===jt.GetSessionKey?this.dm.emitIntegrationSessionKeyCallback(n):J.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case Ft.Stop:this.ni.emitOptout();break;case Ft.RecordingStatus:var i=t.data.content;this.lm.setRecordingStatus(i),this.dm.emitParentRecordingStatusChange(i);break;default:J.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},n.prototype.bl=function(t){if(null===this.wm&&Ht.isMessageValid(t,qt.Parent,this.U.projectId,this.U.hostnames))switch(t.data.type){case Ft.Stop:this.ni.emitOptout();break;case Ft.Discovery:if(!U(t.data.id)||t.data.id<0)return void J.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.bm(t.origin,t.data.id);break;default:J.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Sm=function(t){this.pm.length<this.ym&&csArray.prototype.push.call(this.pm,t)},n.prototype.Nm=function(){if(null!==this.wm){for(var t=0,n=this.pm;t<n.length;t++){var i=n[t];Ht.sendChannelMessage(this.wm,i)}this.Tm(),this.pm=[]}},n.prototype.Tm=function(){var t=Ht.buildBaseMessage(Ft.EndOfBufferedMessages,qt.Child,this.U.projectId);Ht.sendChannelMessage(this.wm,t)},n}(wi),bo=function(t){function n(n,i){var r=t.call(this)||this;return r._i=n,r.vm=i,r}return ut(n,t),n.prototype.onStart=function(){var t=this;this._i.subscribe(n.tr,(function(n){return t.Qi(n)}))},n.prototype.onStop=function(){this._i.unsubscribe(n.tr)},n.prototype.Qi=function(t){this.isStarted&&this.vm.sendToParent(Ft.ApiError,t)},n.tr="ChildApiErrorsService",n}(wi),No=function(t){function n(n,i){var r=t.call(this)||this;return r._i=n,r.vm=i,r}return ut(n,t),n.prototype.onStart=function(){var t=this;this._i.subscribe(n.tr,(function(n){return t.Qi(n)}),{detailedEvent:!0})},n.prototype.onStop=function(){this._i.unsubscribe(n.tr)},n.prototype.Qi=function(t){this.isStarted&&this.vm.sendToParent(Ft.DetailedApiError,t)},n.tr="ChildDetailedApiErrorsService",n}(wi),To=function(t){function n(n,i){var r=t.call(this)||this;return r.Li=n,r.vm=i,r}return ut(n,t),n.prototype.onStart=function(){var t=this;this.Li.subscribe(n.tr,(function(n){return t.Qi(n)}))},n.prototype.onStop=function(){this.Li.unsubscribe(n.tr)},n.prototype.Qi=function(t){this.isStarted&&this.vm.sendToParent(Ft.JavascriptError,t)},n.tr="ChildJavaScriptErrorsService",n}(wi),Ro=function(){function t(t,n,i,r){this.Li=t,this._i=n,this.U=i,this.vm=r}return t.prototype.init=function(){this.Rm=new To(this.Li,this.vm),this._i.excludeDomains([dh.CONTENTSQUARE,dh.CLICKTALE,dh.FAKE_TRACKER]),this.km=new bo(this._i,this.vm),this.Om=new No(this._i,this.vm),this._i.init()},t.prototype.onStartTracking=function(){this.U.jsErrorsEnabled&&this.Rm.start(),this.U.apiErrors.enabled&&this.km.start()},t.prototype.onParentRecordingStatusChange=function(t){this.U.apiErrors.enabled&&(t.isRecording?this.Om.start():this.Om.stop())},t.prototype.onOptout=function(){this.Rm.stop(),this.km.stop(),this.Om.stop()},t}(),ko=function(){function t(t){this.vm=t}return t.prototype.onStartTracking=function(){this.vm.start()},t.prototype.onOptout=function(){this.vm.stop()},t}(),Oo=function(){function t(t,n,i,r){this.Fo=t,this.Ho=n,this.vm=i,this.lm=r}return t.prototype.init=function(){var t=this;this.Fo.onChildMessage((function(n,i,r){return t.Ho.emitIframeEvent(n,i,r)})),this.Fo.setRecordingStatusCallback((function(){return t.lm.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.Fo.start()},t.prototype.onOptout=function(){this.Fo.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var n={events:t,containsUserEvent:!0};this.vm.sendToParent(Ft.RecordingEvent,n)},t.prototype.onIframeRecordingBrowserEvent=function(t){var n={events:t,containsUserEvent:!1};this.vm.sendToParent(Ft.RecordingEvent,n)},t.prototype.onIframeAnalysisEvent=function(t){this.vm.sendToParent(Ft.AnalysisEvent,t)},t.prototype.onIframeJavascriptError=function(t){this.vm.sendToParent(Ft.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.vm.sendToParent(Ft.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.vm.sendToParent(Ft.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.vm.sendToParent(Ft.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.vm.sendToParent(Ft.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.vm.sendToParent(Ft.IntegrationCallback,t)},t.prototype.onAfterPageViewCallback=function(t){this.Fo.sendToChildren(Ft.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Fo.sendToChildren(Ft.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.Fo.sendToChildren(Ft.RecordingStatus,t)},t}(),Io=function(t){function n(n,i,r,s,e){var u=t.call(this)||this;return u.Hc=n,u.Zu=i,u.vm=r,u.Zc=s,u.tf=e,u}return ut(n,t),n.prototype.init=function(){var t,n,i=this;this.Hc.onEvent((function(t){return i.Qi(t)})),this.Zu.onEvent((function(t){return i.Qi(t)})),null===(t=this.Zc)||void 0===t||t.onEvent((function(t){return i.Qi(t)})),null===(n=this.tf)||void 0===n||n.onEvent((function(t){return i.Qi(t)}))},n.prototype.onStart=function(){var t,n;this.Hc.start(),this.Zu.start(),null===(t=this.Zc)||void 0===t||t.start(),null===(n=this.tf)||void 0===n||n.start()},n.prototype.onStop=function(){var t,n;this.Hc.stop(),this.Zu.stop(),null===(t=this.Zc)||void 0===t||t.stop(),null===(n=this.tf)||void 0===n||n.stop()},n.prototype.Qi=function(t){this.isStarted&&t.type!==vs.RESIZE&&this.vm.sendToParent(Ft.AnalysisEvent,t)},n}(wi),xo=function(){function t(t,n,i,r){this.U=t,this.Kc=n,this.gn=i,this.vm=r}return t.prototype.init=function(){var t,n;this.U.accessibilityEnabled&&(t=new Ne,n=new Te);var i=new Gs(this.U,this.Kc,this.gn),r=new Ms(this.U,this.Kc,new Ou(J));this.Im=new Io(i,r,this.vm,t,n),this.Im.init()},t.prototype.onStartTracking=function(){this.Im.start()},t.prototype.onOptout=function(){this.Im.stop()},t}(),Lo=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return ut(n,t),n}(Xe),Co=function(){function t(t,n,i){this.$=t,this.xm=n,this.vm=i,this.ov=[]}return t.prototype.collect=function(){var t=this.xm.collectProductsAndAnchors().products;this.ov=t,this.Lm=this.$.getAnonymizedUrl(),this.Cm()},t.prototype.clearProducts=function(){this.ov=[]},t.prototype.Cm=function(){var t={targetUrl:this.Lm,windowWidth:hi.windowWidth(),windowHeight:hi.windowHeight(),products:this.ov};this.vm.sendToParent(Ft.EmerchandisingMessage,t)},t}(),_o=function(){function t(t,n,i,r){this.U=t,this.Kc=n,this.$=i,this.vm=r}return t.prototype.init=function(){var t=new Lo(this.U,this.Kc);this._m=new Co(this.$,t,this.vm)},t.prototype.onStartTracking=function(){this._m.clearProducts(),this._m.collect()},t.prototype.onAfterPageViewCallback=function(){this._m.clearProducts(),this._m.collect()},t}(),Mo=function(t){function n(n,i,r,s,e,u,h,o,c,f,a,v){var l=t.call(this)||this;return l.U=n,l.Ni=i,l.Ti=r,l.Ri=s,l.ki=e,l.Oi=u,l.ti=h,l.xi=o,l.Mi=c,l.Sn=f,l.Ui=a,l.vm=v,l.Vi=new di,l.zi=!1,l.Si=[],l.Mm=!1,l.Gi=function(t){return l.nf(t)},l.Wi=function(t){return l.Bi(t)},l}return ut(n,t),n.prototype.init=function(){this.Yi()},n.prototype.Yi=function(){this.Ni.onEvent(this.Gi),this.Ti.onEvent(this.Gi),this.ki.onEvent(this.Gi),this.Ri.onEvent(this.Wi),this.ti.onEvent(this.Gi),this.xi.onEvent(this.Gi),this.Mi.onEvent(this.Gi),this.Oi.onEvent(this.Wi),this.Sn.onTextNodeToEncrypt(this.Gi),this.Ui.onEvent(this.Gi)},n.prototype.blockSendingEventsFromSerialization=function(){this.zi=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.zi=!0},n.prototype.nf=function(t){this.Dm(t),this.Pm()},n.prototype.Bi=function(t){this.Um(t),this.Pm()},n.prototype.Um=function(t){csArray.prototype.push.call(this.Si,t),this.Mm=!0},n.prototype.Dm=function(t){csArray.prototype.push.call(this.Si,t)},n.prototype.Pm=function(){if(this.zi){var t={containsUserEvent:this.Mm,events:this.Si};this.vm.sendToParent(Ft.RecordingEvent,t),this.Si=[],this.Mm=!1}},n.prototype.onStart=function(){this.Ui.start(),this.xi.start(),this.Ti.start(),this.Ni.start(),this.Mi.start(),this.ki.start(),this.Oi.start(),this.U.emitDebugEvents&&this.Vi.emit("replayRecordingStarted")},n.prototype.onStop=function(){this.Ni.stop(),this.Ti.stop(),this.ki.stop(),this.Ri.stop(),this.Mi.stop(),this.Oi.stop(),this.Ui.stop()},n.prototype.addInitialDom=function(t){for(var n=0;n<this.Si.length;n+=1){if(this.Si[n].date>t.date)return csArray.prototype.splice.call(this.Si,n,0,t),this.Mm=!0,void this.Pm()}this.Um(t),this.Pm()},n}(wi),Do=function(){function t(t,n,i,r,s,e,u,h,o,c,f){this.U=t,this.an=n,this.gn=i,this.j=r,this.An=s,this.En=e,this.Zu=u,this.ni=h,this.vm=o,this.lm=c,this.lo=f}return t.prototype.init=function(){var t=this,n=new er,i=new ki(this.En);this.po=new Mi(this.j,this.U),this.po.init();var r=new $i,s=new nr(n,this.An),e=new Rr(window.crypto),u=new Or(window.crypto);u.init(),e.init();var h=new br,o=new br,c=new br,f=new br,a=new br,v=new Er(this.An,this.U,u,e,h,o,c,a,f,this.an);v.init();var l=new Sr(v),d=[i,this.po,l,r],w=new gr(this.En,1e3);this.U.textVisibilityEnabled&&csArray.prototype.push.call(d,w);var y,p=new Jr;if(p.isSupported()&&csArray.prototype.push.call(d,p.getProcessor()),this.mo()){var m=new qr(this.An);y=new Vr(d,this.An,m)}else y=new zr(d);this.Zn=new bi(y,this.An,this.po,v),this.Ri=new ii(this.gn,this.An,this.En,v),this.Ri.init(),this.Ti=new fi(this.Zn,s,r,this.ni,this.An,this.En),this.jm=new Mo(this.U,new Ni(n,this.An,this.En,r),this.Ti,this.Ri,new Vi(window.location,this.j),new Ir(this.Zu,this.An,this.En),r,new Zi(window),w,v,p,this.vm),this.lo.register(Qr,(function(){return t.lm.getRecordingStatus().isRecording})),this.lo.register($r,(function(n){t.po.setWhitelistedElementsSelector(n)})),this.lo.register(Zr,(function(n){t.En.setPIISelectors(n)})),s.init(),this.jm.init()},t.prototype.onParentRecordingStatusChange=function(t){t.PIISelectors&&this.En.setPIISelectors(t.PIISelectors),t.capturedElementSelector&&this.po.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.Zn.setAnonymization(t.useAnonymization),t.isRecording?this.jm.start():this.jm.stop(),t.isMutationTrackerStarted?this.Ti.start():this.Ti.stop()},t.prototype.onInitialDomStart=function(){this.jm.blockSendingEventsFromSerialization()},t.prototype.onInitialDomDone=function(t){this.Ri.start(),this.jm.allowSendingEventsFromSerialization(),this.jm.addInitialDom(t)},t.prototype.mo=function(){return Yr.isAsyncSerializationSupported()&&this.U.asyncSerializerEnabled},t}(),Po=function(){function t(t){this.vm=t,this._o={}}return t.prototype.handleCommand=function(t){V(t)&&this.Mo(t)},t.prototype.executeRegisteredCallbacks=function(t){var n=t.trackingContext;if(n)if(t.callbackId){var i=this._o[t.callbackId];i&&this.Do(i,n)}else for(var r in this._o)this.Do(this._o[r],n)},t.prototype.Mo=function(t){var n=C.integer(),i={callbackId:n,initiator:jt.AfterPageView};this._o[n]=t,this.vm.sendToParent(Ft.IntegrationCallback,i)},t.prototype.Do=function(t,n){setTimeout((function(){t(n)}))},t}(),Uo=function(){function t(t){this.vm=t,this.Po={}}return t.prototype.handleCommand=function(t){q(t)&&V(t.callback)&&this.jo(t.callback)},t.prototype.executePendingCallbacks=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n){var r=this.Po[i];r&&(delete this.Po[i],this.Do(r,n.sessionKey))}},t.prototype.jo=function(t){var n=C.integer(),i={callbackId:n,initiator:jt.GetSessionKey};this.Po[n]=t,this.vm.sendToParent(Ft.IntegrationCallback,i)},t.prototype.Do=function(t,n){setTimeout((function(){t(n)}))},t}(),jo=function(){function t(t,n){this.lo=t,this.vm=n}return t.prototype.init=function(){var t=this;this.qm=new Po(this.vm),this.Fm=new Uo(this.vm),this.lo.register(es,(function(n){t.qm.handleCommand(n)})),this.lo.register(us,(function(n){return t.Fm.handleCommand(n)}))},t.prototype.onAfterPageViewCallback=function(t){this.qm.executeRegisteredCallbacks(t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Fm.executePendingCallbacks(t)},t}(),qo=function(){function t(t,n,i,r,s,e){var u=this;this.Hm=t,this.ni=n,this.U=i,this.vm=r,this.lm=s,this.lo=e,this.Md=function(){u.lo.start(),u.Pd.start()}}return t.prototype.start=function(){var t=this,n=new co(it,this.U),i=new ze(n),r=new St,s=Xh.create(J.warn),e=new xo(this.U,n,i,this.vm),u=new ko(this.vm);if(this.U.eMerchandisingEnabled){var h=new St,o=new oo(h),c=new Ch(window.location,o),f=new _o(this.U,n,c,this.vm);this.Hm.addListeners(f),this.ni.addListeners(f),f.init()}var a=new jo(this.lo,this.vm);this.Hm.addListeners(a),a.init();var v=new Ti,l=new Eu(this.U);if(Yr.isRecordingSupported()&&s.isSupported()){var d=new Ou(J),w=new Do(this.U,s,i,r,v,l,d,this.ni,this.vm,this.lm,this.lo);this.ni.addListeners(w),this.Hm.addListeners(w),w.init()}var y=new Nu(this.U,l),p=new fo(n),m=new ao(n),g=new vo(n),A=new lo(v),E=new qh(p,m,g,A),S=new Oo(y,E,this.vm,this.lm);E.addListeners(S),this.Hm.addListeners(S),this.ni.addListeners(u,S,e),S.init(),e.init(),this.Pd=new Je,this.Pd.onLoad((function(){t.ni.emitStartTracking()})),this.Md()},t}(),Fo=function(){function t(){this.Vm=null}return t.prototype.getRecordingStatus=function(){return null===this.Vm?{isRecording:!1}:this.Vm},t.prototype.setRecordingStatus=function(t){this.Vm=t},t}(),Ho=function(){function t(t){this.U=t}return t.prototype.init=function(){var t=new zu,n=new go,i=new Fo,r=new So(this.U,t,i,n),s=new wh,e=new Eo(s,r),u=new Ao(e);u.init();var h=new Ih,o=new ho(this.U),c=new er,f=new Ph(c,o,this.U),a=new Uh(c,o,this.U),v=new Mh(f,a),l=new Ro(h,v,this.U,r);l.init(),n.addListeners(l),t.addListeners(u,l),t.emitInitTracking(),new qo(n,t,this.U,r,i,s).start()},t}(),Vo=function(){function t(t,n,i){this.U=t,this.vt=n,this.q=i}return t.prototype.start=function(){var t,n;if(!window.UXAnalytics){var i=new $t(this.vt,this.U);i.init();var r=new en(this.U,i);if(this.vt.isTopWindowTracker()&&r.canTrack()){if((null===(t=window.CSProtectnativeFunctionsLogs)||void 0===t?void 0:t.Warning)&&J.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(n=window.CSProtectnativeFunctionsLogs)||void 0===n?void 0:n.Critical)return void J.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new wo(this.U,i,this.q).init()}else if(!this.vt.isTopWindowTracker()&&r.canTrackInChild()){new Ho(this.U).init()}window.UXAnalytics={},!window.CSFrameCommunication&&mo.isActivable()&&(window.CSFrameCommunication=mo,mo.waitForConnection())}},ot([$n("main.start"),G("main.start")],t.prototype,"start",null),t}();try{(null===(yo=window.performance)||void 0===yo?void 0:yo.mark)&&window.performance.mark("cs-start-tag");var zo=new lt(window.CS_CONF);window._uxa=window._uxa||[],zo.processOptionOverrides(window._uxa);var Jo=new dt(window,zo);Jo.init();var Go=new Kt;if(J.computeIsActive(zo.validationRate),Jo.isTopWindowTracker()){var Wo=new _t(zo,Go);J.setStrategy(Wo)}else{var Bo=new Bt(zo);J.setStrategy(Bo)}void 0===po&&(po=50),Jn=J.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),Jn&&(zn=po),new Vo(zo,Jo,Go).start()}catch(t){}}();